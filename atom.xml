<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Moorez</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.shenzekun.cn/"/>
  <updated>2019-06-01T07:22:58.811Z</updated>
  <id>http://www.shenzekun.cn/</id>
  
  <author>
    <name>shenzekun</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ webp çš„å‡ ç§è§£å†³æ–¹æ³•</title>
    <link href="http://www.shenzekun.cn/%E5%88%A4%E6%96%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81-webp-%E7%9A%84%E5%87%A0%E7%A7%8D%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95.html"/>
    <id>http://www.shenzekun.cn/åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒ-webp-çš„å‡ ç§è§£å†³æ–¹æ³•.html</id>
    <published>2019-06-01T07:21:16.000Z</published>
    <updated>2019-06-01T07:22:58.811Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒWebP æ˜¯ Google æ¨å‡ºçš„ WebP å›¾ç‰‡æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ç§æ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ï¼Œæ ¹æ®Googleæµ‹è¯•ï¼Œç›¸åŒçš„å›¾ç‰‡ï¼ŒWebP æ ¼å¼çš„å›¾ç‰‡å‡èƒ½æ¯” PNGï¼ŒJPG æ ¼å¼çš„å›¾ç‰‡èŠ‚çº¦ä¸å°‘ä½“ç§¯ï¼Œä½†æ˜¯å…¶å…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚ä¸‹ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-c11554a7e34e2e15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>å› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€äº›å…¼å®¹å¤„ç†ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­æµè§ˆå™¨æ”¯æŒ webp å‘¢ï¼Ÿä¸‹é¢æœ‰å‡ ç§æ–¹æ³•å¯ä¾›å‚è€ƒã€‚</p></blockquote><a id="more"></a><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p><strong>ä½¿ç”¨ canvas çš„ toDataURL è¿›è¡Œåˆ¤æ–­</strong></p><p>toDataURLæ–¹æ³•åœ¨MDNè§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote><p>HTMLCanvasElement.toDataURL() æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«å›¾ç‰‡å±•ç¤ºçš„ data URI ã€‚å¯ä»¥ä½¿ç”¨ type å‚æ•°å…¶ç±»å‹ï¼Œé»˜è®¤ä¸º PNG æ ¼å¼ã€‚å›¾ç‰‡çš„åˆ†è¾¨ç‡ä¸º96dpiã€‚</p></blockquote><ul><li>å¦‚æœç”»å¸ƒçš„é«˜åº¦æˆ–å®½åº¦æ˜¯0ï¼Œé‚£ä¹ˆä¼šè¿”å›å­—ç¬¦ä¸²â€œdata:,â€ã€‚</li><li>å¦‚æœä¼ å…¥çš„ç±»å‹éâ€œimage/pngâ€ï¼Œä½†æ˜¯è¿”å›çš„å€¼ä»¥â€œdata:image/pngâ€å¼€å¤´ï¼Œé‚£ä¹ˆè¯¥ä¼ å…¥çš„ç±»å‹æ˜¯ä¸æ”¯æŒçš„ã€‚</li><li>Chromeæ”¯æŒâ€œimage/webpâ€ç±»å‹ã€‚</li></ul><p>toDataURLæ–¹æ³•å°†å›¾ç‰‡è½¬åŒ–ä¸ºåŒ…å«dataURIçš„DOMStringï¼Œé€šè¿‡ base64 ç¼–ç å‰é¢çš„å›¾ç‰‡ç±»å‹å€¼æ˜¯image/webpè¿›è¡Œåˆ¤æ–­ã€‚</p><p>æ¯”å¦‚åœ¨è°·æ­Œæµè§ˆå™¨ä½¿ç”¨toDataURLæ–¹æ³•è½¬æˆimage/webpï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-3125077e103aebff.png&amp;originHeight=178&amp;originWidth=1190&amp;size=48391&amp;status=done&amp;width=595?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>åœ¨ Safari æµè§ˆå™¨ä½¿ç”¨toDataURLæ–¹æ³•è½¬æˆimage/webpï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-9729ceec28fe7a61.png&amp;originHeight=236&amp;originWidth=2530&amp;size=116511&amp;status=done&amp;width=1265?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>å¯ä»¥å‘ç°åœ¨ä¸æ”¯æŒ webp çš„æµè§ˆå™¨è¿›è¡ŒtoDataURLï¼Œå¾—åˆ°çš„å›¾ç‰‡ç±»å‹å¹¶ä¸æ˜¯ webpï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªè¿›è¡Œåˆ¤æ–­ã€‚</p><p>å®ç°æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> isSupportWebp = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>).toDataURL(<span class="string">'image/webp'</span>, <span class="number">0.5</span>).indexOf(<span class="string">'data:image/webp'</span>) === <span class="number">0</span>;</div><div class="line">  &#125; <span class="keyword">catch</span>(err) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">isSupportWebp()</div></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p><strong>åœ¨æœåŠ¡ç«¯æ ¹æ®è¯·æ±‚headerä¿¡æ¯åˆ¤æ–­æµè§ˆå™¨æ˜¯å¦æ”¯æŒwebp</strong></p><p>è°·æ­Œæµè§ˆå™¨ä¸Šè¯·æ±‚å›¾ç‰‡ headeræ˜¯è¿™æ ·çš„ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-56755fe184d5f265.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>IE æµè§ˆå™¨è¯·æ±‚å›¾ç‰‡ headeræ˜¯è¿™æ ·çš„ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-5b6d8cdf3623e0dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>åœ¨å›¾ç‰‡è¯·æ±‚å‘å‡ºçš„æ—¶å€™ï¼ŒRequest Headers é‡Œæœ‰ Acceptï¼ŒæœåŠ¡ç«¯å¯ä»¥æ ¹æ®Accept é‡Œé¢æ˜¯å¦æœ‰ image/webp è¿›è¡Œåˆ¤æ–­ã€‚</p><h3 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h3><p><strong>é€šè¿‡åŠ è½½ä¸€å¼  webp å›¾ç‰‡è¿›è¡Œåˆ¤æ–­</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> supportsWebp = <span class="function">(<span class="params">&#123; createImageBitmap, Image &#125;</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (!createImageBitmap || !Image) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(<span class="literal">false</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> image = <span class="keyword">new</span> Image();</div><div class="line">      image.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">          createImageBitmap(image)</div><div class="line">              .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                  resolve(<span class="literal">true</span>);</div><div class="line">              &#125;)</div><div class="line">              .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">                  resolve(<span class="literal">false</span>);</div><div class="line">              &#125;);</div><div class="line">      &#125;;</div><div class="line">      image.onerror = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">          resolve(<span class="literal">false</span>);</div><div class="line">      &#125;;</div><div class="line">      image.src = <span class="string">'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA='</span>;</div><div class="line">  &#125;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> webpIsSupported = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> memo = <span class="literal">null</span>;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">if</span> (!memo) &#123;</div><div class="line">          memo = supportsWebp(<span class="built_in">window</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> memo;</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">webpIsSupported()().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"æ˜¯å¦æ”¯æŒ webp"</span>, res)</div><div class="line">&#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>æ­¤æ–¹æ³•ä¼šåŠ è½½ä¸€å¼  1x1 çš„ç™½è‰²çš„æ­£æ–¹å½¢èƒŒæ™¯å›¾ï¼Œç”¨æ¥æµ‹è¯•æµè§ˆå™¨æ˜¯å¦æ”¯æŒ webpã€‚</p><p>åœ¨ Google æµ‹è¯•ä»£ç ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-67d9dd37b5142e24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>åœ¨ Firefox æµ‹è¯•ä»£ç ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-ebb41ccb4555c6f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>åœ¨ Safari æµ‹è¯•ä»£ç ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/5308475-409f2cf13aedf777.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>Googleå®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·å¤„ç†çš„ï¼ˆå…ˆåŠ è½½ä¸€ä¸ªWebPå›¾ç‰‡ï¼Œå¦‚æœèƒ½è·å–åˆ°å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦ï¼Œå°±è¯´æ˜æ˜¯æ”¯æŒWebPçš„ï¼Œåä¹‹åˆ™ä¸æ”¯æŒï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_webp_feature</span>(<span class="params">feature, callback</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> kTestImages = &#123;</div><div class="line">        <span class="attr">lossy</span>: <span class="string">"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"</span>,</div><div class="line">        <span class="attr">lossless</span>: <span class="string">"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="</span>,</div><div class="line">        <span class="attr">alpha</span>: <span class="string">"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="</span>,</div><div class="line">        <span class="attr">animation</span>: <span class="string">"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> result = (img.width &gt; <span class="number">0</span>) &amp;&amp; (img.height &gt; <span class="number">0</span>);</div><div class="line">        callback(feature, result);</div><div class="line">    &#125;;</div><div class="line">    img.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        callback(feature, <span class="literal">false</span>);</div><div class="line">    &#125;;</div><div class="line">    img.src = <span class="string">"data:image/webp;base64,"</span> + kTestImages[feature];</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/toDataURL" target="_blank" rel="external">HTMLCanvasElement.toDataURL()</a></li><li><a href="https://davidwalsh.name/detect-webp" target="_blank" rel="external">Detect WEBP Support with JavaScript</a></li><li><a href="http://web.jobbole.com/87103/" target="_blank" rel="external">æ¢ç©¶WebPä¸€äº›äº‹å„¿</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒWebP æ˜¯ Google æ¨å‡ºçš„ WebP å›¾ç‰‡æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ç§æ”¯æŒæœ‰æŸå‹ç¼©å’Œæ— æŸå‹ç¼©çš„å›¾ç‰‡æ–‡ä»¶æ ¼å¼ï¼Œæ ¹æ®Googleæµ‹è¯•ï¼Œç›¸åŒçš„å›¾ç‰‡ï¼ŒWebP æ ¼å¼çš„å›¾ç‰‡å‡èƒ½æ¯” PNGï¼ŒJPG æ ¼å¼çš„å›¾ç‰‡èŠ‚çº¦ä¸å°‘ä½“ç§¯ï¼Œä½†æ˜¯å…¶å…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½ï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/5308475-c11554a7e34e2e15.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;&quot;&gt;&lt;br&gt;å› æ­¤æˆ‘ä»¬éœ€è¦åšä¸€äº›å…¼å®¹å¤„ç†ï¼Œé‚£ä¹ˆå¦‚ä½•åˆ¤æ–­æµè§ˆå™¨æ”¯æŒ webp å‘¢ï¼Ÿä¸‹é¢æœ‰å‡ ç§æ–¹æ³•å¯ä¾›å‚è€ƒã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­çš„Object.freezeä¸constä¹‹é—´çš„åŒºåˆ«(è¯‘)</title>
    <link href="http://www.shenzekun.cn/JavaScript%E4%B8%AD%E7%9A%84Object-freeze%E4%B8%8Econst%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB-%E8%AF%91.html"/>
    <id>http://www.shenzekun.cn/JavaScriptä¸­çš„Object-freezeä¸constä¹‹é—´çš„åŒºåˆ«-è¯‘.html</id>
    <published>2019-05-31T03:58:45.000Z</published>
    <updated>2019-05-31T04:03:49.982Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>åŸæ–‡ï¼š<a href="https://medium.com/@bolajiayodeji/the-differences-between-object-freeze-vs-const-in-javascript-4eacea534d7c" target="_blank" rel="external">The differences between Object.freeze() vs Const in JavaScript</a><br>ä½œè€…ï¼š<a href="https://medium.com/@bolajiayodeji" target="_blank" rel="external">Bolaji Ayodeji</a><br><strong>æœ¬æ–‡ç»æˆæƒç¿»è¯‘è½¬è½½ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ï¼</strong></p></blockquote><a id="more"></a><p><img src="http://upload-images.jianshu.io/upload_images/5308475-4434cacb12f965be.png&amp;originHeight=1260&amp;originWidth=1600&amp;size=425448&amp;status=done&amp;width=800?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>è‡ªES6å‘å¸ƒä»¥æ¥ï¼ŒES6ç»™JavaScriptå¸¦æ¥äº†ä¸€äº›æ–°ç‰¹æ€§å’Œæ–¹æ³•ã€‚å¯¹äºJavaScriptå¼€å‘è€…æ¥è¯´ï¼Œè¿™äº›ç‰¹æ€§èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¹å–„äº†æˆ‘ä»¬çš„å·¥ä½œæµç¨‹ä»¥åŠå·¥ä½œæ•ˆç‡ï¼Œå…¶ä¸­çš„ç‰¹æ€§å°±åŒ…æ‹¬ <code>Object.freeze()</code> æ–¹æ³•å’Œ <code>const</code> ã€‚</p><p>ä¸€äº›å¼€å‘äººå‘˜ç‰¹åˆ«æ˜¯æ–°æ‰‹ä»¬ä¼šè®¤ä¸ºè¿™ä¸¤ä¸ªåŠŸèƒ½çš„å·¥ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ã€‚ è®©æˆ‘æ¥å‘Šè¯‰ä½ <code>Object.freeze()</code> å’Œ <code>const</code> æ˜¯å¦‚ä½•ä¸åŒçš„ã€‚</p><h2 id="ç»¼è¿°"><a href="#ç»¼è¿°" class="headerlink" title="ç»¼è¿°"></a>ç»¼è¿°</h2><p><code>const</code> å’Œ <code>Object.freeze()</code> å®Œå…¨ä¸åŒã€‚</p><ul><li><code>const</code> çš„è¡Œä¸ºåƒ <code>let</code> ã€‚å®ƒä»¬å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œ <code>const</code> å®šä¹‰äº†ä¸€ä¸ªæ— æ³•é‡æ–°åˆ†é…çš„å˜é‡ã€‚ é€šè¿‡ <code>const</code> å£°æ˜çš„å˜é‡æ˜¯å…·æœ‰å—çº§ä½œç”¨åŸŸçš„ï¼Œè€Œä¸æ˜¯åƒ <code>var</code> å£°æ˜çš„å˜é‡å…·æœ‰å‡½æ•°ä½œç”¨åŸŸã€‚</li><li><code>Object.freeze()</code> æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç›¸åŒçš„ä¸å¯å˜çš„å¯¹è±¡ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½æ·»åŠ ï¼Œåˆ é™¤æˆ–æ›´æ”¹å¯¹è±¡çš„ä»»ä½•å±æ€§ã€‚</li></ul><blockquote><p>å¯å˜å¯¹è±¡çš„å±æ€§èƒ½å¤Ÿè¿›è¡Œæ›´æ”¹ï¼Œè€Œä¸å¯å˜å¯¹è±¡åœ¨åˆ›å»ºå¯¹è±¡åä¸èƒ½æ›´æ”¹å…¶å±æ€§ã€‚</p></blockquote><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> user = <span class="string">'Bolaji Ayodeji'</span></div><div class="line">user = <span class="string">'Joe Nash'</span></div></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¼šæŠ›å‡ºä¸€ä¸ª<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Not_a_function" target="_blank" rel="external">Uncaught TypeError</a>ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨å°è¯•é‡æ–°åˆ†é…ä½¿ç”¨constå…³é”®å­—å£°æ˜çš„å˜é‡userï¼Œè¿™æ ·åšæ˜¯æ— æ•ˆçš„ã€‚</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-0474708e10fea495.png&amp;originHeight=98&amp;originWidth=423&amp;size=8399&amp;status=done&amp;width=484?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨ let æˆ–è€… var å£°æ˜æ˜¯èƒ½å¤Ÿæ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯ä½¿ç”¨ const å¹¶ä¸èƒ½ã€‚</p><h3 id="const-çš„é—®é¢˜"><a href="#const-çš„é—®é¢˜" class="headerlink" title="const çš„é—®é¢˜"></a>const çš„é—®é¢˜</h3><p>ä½¿ç”¨constå£°æ˜çš„å¯¹è±¡ä»…èƒ½é˜»æ­¢å…¶é‡æ–°åˆ†é…ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä½¿å…¶å£°æ˜çš„å¯¹è±¡å…·æœ‰ä¸å¯å˜æ€§ï¼ˆèƒ½å¤Ÿé˜»æ­¢æ›´æ”¹å…¶å±æ€§ï¼‰ã€‚</p><p>å‚è€ƒä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨constå…³é”®å­—å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œå¹¶ä¸ºå…¶åˆ†é…äº†ä¸€ä¸ªåä¸ºuserçš„å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> user = &#123;</div><div class="line">  <span class="attr">first_name</span>: <span class="string">'bolaji'</span>,</div><div class="line">  <span class="attr">last_name</span>: <span class="string">'ayodeji'</span>,</div><div class="line">  <span class="attr">email</span>: <span class="string">'hi@bolajiayodeji.com'</span>,</div><div class="line">  <span class="attr">net_worth</span>: <span class="number">2000</span></div><div class="line">&#125;</div><div class="line">user.last_name = <span class="string">'Samson'</span>;</div><div class="line"><span class="comment">// this would work, user is still mutable!</span></div><div class="line">user.net_worth = <span class="number">983265975975950</span>;</div><div class="line"><span class="comment">// this would work too, user is still mutable and getting rich :)!</span></div><div class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// user is mutated</span></div></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/5308475-c318c29169064851.png&amp;originHeight=248&amp;originWidth=731&amp;size=26255&amp;status=done&amp;width=746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>å°½ç®¡æˆ‘ä»¬æ— æ³•é‡æ–°åˆ†é…è¿™ä¸ªåä¸º user çš„å˜é‡ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥æ”¹å˜å…¶å¯¹è±¡æœ¬èº«ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> user = &#123;</div><div class="line">  <span class="attr">user_name</span>: <span class="string">'bolajiayodeji'</span></div><div class="line">&#125;</div><div class="line"><span class="comment">// won't work</span></div></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/5308475-c629ecec9f26bf27.png&amp;originHeight=33&amp;originWidth=592&amp;size=4290&amp;status=done&amp;width=746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>æˆ‘ä»¬è‚¯å®šå¸Œæœ›å¯¹è±¡å…·æœ‰æ— æ³•ä¿®æ”¹æˆ–åˆ é™¤çš„å±æ€§ã€‚ <code>const</code> æ— æ³•å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯ <code>Object.freeze</code> å¯ä»¥ã€‚</p><h3 id="Object-freeze"><a href="#Object-freeze" class="headerlink" title="Object.freeze()"></a>Object.freeze()</h3><p>è¦ç¦ç”¨å¯¹è±¡çš„ä»»ä½•æ›´æ”¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Object.freeze()</code> ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> user = &#123;</div><div class="line">  <span class="attr">first_name</span>: <span class="string">'bolaji'</span>,</div><div class="line">  <span class="attr">last_name</span>: <span class="string">'ayodeji'</span>,</div><div class="line">  <span class="attr">email</span>: <span class="string">'hi@bolajiayodeji.com'</span>,</div><div class="line">  <span class="attr">net_worth</span>: <span class="number">2000</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">Object</span>.freeze(user);</div><div class="line">user.last_name = <span class="string">'Samson'</span>;</div><div class="line"><span class="comment">// this won't work, user is still immutable!</span></div><div class="line">user.net_worth = <span class="number">983265975975950</span>;</div><div class="line"><span class="comment">// this won't work too, user is still immutable and still broke :(!</span></div><div class="line"><span class="built_in">console</span>.log(user);  <span class="comment">// user is immutated</span></div></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/5308475-423da13f0ab10e02.png&amp;originHeight=289&amp;originWidth=661&amp;size=31952&amp;status=done&amp;width=746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h3 id="å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡å®é™…ä¸Šå¹¶æœªå†»ç»“"><a href="#å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡å®é™…ä¸Šå¹¶æœªå†»ç»“" class="headerlink" title="å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡å®é™…ä¸Šå¹¶æœªå†»ç»“"></a>å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡å®é™…ä¸Šå¹¶æœªå†»ç»“</h3><p><code>Object.freeze</code> åªæ˜¯åšäº†å±‚æµ…å†»ç»“ï¼Œå½“é‡åˆ°å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€’å½’<code>Object.freeze</code> æ¥å†»ç»“å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> user = &#123;</div><div class="line">  <span class="attr">first_name</span>: <span class="string">'bolaji'</span>,</div><div class="line">  <span class="attr">last_name</span>: <span class="string">'ayodeji'</span>,</div><div class="line">  <span class="attr">contact</span>: &#123;</div><div class="line">    <span class="attr">email</span>: <span class="string">'hi@bolajiayodeji.com'</span>,</div><div class="line">    <span class="attr">telephone</span>: <span class="number">08109445504</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.freeze(user);</div><div class="line">user.last_name = <span class="string">'Samson'</span>;</div><div class="line"><span class="comment">// this won't work, user is still immutable!</span></div><div class="line">user.contact.telephone = <span class="number">07054394926</span>;</div><div class="line"><span class="comment">// this will work because the nested object is not frozen</span></div><div class="line"><span class="built_in">console</span>.log(user);</div></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/5308475-e21415d0c1d9bd1d.png&amp;originHeight=428&amp;originWidth=643&amp;size=46108&amp;status=done&amp;width=746?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>å› æ­¤ï¼Œå½“å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡æ—¶ï¼Œ <code>Object.freeze()</code> å¹¶ä¸èƒ½å®Œå…¨å†»ç»“å¯¹è±¡ã€‚</p><p>è¦å®Œå…¨å†»ç»“å…·æœ‰åµŒå¥—å±æ€§çš„å¯¹è±¡ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„åº“æˆ–ä½¿ç”¨å·²æœ‰çš„åº“æ¥å†»ç»“å¯¹è±¡ï¼Œå¦‚<a href="https://github.com/substack/deep-freeze" target="_blank" rel="external">Deepfreeze</a> æˆ– <a href="https://github.com/immutable-js/immutable-js" target="_blank" rel="external">immutable-js</a></p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p><code>const</code> å’Œ <code>Object.freeze()</code> å¹¶ä¸åŒï¼Œ <code>const</code> æ˜¯é˜²æ­¢å˜é‡é‡æ–°åˆ†é…ï¼Œè€Œ <code>Object.freeze()</code> æ˜¯ä½¿å¯¹è±¡å…·æœ‰ä¸å¯å˜æ€§ã€‚</p><p>æ„Ÿè°¢é˜…è¯»ï¼Œå¹²æ¯ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;åŸæ–‡ï¼š&lt;a href=&quot;https://medium.com/@bolajiayodeji/the-differences-between-object-freeze-vs-const-in-javascript-4eacea534d7c&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The differences between Object.freeze() vs Const in JavaScript&lt;/a&gt;&lt;br&gt;ä½œè€…ï¼š&lt;a href=&quot;https://medium.com/@bolajiayodeji&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Bolaji Ayodeji&lt;/a&gt;&lt;br&gt;&lt;strong&gt;æœ¬æ–‡ç»æˆæƒç¿»è¯‘è½¬è½½ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ï¼&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>Git æ›´æ–° commit çš„å†…å®¹å’Œå¤šä¸ª commit åˆå¹¶</title>
    <link href="http://www.shenzekun.cn/Git-%E6%9B%B4%E6%96%B0-commit-%E7%9A%84%E5%86%85%E5%AE%B9%E5%92%8C%E5%A4%9A%E4%B8%AA-commit-%E5%90%88%E5%B9%B6.html"/>
    <id>http://www.shenzekun.cn/Git-æ›´æ–°-commit-çš„å†…å®¹å’Œå¤šä¸ª-commit-åˆå¹¶.html</id>
    <published>2019-03-03T14:44:05.000Z</published>
    <updated>2019-03-03T14:45:30.572Z</updated>
    
    <content type="html"><![CDATA[<hr><a id="more"></a><h3 id="åœºæ™¯1"><a href="#åœºæ™¯1" class="headerlink" title="åœºæ™¯1"></a>åœºæ™¯1</h3><blockquote><p>æœ‰æ—¶å€™æˆ‘ä»¬å‘ç° commit å†™çš„ä¸å¥½ï¼Œæƒ³è¦æ›´æ”¹å½“å‰åˆ†æ”¯æœ€è¿‘ä¸€æ¬¡çš„ commit çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit --amend</div></pre></td></tr></table></figure><h3 id="åœºæ™¯äºŒ"><a href="#åœºæ™¯äºŒ" class="headerlink" title="åœºæ™¯äºŒ"></a>åœºæ™¯äºŒ</h3><blockquote><p>æ—¢ç„¶å¯ä»¥æ›´æ”¹æœ€è¿‘ä¸€æ¬¡çš„ commitï¼Œé‚£å¯èƒ½æœ‰äº›äººå°±æƒ³è¦åœ¨<strong>å½“å‰åˆ†æ”¯ä¸‹å‰å‡ æ¬¡çš„ commit å†…å®¹è¿›è¡Œæ›´æ”¹æˆ–è€…è¿›è¡Œ commit åˆå¹¶</strong>ï¼Œé‚£æˆ‘ä»¬éœ€è¦æ€ä¹ˆåšå‘¢ï¼Ÿæ–¹æ³•å¦‚ä¸‹ï¼šï¼ˆ<strong>æ³¨æ„</strong>æ­¤æ“ä½œæœ€å¥½æ˜¯åœ¨è‡ªå·±ç»´æŠ¤çš„åˆ†æ”¯ä¸Šå¼„ï¼Œå¤šäººå¼€å‘çš„åˆ†æ”¯å°±ä¸å¤ªé€‚åˆï¼‰</p></blockquote><p>ä½¿ç”¨<code>git rebase -i xxxx</code>,è¿™é‡Œçš„ i æŒ‡çš„æ˜¯äº¤äº’çš„æ„æ€</p><p>ç°åœ¨é¡¹ç›® commit å¦‚ä¸‹<br><img src="https://upload-images.jianshu.io/upload_images/5308475-2a88748046a183eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""><br>æˆ‘ç°åœ¨æƒ³è¦æ›´æ”¹ç¬¬äºŒä¸ª commit çš„å†…å®¹ï¼Œé‚£æˆ‘éœ€è¦çŸ¥é“å½“å‰è¦ä¿®æ”¹çš„ commit çš„<strong>çˆ¶äº²</strong>çš„ idï¼Œä¹Ÿå°±æ˜¯ init game çš„ commit id 1801cf5ï¼Œç„¶å<code>git rebase -i 1801cf5</code>ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-d21bf86786de47b6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>å½“å‰æ˜¯ pickï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ reword æ¥æ›´æ”¹ç¬¬äºŒä¸ª commit çš„å†…å®¹</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-957a03f8285a0c8a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿å­˜é€€å‡ºï¼Œå‡ºç°</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-e08e80d0a24f15e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿®æ”¹ commit å†…å®¹ï¼Œç„¶åé€€å‡ºï¼Œå‡ºç°</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-62da87efd40fc986.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p><code>git log â€”oneline</code> æŸ¥çœ‹</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-eb4b1a44e2e56f61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>æˆåŠŸæ·»åŠ .å·</p><h3 id="åœºæ™¯3"><a href="#åœºæ™¯3" class="headerlink" title="åœºæ™¯3"></a>åœºæ™¯3</h3><blockquote><p>ç°åœ¨æˆ‘ä»¬æƒ³è¦æŠŠç¬¬äºŒä¸ª commit å’Œç¬¬ä¸€ä¸ª commit è¿™<strong>ä¸¤ä¸ªè¿ç»­</strong>çš„ commit è¿›è¡Œåˆå¹¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š</p></blockquote><p>åŒæ ·ä½¿ç”¨<code>git rebase -i 1801cf5</code>,å°†ç¬¬äºŒä¸ª pick æ”¹ä¸º s(squash)ï¼Œè¿™æ ·å¯ä»¥åˆå¹¶åˆ°ä¸Šä¸€ä¸ªcommit</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-5be96305b81e74a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿å­˜é€€å‡º</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-58012f5cadf932b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿®æ”¹æˆ</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-da04f00fa3b300aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿å­˜é€€å‡º</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-b21e56bcdec9e4b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p><code>git log â€”oneline</code> æŸ¥çœ‹</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-eea8faf0138d8a68.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>æˆåŠŸåˆå¹¶ã€‚</p><h3 id="åœºæ™¯4"><a href="#åœºæ™¯4" class="headerlink" title="åœºæ™¯4"></a>åœºæ™¯4</h3><blockquote><p>ç°åœ¨æœ‰äººåˆæœ‰ä¸ªç–‘æƒ‘ï¼Œå¦‚æœæˆ‘æ˜¯ç›¸éš”çš„ commitï¼Œä½†æ˜¯æˆ‘æƒ³å°†<strong>ç›¸éš”çš„ commit çš„å†…å®¹</strong>è¿›è¡Œåˆå¹¶ï¼Œé‚£åˆéœ€æ€ä¹ˆåšå‘¢ï¼Ÿ</p></blockquote><p>è¿˜æ˜¯ä»¥ä¸‹é¢è¿™ä¸ªä¸ºä¾‹å­<br><img src="https://upload-images.jianshu.io/upload_images/5308475-7ced295741ece98b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ç°åœ¨æˆ‘ä»¬æƒ³å°†ç¬¬ä¸€ä¸ª commit çš„å†…å®¹å’Œç¬¬ä¸‰ä¸ªå†…å®¹è¿›è¡Œåˆå¹¶ï¼Œè¿™é‡Œä½ å¯èƒ½ä½ æ¯”è¾ƒç–‘æƒ‘ï¼Œç¬¬ä¸‰ä¸ª commit çš„ä¸Šä¸€ä¸ª commit æ˜¯æ²¡æœ‰çš„ï¼Œé‚£æ€ä¹ˆç”¨ rebase å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦è®°ä¸‹ç¬¬ä¸‰ä¸ª commit çš„ idï¼Œè¾“å…¥<code>git rebase -i 1801cf5</code></p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-eb25a9ef5ddeef43.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ç›®å‰åªæœ‰ä¸¤ä¸ªï¼Œæ²¡æœ‰ init game çš„ commit idï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ª commit id æ·»åŠ ä¸Šå»ï¼ˆæˆ‘ä»¬å¯ä»¥ä¸ç”¨å†™commit çš„å†…å®¹ï¼‰ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-8806b9794ce3921a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>å°†ç›¸å…³è¦åˆå¹¶çš„ commit å†™åœ¨ä¸€èµ·ï¼š</p><p><img src="https://upload-images.jianshu.io/upload_images/5308475-0b5402b9e6de430b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ä¿å­˜é€€å‡ºã€‚æŒ‰ç…§ä¹‹å‰çš„æ­¥éª¤å³å¯ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
    
    </summary>
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="git" scheme="http://www.shenzekun.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨ VSCode è°ƒè¯• Koa æˆ–è€… Express é¡¹ç›®</title>
    <link href="http://www.shenzekun.cn/%E4%BD%BF%E7%94%A8-VSCode-%E8%B0%83%E8%AF%95-Koa-%E6%88%96%E8%80%85-Express.html"/>
    <id>http://www.shenzekun.cn/ä½¿ç”¨-VSCode-è°ƒè¯•-Koa-æˆ–è€…-Express.html</id>
    <published>2018-12-31T12:22:59.000Z</published>
    <updated>2019-05-08T09:42:31.889Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><blockquote><p>å¹³å¸¸è°ƒè¯• node æ‰“ log æ‰“ä¹ æƒ¯äº†ï¼Œçªç„¶å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ‰“å°å¯¹è±¡çš„æ—¶å€™ï¼Œå°¤å…¶è¿™ä¸ªå¯¹è±¡é‡Œé¢æœ‰å¾ˆå¤šå±æ€§çš„æ—¶å€™ï¼Œåœ¨ç»ˆç«¯ä¸Šå¾—ä¸€ç›´å¾€ä¸Šæ‹‰æ‰èƒ½çœ‹åˆ°ï¼Œå› æ­¤æ‰“ç®—ä½¿ç”¨ vscode æ¥æ‰“æ–­ç‚¹è°ƒè¯•ç¨‹åºã€‚</p></blockquote><a id="more"></a><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><blockquote><p>è¿™é‡Œçš„ä¾‹å­æ˜¯ä½¿ç”¨ koa ï¼Œexpress ç±»ä¼¼ã€‚æˆ‘æ˜¯ä½¿ç”¨é˜¿é‡Œå·´å·´çš„<a href="https://alibaba.github.io/ice/" target="_blank" rel="external">é£å†°</a>å¿«é€Ÿæ­å»ºä¸€ä¸ªåå°å’Œå‰å°çš„é¡¹ç›®ã€‚</p></blockquote><ol><li>ä¸‹è½½é£å†°</li><li>æ‰“å¼€é£å†°ï¼Œä½¿ç”¨ICE Design Proæ¨¡æ¿å¹¶ç‚¹å‡» æ·»åŠ koa2ï¼Œå¦‚ä¸‹<br><img src="http://upload-images.jianshu.io/upload_images/5308475-a67136d084037f23.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></li><li>è‡ªåŠ¨å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ vscode æ‰“å¼€é¡¹ç›®ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-7e3ddc3492ebe230.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></li><li>æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œ<code>npm run client</code> è¿™ä¸ªæ—¶å€™å‰ç«¯é¡¹ç›®å°±è¿è¡Œèµ·æ¥äº†ã€‚</li><li>ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å‰ç«¯çš„ä»£ç ï¼Œå› ä¸ºè¿™ä¸ªæ¨¡æ¿é»˜è®¤æ˜¯ä½¿ç”¨å‰ç«¯ç›´æ¥è¿”å›æ•°æ®ï¼Œè€Œä¸å»è¯·æ±‚æ¥å£ï¼Œæ‰“å¼€<code>client/pages/UserLogin/actions.js</code>,å°† <code>import {login} from &#39;../../api/user&#39;;</code>æ”¹ä¸º <code>import {login} from &#39;../../api/index&#39;;</code>å°±å¯ä»¥äº†ã€‚æœ€åæ‰“å¼€é¡µé¢ï¼Œåœ°å€ç»ˆç«¯é‡Œé¢æœ‰è¯´æ˜ã€‚</li></ol><h3 id="ç¼–å†™launch-json"><a href="#ç¼–å†™launch-json" class="headerlink" title="ç¼–å†™launch.json"></a>ç¼–å†™launch.json</h3><blockquote><p>VsCodeå·¦ä¾§ç¬¬å››ä¸ªæŒ‰é’®æ˜¯è°ƒè¯•æŒ‰é’®ï¼Œé»˜è®¤æ˜¯ã€æ²¡æœ‰é…ç½®ã€ã€‚ç‚¹å‡»å³ä¾§çš„é½¿è½®çŠ¶å›¾æ ‡ï¼Œé€‰æ‹©Node.js ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º .vscode çš„æ–‡ä»¶å¤¹åŠ launch.json æ–‡ä»¶ã€‚launch.json å†…å®¹å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚ </div><div class="line">    // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</div><div class="line">    // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</div><div class="line">    "version": "0.2.0",</div><div class="line">    "configurations": [</div><div class="line">        &#123;</div><div class="line">            "type": "node",</div><div class="line">            "request": "launch",</div><div class="line">            "name": "å¯åŠ¨ç¨‹åº",</div><div class="line">            "program": "$&#123;workspaceFolder&#125;/server/index.js"</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é»˜è®¤ä¼šè®¿é—®serverä¸‹çš„ index.js æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶æ˜¯ app.jsï¼Œå› æ­¤éœ€è¦å°†<code>index.js</code>æ”¹ä¸º<code>app.js</code>ã€‚</p><p><strong>åœ¨launch.jsonä¸­ä¼šä½¿ç”¨åˆ°ä¸€äº›é¢„å®šå˜é‡ï¼Œè¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼š</strong></p><ul><li><code>${workspaceRoot}</code>ï¼šVSCodeä¸­æ‰“å¼€æ–‡ä»¶å¤¹çš„è·¯å¾„</li><li><code>${workspaceRootFolderName}</code>ï¼šVSCodeä¸­æ‰“å¼€æ–‡ä»¶å¤¹çš„è·¯å¾„, ä½†ä¸åŒ…å«â€/â€œ</li><li><code>${file}</code>ï¼šå½“å‰æ‰“å¼€çš„æ–‡ä»¶</li><li><code>${fileBasename}</code>ï¼š å½“å‰æ‰“å¼€æ–‡ä»¶çš„æ–‡ä»¶å, ä¸å«æ‰©å±•å</li><li><code>${fileDirname}</code>ï¼š å½“å‰æ‰“å¼€æ–‡ä»¶çš„ç›®å½•å</li><li><code>${fileExtname}</code> å½“å‰æ‰“å¼€æ–‡ä»¶çš„æ‰©å±•å</li><li><code>${cwd}</code>ï¼šå½“å‰æ‰§è¡Œç›®å½•</li></ul><p>å½“æˆ‘ä»¬åœ¨å•æ­¥è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œä¼šè¿›å…¥node_modulesé‡Œé¢ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦å»å…³å¿ƒé‡Œé¢çš„é€»è¾‘å®ç°ï¼Œåªå…³å¿ƒé¡¹ç›®æœ¬èº«çš„ä»£ç ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨skipFilesï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚</div><div class="line">  // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</div><div class="line">  // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</div><div class="line">  "version": "0.2.0",</div><div class="line">  "configurations": [&#123;</div><div class="line">    "type": "node",</div><div class="line">    "request": "launch",</div><div class="line">    "name": "å¯åŠ¨ç¨‹åº",</div><div class="line">    "program": "$&#123;workspaceFolder&#125;/server/app.js",</div><div class="line">    "skipFiles": [</div><div class="line">      "$&#123;workspaceRoot&#125;/node_modules/**/*.js",</div><div class="line">      "&lt;node_internals&gt;/**/*.js"</div><div class="line">    ]</div><div class="line">  &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜æƒ³è¦è‡ªåŠ¨é‡å¯çš„åŠŸèƒ½ï¼Œå®‰è£… <code>nodemon</code> æˆ–è€… <code>node-dev</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">// ä»»é€‰å…¶ä¸€</div><div class="line">npm i nodemon -g</div><div class="line">npm i node-dev -g</div></pre></td></tr></table></figure><p>ä¿®æ”¹lanuch.jsonï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚</div><div class="line">  // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚</div><div class="line">  // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387</div><div class="line">  "version": "0.2.0",</div><div class="line">  "configurations": [&#123;</div><div class="line">    "type": "node",</div><div class="line">    "request": "launch",</div><div class="line">    "name": "å¯åŠ¨ç¨‹åº",</div><div class="line">    "program": "$&#123;workspaceFolder&#125;/server/app.js",</div><div class="line">    "runtimeExecutable": "nodemon", // æˆ–è€… node-dev</div><div class="line">    "restart": true,</div><div class="line">    "console": "integratedTerminal",</div><div class="line">    "skipFiles": [</div><div class="line">      "$&#123;workspaceRoot&#125;/node_modules/**/*.js",</div><div class="line">      "&lt;node_internals&gt;/**/*.js"</div><div class="line">    ]</div><div class="line">  &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™é‡Œæ–°å¢äº†ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>runtimeExecutableï¼šç”¨ä»€ä¹ˆå‘½ä»¤æ‰§è¡Œ app.jsï¼Œè¿™é‡Œè®¾ç½®ä¸º nodemonï¼Œé»˜è®¤æ˜¯ node</li><li>restartï¼šåœ¨ç»ˆæ­¢ Node.js åé‡å¯ä¼šè¯</li><li>consoleï¼šå¯åŠ¨è°ƒè¯•ç›®æ ‡çš„ä½ç½®ï¼Œè¿™é‡Œé€‰æ‹©åœ¨ vscode çš„é›†æˆç»ˆç«¯è¾“å‡ºä¿¡æ¯</li></ul><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>è¿™é‡Œåœ¨ <code>server/controller/user.js</code> çš„ login æ‰“äº†ä¸ªæ–­ç‚¹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-95e9b238f28d55cd.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image">å¯åŠ¨è°ƒè¯•ï¼Œå¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-f0ce310223b32c2f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>vscode é›†æˆç»ˆç«¯æ‰“å°å¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-d6512d9a5ec0de37.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>åœ¨å‰ç«¯é¡µé¢ç‚¹å‡»ç™»å½•ï¼Œä¼šè·³åˆ°è¿™é‡Œï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-2af99b27635d0d62.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"><br>æˆ‘ä»¬å°±èƒ½çœ‹åˆ°å˜é‡çš„ä¿¡æ¯å•¦ğŸ˜„ï¼ˆ<strong>æ³¨æ„</strong>ï¼šå¦‚æœæ­¤æ—¶ç»ˆæ­¢äº†è°ƒè¯•ï¼Œnodemon è¿˜æ˜¯ä¼šè¿è¡Œï¼Œå¾—åœ¨é›†æˆç»ˆç«¯ç»ˆæ­¢ï¼‰</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;blockquote&gt;&lt;p&gt;å¹³å¸¸è°ƒè¯• node æ‰“ log æ‰“ä¹ æƒ¯äº†ï¼Œçªç„¶å‘ç°ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ‰“å°å¯¹è±¡çš„æ—¶å€™ï¼Œå°¤å…¶è¿™ä¸ªå¯¹è±¡é‡Œé¢æœ‰å¾ˆå¤šå±æ€§çš„æ—¶å€™ï¼Œåœ¨ç»ˆç«¯ä¸Šå¾—ä¸€ç›´å¾€ä¸Šæ‹‰æ‰èƒ½çœ‹åˆ°ï¼Œå› æ­¤æ‰“ç®—ä½¿ç”¨ vscode æ¥æ‰“æ–­ç‚¹è°ƒè¯•ç¨‹åºã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="node" scheme="http://www.shenzekun.cn/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>nodejs è·¯å¾„è§£æé¡ºåº</title>
    <link href="http://www.shenzekun.cn/nodejs-%E8%B7%AF%E5%BE%84%E8%A7%A3%E6%9E%90%E9%A1%BA%E5%BA%8F.html"/>
    <id>http://www.shenzekun.cn/nodejs-è·¯å¾„è§£æé¡ºåº.html</id>
    <published>2018-06-04T11:48:58.000Z</published>
    <updated>2018-10-21T12:51:44.839Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>å¹³æ—¶åœ¨ä½¿ç”¨ nodejs å» require çš„æ—¶å€™æ˜¯ä¸æ˜¯æœ‰ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å»å¼•ç”¨ï¼Œé‚£ä¹ˆ nodejs è§£æè·¯å¾„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä¼šè®²ä¸€ä¸‹ nodejs è·¯å¾„è§£æé¡ºåº</p></blockquote><a id="more"></a><h2 id="ç›¸å¯¹è·¯å¾„è§£æé¡ºåº"><a href="#ç›¸å¯¹è·¯å¾„è§£æé¡ºåº" class="headerlink" title="ç›¸å¯¹è·¯å¾„è§£æé¡ºåº"></a>ç›¸å¯¹è·¯å¾„è§£æé¡ºåº</h2><p>å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º <code>/root/src/moduleA.js</code>ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¼å…¥<code>var x = require(&quot;./moduleB&quot;);</code>, ä¹Ÿå°±æ˜¯å¯¼å…¥äº†ä¸€ä¸ªç›¸å¯¹è·¯å¾„çš„ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆNode.jsä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥ï¼š</p><ul><li>åˆ°<code>/root/src/moduleB.js</code>è¿™ä¸ªè·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</li><li>æ£€æŸ¥<code>/root/src/moduleB</code> ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼Œä¸”<code>package.json</code>æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ªâ€mainâ€æ¨¡å—,æ¯”å¦‚ ï¼ŒNode.jså‘ç°æ–‡ä»¶ <code>/root/src/moduleB/package.json</code> åŒ…å«äº† <code>{ &quot;main&quot;: &quot;lib/mainModule.js&quot; }</code>,é‚£ä¹ˆ nodejs å°±ä¼šå» <code>/root/src/moduleB/lib/mainModule.js</code></li><li>å¦‚æœæ²¡æœ‰ main å­—æ®µ,nodejsä¼šæ£€æŸ¥<code>/root/src/moduleB</code>ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª <code>index.js</code> æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«éšå¼åœ°å½“ä½œé‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„â€mainâ€æ¨¡å—ã€‚</li></ul><h2 id="ç»å¯¹è·¯å¾„è§£æé¡ºåº"><a href="#ç»å¯¹è·¯å¾„è§£æé¡ºåº" class="headerlink" title="ç»å¯¹è·¯å¾„è§£æé¡ºåº"></a>ç»å¯¹è·¯å¾„è§£æé¡ºåº</h2><p>å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º<code>/root/src/moduleA.js</code>ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªå¯¼å…¥<code>var x = require(&quot;moduleB&quot;);</code>ï¼Œä¹Ÿå°±æ˜¯ç»å¯¹è·¯å¾„çš„ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆNode.jsä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥ï¼š</p><ul><li><code>/root/src/node_modules/moduleB.js</code></li><li><code>/root/src/node_modules/moduleB/package.json</code>ï¼ˆé‡Œé¢æŒ‡å®šäº† main å­—æ®µï¼Œè·Ÿä¸Šé¢ç›¸å¯¹è·¯å¾„æ˜¯ä¸€æ ·çš„ï¼‰</li><li><code>/root/src/node_modules/moduleB/index.js</code><br>å¦‚æœä¸Šé¢ä¸‰ä¸ªæ²¡æœ‰æ‰¾åˆ°ï¼Œå¾€<strong>ä¸Šä¸€çº§</strong>ç›®å½•æ‰¾ï¼š</li><li><code>/root/node_modules/moduleB.js</code></li><li><code>/root/node_modules/moduleB/package.json</code></li><li><code>/root/node_modules/moduleB/index.js</code><br>å¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œç»§ç»­å¾€<strong>ä¸Šä¸€çº§</strong>æ‰¾ï¼š</li><li><code>/node_modules/moduleB.js</code></li><li><code>/node_modules/moduleB/package.json</code></li><li><code>/node_modules/moduleB/index.js</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;å¹³æ—¶åœ¨ä½¿ç”¨ nodejs å» require çš„æ—¶å€™æ˜¯ä¸æ˜¯æœ‰ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„å»å¼•ç”¨ï¼Œé‚£ä¹ˆ nodejs è§£æè·¯å¾„é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä¼šè®²ä¸€ä¸‹ nodejs è·¯å¾„è§£æé¡ºåº&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="node" scheme="http://www.shenzekun.cn/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>å››ç§æ–¹æ³•å®ç°æ•°æ®åŒå‘ç»‘å®š</title>
    <link href="http://www.shenzekun.cn/%E5%9B%9B%E7%A7%8D%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A.html"/>
    <id>http://www.shenzekun.cn/å››ç§æ–¹æ³•å®ç°æ•°æ®åŒå‘ç»‘å®š.html</id>
    <published>2018-05-10T03:29:08.000Z</published>
    <updated>2018-10-21T12:51:44.835Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>åœ¨ä¸€äº›å‰ç«¯æ¡†æ¶ä¸­ï¼Œä¾‹å¦‚ <code>angular</code>ï¼Œ<code>vue</code>éƒ½æœ‰æ•°æ®åŒå‘æ•°æ®ç»‘å®šçš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æå¤§çš„æ–¹ä¾¿æˆ‘ä»¬æ“ä½œæ•°æ®ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä¼šè®²è§£ä¸€ä¸‹åŒå‘æ•°æ®ç»‘å®šçš„4ç§å®ç°æ–¹å¼ã€‚</p></blockquote><a id="more"></a><h2 id="æ–¹å¼"><a href="#æ–¹å¼" class="headerlink" title="æ–¹å¼"></a>æ–¹å¼</h2><h3 id="1-æ‰‹åŠ¨è§¦å‘ç»‘å®š"><a href="#1-æ‰‹åŠ¨è§¦å‘ç»‘å®š" class="headerlink" title="1.æ‰‹åŠ¨è§¦å‘ç»‘å®š"></a>1.æ‰‹åŠ¨è§¦å‘ç»‘å®š</h3><p>æ‰‹åŠ¨è§¦å‘ç»‘å®šçš„ä¸»è¦æ€è·¯æ˜¯é€šè¿‡åœ¨æ•°æ®å¯¹è±¡å®šä¹‰ get å’Œ set æ–¹æ³•(å¯ä»¥ä½¿ç”¨å…¶ä»–çš„å‘½åæ–¹æ³•)ï¼Œè°ƒç”¨æ—¶æ‰‹åŠ¨å»è§¦å‘ get å’Œ set æ–¹æ³•å»è·å–æ•°æ®ï¼Œä¿®æ”¹æ•°æ®ï¼Œæ”¹å˜æ•°æ®åä¼šä¸»åŠ¨å»è§¦å‘ get å’Œ set å‡½æ•°ä¸­è§†å›¾å±‚çš„é‡æ–°æ¸²æŸ“ã€‚</p><p>ç®€å•çš„æ‰‹åŠ¨è§¦å‘ç»‘å®šä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‰‹åŠ¨åŒå‘ç»‘å®š<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"input"</span> <span class="attr">s-value</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"el"</span> <span class="attr">s-text</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">let</span> elems = [<span class="built_in">document</span>.getElementById(<span class="string">'el'</span>), <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>)];</div><div class="line">        <span class="keyword">let</span> data = &#123;</div><div class="line">            <span class="attr">value</span>: <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> directive = &#123;</div><div class="line">            <span class="attr">text</span>: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.innerHTML = text</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">value</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.setAttribute(<span class="string">'value'</span>, value)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// ç›‘å¬ input çš„ keyup äº‹ä»¶</span></div><div class="line">        elems[<span class="number">1</span>].addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            set(<span class="string">'value'</span>, e.target.value)</div><div class="line">        &#125;)</div><div class="line">        </div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">scan</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> elems) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">of</span> elem.attributes) &#123;</div><div class="line">                    <span class="keyword">if</span> (attr.nodeName.indexOf(<span class="string">'s-'</span>) !== <span class="number">-1</span>) &#123;</div><div class="line">                        <span class="comment">// è°ƒç”¨å±æ€§æŒ‡ä»¤</span></div><div class="line">                        directive[attr.nodeName.slice(<span class="number">2</span>)].call(elem, data[attr.nodeValue])</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params">key, value</span>) </span>&#123;</div><div class="line">            data[key] = value;</div><div class="line">            scan();</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="2-æ•°æ®åŠ«æŒ"><a href="#2-æ•°æ®åŠ«æŒ" class="headerlink" title="2.æ•°æ®åŠ«æŒ"></a>2.æ•°æ®åŠ«æŒ</h3><p>æ•°æ®åŠ«æŒçš„åŸºæœ¬æ€è·¯æ˜¯ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">Object.defineProperty</a> å¯¹ ViewModel æ•°æ®å¯¹è±¡è¿›è¡Œ get å’Œ set çš„ç›‘å¬ï¼Œå½“æœ‰æ•°æ®å˜åŠ¨çš„æ—¶å€™æ‰«æå…ƒç´ èŠ‚ç‚¹ï¼Œç„¶åå»è¿è¡Œå¯¹åº”èŠ‚ç‚¹ä¸Šçš„æŒ‡ä»¤ï¼ˆdirectiveï¼‰ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ•°æ®åŠ«æŒ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"input"</span> <span class="attr">s-value</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"el"</span> <span class="attr">s-text</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">let</span> elems = [<span class="built_in">document</span>.getElementById(<span class="string">'el'</span>), <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>)];</div><div class="line">        <span class="keyword">let</span> data = &#123;</div><div class="line">            <span class="attr">value</span>: <span class="string">''</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> directive = &#123;</div><div class="line">            <span class="attr">text</span>: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.innerHTML = text</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">value</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.setAttribute(<span class="string">'value'</span>, value)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> value;</div><div class="line">        defineGetAndSet(data, <span class="string">'value'</span>)</div><div class="line">        <span class="comment">// ç›‘å¬ input çš„ keyup äº‹ä»¶</span></div><div class="line">        elems[<span class="number">1</span>].addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            data.value = e.target.value;</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">scan</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> elems) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">of</span> elem.attributes) &#123;</div><div class="line">                    <span class="keyword">if</span> (attr.nodeName.indexOf(<span class="string">'s-'</span>) !== <span class="number">-1</span>) &#123;</div><div class="line">                        <span class="comment">// è°ƒç”¨å±æ€§æŒ‡ä»¤</span></div><div class="line">                        directive[attr.nodeName.slice(<span class="number">2</span>)].call(elem, data[attr.nodeValue])</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">defineGetAndSet</span>(<span class="params">obj, attrName</span>) </span>&#123;</div><div class="line">            <span class="built_in">Object</span>.defineProperty(obj, attrName, &#123;</div><div class="line">                <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> value</div><div class="line">                &#125;,</div><div class="line">                <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newValue</span>) </span>&#123;</div><div class="line">                    value = newValue;</div><div class="line">                    scan()</div><div class="line">                &#125;,</div><div class="line">                <span class="attr">configurable</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">enumerable</span>: <span class="literal">true</span></div><div class="line">            &#125;)</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="3-ä½¿ç”¨-es6çš„-Proxy"><a href="#3-ä½¿ç”¨-es6çš„-Proxy" class="headerlink" title="3.ä½¿ç”¨ es6çš„ Proxy"></a>3.ä½¿ç”¨ es6çš„ Proxy</h3><p>åˆ©ç”¨<a href="http://es6.ruanyifeng.com/#docs/proxy" target="_blank" rel="external">Proxy</a> ï¼Œå®ƒå¯ä»¥ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤å¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ï¼Œå®ç°æ•°æ®åŒå‘æ•°æ®ç»‘å®šå’Œä¸Šä¸€ä¸ªç±»ä¼¼ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä½¿ç”¨ proxy è¿›è¡Œæ•°æ®åŒå‘ç»‘å®š<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"input"</span> <span class="attr">s-value</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"el"</span> <span class="attr">s-text</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">let</span> elems = [<span class="built_in">document</span>.getElementById(<span class="string">'el'</span>), <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>)];</div><div class="line">        <span class="keyword">let</span> directive = &#123;</div><div class="line">            <span class="attr">text</span>: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.innerHTML = text</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">value</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.setAttribute(<span class="string">'value'</span>, value)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// ------------- çœ‹ä¸‹é¢ -------------</span></div><div class="line">        <span class="keyword">let</span> data = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</div><div class="line">            <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> (<span class="params">target, key, receiver</span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> target.value</div><div class="line">            &#125;,</div><div class="line">            set(target, key, value, receiver) &#123;</div><div class="line">                target.value = value;</div><div class="line">                scan();</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        <span class="comment">// ------------- çœ‹ä¸Šé¢ -------------</span></div><div class="line"></div><div class="line">        <span class="comment">// ç›‘å¬ input çš„ keyup äº‹ä»¶</span></div><div class="line">        elems[<span class="number">1</span>].addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            data.value = e.target.value;</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">scan</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> elems) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">of</span> elem.attributes) &#123;</div><div class="line">                    <span class="keyword">if</span> (attr.nodeName.indexOf(<span class="string">'s-'</span>) !== <span class="number">-1</span>) &#123;</div><div class="line">                        <span class="comment">// è°ƒç”¨å±æ€§æŒ‡ä»¤</span></div><div class="line">                        directive[attr.nodeName.slice(<span class="number">2</span>)].call(elem, data[attr.nodeValue])</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="4-è„æ£€æŸ¥"><a href="#4-è„æ£€æŸ¥" class="headerlink" title="4. è„æ£€æŸ¥"></a>4. è„æ£€æŸ¥</h3><p>è„æ£€æŸ¥çš„åŸºæœ¬åŸç†æ˜¯åœ¨ ViewModel å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰¾åˆ°ä¸è¿™ä¸ªå±æ€§å€¼ç›¸å…³çš„æ‰€æœ‰å…ƒç´ ï¼Œç„¶åå»æ¯”è¾ƒæ•°æ®å˜åŒ–ï¼Œå¦‚æœå˜åŒ–å°±ç”¨ directive æŒ‡ä»¤è°ƒç”¨ï¼Œå¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚</p><p>ç®€å•çš„è„æ£€æŸ¥ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è„æ£€æŸ¥<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"input"</span> <span class="attr">s-bind</span>=<span class="string">"value"</span> <span class="attr">s-event</span>=<span class="string">"value"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"el"</span> <span class="attr">s-event</span>=<span class="string">"text"</span> <span class="attr">s-bind</span>=<span class="string">"value"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        <span class="keyword">let</span> elems = [<span class="built_in">document</span>.getElementById(<span class="string">'el'</span>), <span class="built_in">document</span>.getElementById(<span class="string">'input'</span>)];</div><div class="line">        <span class="keyword">let</span> directives = &#123;</div><div class="line">            <span class="attr">text</span>: <span class="function"><span class="keyword">function</span> (<span class="params">text</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.innerHTML = text</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">value</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.setAttribute(<span class="string">'value'</span>, value)</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">let</span> data = &#123;</div><div class="line">            <span class="attr">value</span>: <span class="string">''</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// æ‰«æå…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´ çš„ directive æ•°ç»„ä¸ºç©º</span></div><div class="line">        scan(elems)</div><div class="line"></div><div class="line">        <span class="comment">// ç›‘å¬ input çš„ keyup äº‹ä»¶</span></div><div class="line">        elems[<span class="number">1</span>].addEventListener(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            data.value = e.target.value;</div><div class="line">            startDirtyCheck(e.target.getAttribute(<span class="string">'s-bind'</span>))</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">scan</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> elems) &#123;</div><div class="line">                elem.directive = []</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// å¼€å¯è„æ£€æŸ¥</span></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">startDirtyCheck</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">            <span class="keyword">let</span> list = <span class="built_in">document</span>.querySelectorAll(<span class="string">'[s-bind='</span> + value + <span class="string">']'</span>)</div><div class="line">            dirtyCheck(list)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">dirtyCheck</span>(<span class="params">elems</span>) </span>&#123;</div><div class="line">            <span class="comment">// æ‰«æå¸¦æŒ‡ä»¤çš„èŠ‚ç‚¹å±æ€§</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, len = elems.length; i &lt; len; i++) &#123;</div><div class="line">                <span class="keyword">let</span> elem = elems[i];</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>, len1 = elem.attributes.length; j &lt; len1; j++) &#123;</div><div class="line">                    <span class="keyword">let</span> attr = elem.attributes[j];</div><div class="line">                    <span class="keyword">if</span> (attr.nodeName.indexOf(<span class="string">'s-event'</span>) !== <span class="number">-1</span>) &#123;</div><div class="line">                        <span class="keyword">let</span> dataKey = elem.getAttribute(<span class="string">'s-bind'</span>)</div><div class="line">                        <span class="comment">// è¿›è¡Œè„æ•°æ®æ£€æŸ¥ï¼Œå¦‚æœæ•°æ®æ”¹å˜ï¼Œé‡æ–°æ‰§è¡ŒæŒ‡ä»¤</span></div><div class="line">                        <span class="keyword">if</span> (elem.directive[attr.nodeValue] !== data[dataKey]) &#123;</div><div class="line">                            directives[attr.nodeValue].call(elem, data[dataKey])</div><div class="line">                            elem.directive[attr.nodeValue] = data[dataKey]</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;åœ¨ä¸€äº›å‰ç«¯æ¡†æ¶ä¸­ï¼Œä¾‹å¦‚ &lt;code&gt;angular&lt;/code&gt;ï¼Œ&lt;code&gt;vue&lt;/code&gt;éƒ½æœ‰æ•°æ®åŒå‘æ•°æ®ç»‘å®šçš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æå¤§çš„æ–¹ä¾¿æˆ‘ä»¬æ“ä½œæ•°æ®ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä¼šè®²è§£ä¸€ä¸‹åŒå‘æ•°æ®ç»‘å®šçš„4ç§å®ç°æ–¹å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>react-nativeé—®é¢˜æ±‡æ€»</title>
    <link href="http://www.shenzekun.cn/react-native%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB.html"/>
    <id>http://www.shenzekun.cn/react-nativeé—®é¢˜æ±‡æ€».html</id>
    <published>2018-05-08T05:05:13.000Z</published>
    <updated>2018-10-22T02:44:58.760Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>å‰äº›å¤©ä½¿ç”¨react-native å†™äº†ä¸ªé¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜æŒºå¤šçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹æ¥ğŸ“ï¼Œé¿å…å¿˜è®°ã€‚æœ¬ç¯‡æ–‡ç« ä¼šä¸å®šæœŸæ›´æ–°!</p></blockquote><a id="more"></a><h2 id="é—®é¢˜æ±‡æ€»"><a href="#é—®é¢˜æ±‡æ€»" class="headerlink" title="é—®é¢˜æ±‡æ€»"></a>é—®é¢˜æ±‡æ€»</h2><h3 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h3><p>å‡ºç°Remote debugger is in a background tab which may cause apps to perform slowlyé»„è‰²è­¦æŠ¥<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-043813.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>æŠŠé‚£ä¸ªchromeçš„Tabé¡µä¿æŒæœ€å‰ï¼Œçª—å£ä¸è¦æœ€å°åŒ–å°±å¥½äº†ã€‚ã€‚ã€‚ã€‚</p><h3 id="é—®é¢˜äºŒ"><a href="#é—®é¢˜äºŒ" class="headerlink" title="é—®é¢˜äºŒ"></a>é—®é¢˜äºŒ</h3><p>å‡ºç°connection to <a href="http://localhost:8081" target="_blank" rel="external">http://localhost:8081</a> çº¢è‰²é”™è¯¯<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-044331.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>è¿™ä¸ªå¾ˆç¥å¥‡ã€‚é‡åˆ°äº†å¤šæŒ‰ âŒ˜Rå‡ ä¸‹æˆ–è€…æŠŠæ¨¡æ‹Ÿå™¨ä¸Šçš„é¡¹ç›®åˆ é™¤ä¹‹åé‡æ–°åŠ è½½ä¸€èˆ¬å°±ä¼šè§£å†³ã€‚</p><blockquote><p>bad news: metro v0.29.0 wonâ€™t work with RN 0.54-0.55 because it introduced a new config param that RN is not handling yet (weâ€™re working on improving configuration compatibility between RN and metro).</p><p>good news: the actual fix needed to solve this issue is in the RN repo (7be3d1c), so cherry-picking it into the 0.54 and 0.55 branches and releasing a RN minor version will fix this. (cc @hramos, @grabbou ).</p></blockquote><p>æˆ–è€…ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯ä»¥è§£å†³é—®é¢˜</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn cache clean&amp;&amp;yarn</div></pre></td></tr></table></figure><h3 id="é—®é¢˜ä¸‰"><a href="#é—®é¢˜ä¸‰" class="headerlink" title="é—®é¢˜ä¸‰"></a>é—®é¢˜ä¸‰</h3><p>å‡ºç°Runtime is not ready for debuggingçº¢è‰²é”™è¯¯<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-044718.png" alt=""></p><p><strong>ä¸¤ç§è§£å†³æ–¹æ³•</strong></p><ol><li>å…³æ‰<a href="http://localhost:8081/debugger-ui/" target="_blank" rel="external">http://localhost:8081/debugger-ui/</a> å†é‡æ–°å¼€å¯å°±è¡Œäº†</li><li>æŒ‰ command+d å°†Debug JS Remotelyå…³æ‰ä¹Ÿå¯ä»¥</li></ol><h3 id="é—®é¢˜å››"><a href="#é—®é¢˜å››" class="headerlink" title="é—®é¢˜å››"></a>é—®é¢˜å››</h3><p>å‡ºç°Unrecognized font family çº¢è‰²æŠ¥è­¦<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-045023.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>åœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">react-native link react-native-vector-icons</div></pre></td></tr></table></figure><p>ç„¶åé‡æ–°å¯åŠ¨å³å¯</p><h3 id="é—®é¢˜äº”"><a href="#é—®é¢˜äº”" class="headerlink" title="é—®é¢˜äº”"></a>é—®é¢˜äº”</h3><p>React Nativeä¸æ”¯æŒè‡ªåŠ¨è®¡ç®—Imageç­‰Viewçš„å¤§å°</p><p><a href="http://facebook.github.io/react-native/docs/images.html#why-not-automatically-size-everything" target="_blank" rel="external">è¯¦æƒ…</a></p><h3 id="é—®é¢˜å…­"><a href="#é—®é¢˜å…­" class="headerlink" title="é—®é¢˜å…­"></a>é—®é¢˜å…­</h3><p>react-native-interactable å‡ºç° Invariant Violationçº¢è‰²è­¦æŠ¥<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15257552426894.jpg" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>é™çº§ï¼šå°† react-native ç‰ˆæœ¬é™åˆ°0.53.0 å°±è¡Œäº†<br>å‚è€ƒ <a href="https://github.com/wix/react-native-interactable/issues/185" target="_blank" rel="external">wix/react-native-interactable#185</a></p><h3 id="é—®é¢˜ä¸ƒ"><a href="#é—®é¢˜ä¸ƒ" class="headerlink" title="é—®é¢˜ä¸ƒ"></a>é—®é¢˜ä¸ƒ</h3><p>Buildåé‡åˆ°â€™No bundle URL presentâ€™ error<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-045522.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>å…³é—­SS,VPNè¿™ç±»çš„æœåŠ¡ï¼Œé‡æ–° <code>react-native run-ios</code> å³å¯ã€‚å¾ˆç¥å¥‡ã€‚ã€‚ã€‚</p><p>å®˜æ–¹ä¹Ÿæœ‰è¿™ä¸ª <a href="https://github.com/facebook/react-native/issues/12754" target="_blank" rel="external">issue</a></p><h3 id="é—®é¢˜å…«"><a href="#é—®é¢˜å…«" class="headerlink" title="é—®é¢˜å…«"></a>é—®é¢˜å…«</h3><p>å‡ºç°regeneratorRuntime is not defined<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-045839.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong></p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">react-native <span class="built_in">start</span> <span class="comment">--reset-cache</span></div></pre></td></tr></table></figure><p>æœ€ç»ˆåŸå› æ˜¯å› ä¸ºä¸€ä¸ªç»„ä»¶æ²¡åˆ å¹²å‡€ğŸ¤£</p><h3 id="é—®é¢˜ä¹"><a href="#é—®é¢˜ä¹" class="headerlink" title="é—®é¢˜ä¹"></a>é—®é¢˜ä¹</h3><p>å‡ºç°:CFBundleIdentifierâ€, Does Not Exist é”™è¯¯</p><p><strong>è§£å†³æ–¹æ³•</strong><br>æ‰“å¼€ xcode è¿è¡Œé¡¹ç›®å‡ºç°<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-050038.png" alt=""><br>åœ¨è¿™é‡Œé¢æœ‰ä¸ª libInteractable.a åˆ é™¤æ‰å°±è¡Œäº†<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-050103.png" alt=""></p><p>å‚è€ƒï¼š<a href="https://github.com/rebeccahughes/react-native-device-info/issues/251" target="_blank" rel="external">rebeccahughes/react-native-device-info#251</a></p><h3 id="é—®é¢˜å"><a href="#é—®é¢˜å" class="headerlink" title="é—®é¢˜å"></a>é—®é¢˜å</h3><p>åˆ é™¤åŒ…æ³¨æ„äº‹é¡¹</p><p>é¦–å…ˆ <code>react-native unlink &lt;lib name&gt;</code><br>ç„¶å <code>yarn remove &lt;lib name&gt;</code></p><p><strong>ä¸€å®šè¦è¿™æ ·åš</strong>ä¸ç„¶ä¼šæœ‰é—®é¢˜ã€‚ã€‚ã€‚</p><h3 id="é—®é¢˜åä¸€"><a href="#é—®é¢˜åä¸€" class="headerlink" title="é—®é¢˜åä¸€"></a>é—®é¢˜åä¸€</h3><p>å‡ºç°Invariant Violation: View config not found for name çº¢è‰²è­¦æŠ¥<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-050336.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br><a href="https://stackoverflow.com/questions/46750477/react-native-invariant-violation-view-config" target="_blank" rel="external">https://stackoverflow.com/questions/46750477/react-native-invariant-violation-view-config</a></p><h3 id="é—®é¢˜åäºŒ"><a href="#é—®é¢˜åäºŒ" class="headerlink" title="é—®é¢˜åäºŒ"></a>é—®é¢˜åäºŒ</h3><p>Button ç»„ä»¶æ— æ³•ç›´æ¥ä½¿ç”¨ styleå®šå®½åº¦å’Œé«˜åº¦ç­‰ç­‰</p><p><strong>è§£å†³æ–¹æ³•</strong></p><blockquote><p>If this button doesnâ€™t look right for your app, you can build your own button using TouchableOpacity or TouchableNativeFeedback.</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä½¿ç”¨ <code>TouchableOpacity</code> æˆ–è€… <code>TouchableNativeFeedback</code> ç»„ä»¶ä»£æ›¿</p><h3 id="é—®é¢˜åä¸‰"><a href="#é—®é¢˜åä¸‰" class="headerlink" title="é—®é¢˜åä¸‰"></a>é—®é¢˜åä¸‰</h3><p>ä½¿ç”¨TouchableWithoutFeedback å‡ºç°é”™è¯¯<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-050857.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>TouchableWithoutFeedbackï¼Œè¿™ä¸ªç»„ä»¶å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªchildï¼Œå¦‚æœæ˜¯å¤šä¸ªç»„ä»¶ï¼Œå¿…é¡»ä»¥viewæ¥åŒ…è£…ã€‚å†™æˆè¿™æ ·å°±å¯ä»¥äº†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">return</span>(</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">TouchableWithoutFeedback</span> <span class="attr">style</span>=<span class="string">&#123;&#123;flex:</span> <span class="attr">1</span>&#125;&#125; <span class="attr">onPress</span>=<span class="string">&#123;dismissKeyboard&#125;</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;flex:</span> <span class="attr">1</span>&#125;&#125;&gt;</span></div><div class="line">      ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</div><div class="line">    <span class="tag">&lt;/<span class="name">View</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">TouchableWithoutFeedback</span>&gt;</span></div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="é—®é¢˜åå››"><a href="#é—®é¢˜åå››" class="headerlink" title="é—®é¢˜åå››"></a>é—®é¢˜åå››</h3><p>xcodeå‡ºç°Showing All Messages Code signing is required for product type â€˜Unit Test Bundleâ€™ in SDK â€˜iOS 11.2â€™<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-051045.png" alt=""></p><p>åœ¨Xcodeä¸Š<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-051232.png" alt=""><br>å³å¯</p><h3 id="é—®é¢˜åäº”"><a href="#é—®é¢˜åäº”" class="headerlink" title="é—®é¢˜åäº”"></a>é—®é¢˜åäº”</h3><p>react-navigation TabNavigatorç‚¹å‡»åˆ‡æ¢ååº”è¿Ÿé’ã€‚</p><p>åœ¨çœŸæœºä¸Šè°ƒè¯•react-navigationçš„TabNavigatorï¼Œç‚¹å‡»tabæ€»æ„Ÿè§‰ååº”å¾ˆæ…¢ï¼Œè¯•äº†å¥½ä¹…éƒ½æ˜¯è¿™æ ·ï¼Œå¤§æ¦‚æœ‰0.5ç§’ä¹‹åæ‰ä¼šåˆ‡æ¢ä½“éªŒå¾ˆå·®ã€‚</p><p><strong>è§£å†³æ–¹æ³•</strong><br>å…³é—­debugæ¨¡å¼ã€‚ã€‚ã€‚ã€‚</p><h3 id="é—®é¢˜åå…­"><a href="#é—®é¢˜åå…­" class="headerlink" title="é—®é¢˜åå…­"></a>é—®é¢˜åå…­</h3><p>React Navigation TabNavigator ä¸€ä¸ªå¸§çš„å»¶è¿Ÿ</p><p>å½“é¡µé¢åŠ è½½æ—¶ï¼Œä¸‹é¢çš„ tab å›¾æ ‡ä»ç¬¬ä¸€ä¸ªåˆ°ç¬¬äºŒä¸ªå›¾æ ‡æœ‰ä¸€ä¸ªå¸§çš„å»¶è¿Ÿ</p><p><strong>è§£å†³æ–¹æ³•</strong><br>å®šä¹‰initialLayoutï¼Œç”¨ä»¥é˜²æ­¢react-native-tab-viewæ¸²æŸ“ä¸­ä¸€ä¸ªå¸§çš„å»¶è¿Ÿ</p><p>å‚è€ƒï¼š<a href="https://github.com/react-native-community/react-native-tab-view#avoid-one-frame-delay" target="_blank" rel="external">https://github.com/react-native-community/react-native-tab-view#avoid-one-frame-delay</a></p><h3 id="é—®é¢˜åä¸ƒ"><a href="#é—®é¢˜åä¸ƒ" class="headerlink" title="é—®é¢˜åä¸ƒ"></a>é—®é¢˜åä¸ƒ</h3><p>å‡ºç°timed out waiting for çº¢è‰²è­¦æŠ¥<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-051715.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>é‡å¯æ¨¡æ‹Ÿå™¨ã€‚ã€‚ã€‚</p><h3 id="é—®é¢˜åå…«"><a href="#é—®é¢˜åå…«" class="headerlink" title="é—®é¢˜åå…«"></a>é—®é¢˜åå…«</h3><p>react native æ²¡æœ‰\<br>ç»„ä»¶æ¢è¡Œ</p><p><strong>è§£å†³æ–¹æ³•</strong><br>å¯ä»¥åœ¨ Text ç»„ä»¶é‡Œå†™ {â€˜\nâ€™},å¦‚ï¼š<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-051845.png" alt=""></p><h3 id="é—®é¢˜åä¹"><a href="#é—®é¢˜åä¹" class="headerlink" title="é—®é¢˜åä¹"></a>é—®é¢˜åä¹</h3><p>react native checkbox åŸç”Ÿç»„ä»¶åªé€‚åˆå®‰å“</p><p><strong>è§£å†³æ–¹æ³•</strong><br>å¯ä»¥ä½¿ç”¨è¿™ä¸ª <a href="https://github.com/crazycodeboy/react-native-check-box" target="_blank" rel="external">https://github.com/crazycodeboy/react-native-check-box</a></p><h3 id="é—®é¢˜äºŒå"><a href="#é—®é¢˜äºŒå" class="headerlink" title="é—®é¢˜äºŒå"></a>é—®é¢˜äºŒå</h3><p>react-navigationçš„headerRightæ·»åŠ ç‚¹å‡»äº‹ä»¶</p><p><strong>è§£å†³æ–¹æ³•</strong><br>é¦–å…ˆéœ€è¦åœ¨componentDidMount(){}ä¸­åŠ¨æ€çš„æ·»åŠ ç‚¹å‡»äº‹ä»¶</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">componentDidMount</span><span class="params">()</span></span>&#123;</div><div class="line">    this<span class="selector-class">.props</span><span class="selector-class">.navigation</span><span class="selector-class">.setParams</span>(&#123;</div><div class="line">        navigatePress:this<span class="selector-class">.navigatePress</span></div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ç„¶å</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">navigatePress</span> = <span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    alert(<span class="string">'ç‚¹å‡»headerRight'</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.props.navigation);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡paramsæ–¹æ³•æ¥è·å–ç‚¹å‡»äº‹ä»¶äº†ï¼ˆ<strong>è®°ä½å…ˆè¦åˆ¤æ–­navigation.state.paramsæ˜¯å¦å­˜åœ¨ï¼Œä¸ç„¶ä¼šæŠ¥é”™</strong>ã€‚ã€‚ã€‚ï¼‰</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">static navigationOptions = (&#123; navigation, screenProps &#125;) =&gt; (&#123;</div><div class="line">      title: navigation.<span class="keyword">state</span>.params?navigation.<span class="keyword">state</span>.params.title:null,</div><div class="line">      headerRight:(</div><div class="line">          <span class="variable">&lt;Text onPress=&#123;navigation.state.params?navigation.state.params.navigatePress:null&#125;&gt;</span></div><div class="line">              è¿”å›</div><div class="line">          &lt;/Text&gt;</div><div class="line">      )</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h3 id="é—®é¢˜äºŒåä¸€"><a href="#é—®é¢˜äºŒåä¸€" class="headerlink" title="é—®é¢˜äºŒåä¸€"></a>é—®é¢˜äºŒåä¸€</h3><p>react-navigation tab ç‚¹å‡» StatusBar é¢œè‰²é—®é¢˜</p><p><strong>è§£å†³æ–¹æ³•</strong><br>è¯¦æƒ… <a href="https://reactnavigation.org/docs/status-bar.html" target="_blank" rel="external">https://reactnavigation.org/docs/status-bar.html</a></p><h3 id="é—®é¢˜äºŒåäºŒ"><a href="#é—®é¢˜äºŒåäºŒ" class="headerlink" title="é—®é¢˜äºŒåäºŒ"></a>é—®é¢˜äºŒåäºŒ</h3><p>Image æ ‡ç­¾ä¸æ”¯æŒ http é—®é¢˜</p><p><strong>è§£å†³æ–¹æ³•</strong><br>ios 9 ä»¥ä¸Šï¼Œé»˜è®¤æ˜¯Httpsè¯·æ±‚ï¼Œå¦‚éœ€æ”¯æŒHttpï¼Œä¿®æ”¹info.plistæ–‡ä»¶æ·»åŠ é”®å€¼å¯¹å°±å¥½äº†<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-052245.png" alt=""></p><h3 id="é—®é¢˜äºŒåä¸‰"><a href="#é—®é¢˜äºŒåä¸‰" class="headerlink" title="é—®é¢˜äºŒåä¸‰"></a>é—®é¢˜äºŒåä¸‰</h3><p>react-native-swiper åŠ¨æ€æ•°æ®æ¸²æŸ“ï¼Œç¿»é¡µå‡ºç°é”™ä¹±</p><p><strong>å‡ºç°</strong><br>ä¸€å¼€å§‹ï¼Œä½¿ç”¨é™æ€çš„æ•°æ®æ²¡é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨åŠ¨æ€åŠ è½½æ•°æ®å°±å‡ºç°é—®é¢˜ï¼Œç»è¿‡ä¸€äº›è°ƒè¯•å‘ç°ï¼Œå¯èƒ½æ˜¯ index çš„é—®é¢˜ï¼Œåœ¨ github åº“é‡Œæœ issue æœç„¶æœ‰äººé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ <a href="https://github.com/leecade/react-native-swiper/issues/720" target="_blank" rel="external">https://github.com/leecade/react-native-swiper/issues/720</a></p><p><strong>è§£å†³æ–¹æ³•</strong><br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-052442.png" alt=""><br>æ·»åŠ  key å€¼æ˜¯ä½ <strong>è·å–æ•°æ®çš„é•¿åº¦</strong></p><h3 id="é—®é¢˜äºŒåå››"><a href="#é—®é¢˜äºŒåå››" class="headerlink" title="é—®é¢˜äºŒåå››"></a>é—®é¢˜äºŒåå››</h3><p>react-native-swiper è·³è½¬ç´¢å¼• bug é—®é¢˜ã€‚</p><p>ä¸€å¼€å§‹<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-052540.png" alt=""></p><p>åœ¨ç¿»é¡µçš„æ—¶å€™ï¼Œå‡ºç°ç´¢å¼•éšæœºå˜åŒ–çš„é—®é¢˜ï¼Œå½“æ—¶çœ‹äº†ä¸€ä¸‹ api æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¸€ç›´å®šä½åˆ°<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-052704.png" alt=""></p><p>å°†æ ‡é¢˜ä¸æ˜¾ç¤ºå°±å‘ç°ç´¢å¼•æ²¡æœ‰é—®é¢˜äº†ï¼Œä¸ä¼šéšæœºç¿»é¡µã€‚ã€‚ã€‚ï¼Œæ¥ç€åœ¨æŸä¸€é¡µçœ‹åˆ°é¢˜ç›®æ¯”è¾ƒå¤§ï¼Œå‘ç”Ÿäº†æŠ–åŠ¨ï¼Œç»“æœé€ æˆäº†éšæœºç¿»é¡µï¼Œå†ä¸€çœ‹é‡Œé¢æœ‰æ•°å­—å’Œæ–‡å­—ï¼Œå¤§å°ä¸ä¸€æ ·ï¼Œè®¾ç½®ä¸€ä¸‹å­—ä½“å°±å¥½äº†ã€‚ã€‚ã€‚ã€‚ä¸ªäººè®¤ä¸ºæ˜¯æŠ–åŠ¨çš„æ—¶å€™å¯èƒ½è§¦å‘äº†react-native-swiperçš„ç¿»é¡µï¼Œç»“æœé€ æˆéšæœºç¿»é¡µã€‚ã€‚ã€‚<br>ç¥å‘çš„ bugï¼Œæ‰¾äº†4ï¼Œ5ä¸ªå°æ—¶ã€‚ã€‚ã€‚ã€‚ğŸ˜¡</p><h3 id="é—®é¢˜äºŒåäº”"><a href="#é—®é¢˜äºŒåäº”" class="headerlink" title="é—®é¢˜äºŒåäº”"></a>é—®é¢˜äºŒåäº”</h3><p>ListView, FlatList, Sections and VirtualizedList paddingBottom æ— æ•ˆçš„é—®é¢˜ã€‚</p><p>ListView, FlatList, Sections and VirtualizedList ç»§æ‰¿äº† ScrollView<br>æ‰€ä»¥å¯¼è‡´éƒ½æœ‰è¿™ä¸ªé—®é¢˜</p><p><strong>è§£å†³æ–¹æ³•</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ScrollView</span> <span class="attr">contentContainerStyle</span>=<span class="string">&#123;&#123;paddingBottom:</span> <span class="attr">16</span>&#125;&#125; /&gt;</span></div></pre></td></tr></table></figure><h3 id="é—®é¢˜äºŒåå…­"><a href="#é—®é¢˜äºŒåå…­" class="headerlink" title="é—®é¢˜äºŒåå…­"></a>é—®é¢˜äºŒåå…­</h3><p>å‡ºç° could not connect to development serverçº¢è‰²è­¦æŠ¥<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-05-08-052952.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong><br>å…³æ‰ vpn ï¼Œæˆ–è€…ä¸è¦å¼€å…¨å±€æ¨¡å¼ã€‚ã€‚ã€‚å¾ˆç¥å¥‡</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;å‰äº›å¤©ä½¿ç”¨react-native å†™äº†ä¸ªé¡¹ç›®ï¼Œé‡åˆ°çš„é—®é¢˜æŒºå¤šçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹æ¥ğŸ“ï¼Œé¿å…å¿˜è®°ã€‚æœ¬ç¯‡æ–‡ç« ä¼šä¸å®šæœŸæ›´æ–°!&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="react" scheme="http://www.shenzekun.cn/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>html5è°ƒç”¨æ‘„åƒå¤´åŠŸèƒ½</title>
    <link href="http://www.shenzekun.cn/html5%E8%B0%83%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4%E5%8A%9F%E8%83%BD.html"/>
    <id>http://www.shenzekun.cn/html5è°ƒç”¨æ‘„åƒå¤´åŠŸèƒ½.html</id>
    <published>2018-05-05T13:19:14.000Z</published>
    <updated>2018-10-21T12:51:44.850Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>å‰äº›å¤©ï¼Œçº¿ä¸Šç¬”è¯•çš„æ—¶å€™ï¼Œå‘ç°éœ€è¦æµè§ˆå™¨åŒæ„å¼€å¯æ‘„åƒå¤´ï¼Œæ„Ÿè§‰åƒæ˜¯ js è°ƒç”¨çš„ï¼Œç”±äºå½“æ—¶ç¬”è¯•ï¼Œä¹Ÿå°±æ²¡æƒ³åˆ°è¿™ä¹ˆå¤šğŸ¤£ã€‚ä»Šå¤©é—²æ¥æ— äº‹ï¼Œçœ‹äº†ä¸‹è‡ªå·±çš„ todoï¼Œå‘ç°æœ‰è¿™ä¸ªè°ƒç”¨æ‘„åƒå¤´çš„todoï¼Œæ‰æƒ³åˆ°ğŸ˜‚ã€‚ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œæœç„¶ js æœ‰è°ƒç”¨æ‘„åƒå¤´çš„ apiï¼Œä¸ºæ­¤è‡ªå·±å†™ä¸€ä¸ª demo ï¼Œé¿å…å¿˜è®°ã€‚</p></blockquote><a id="more"></a><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><h3 id="è°ƒç”¨æ‘„åƒå¤´"><a href="#è°ƒç”¨æ‘„åƒå¤´" class="headerlink" title="è°ƒç”¨æ‘„åƒå¤´"></a>è°ƒç”¨æ‘„åƒå¤´</h3><p>ä¸€å…±æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨<code>navigator.getUserMedia</code>ï¼ˆ<strong>è¯¥ç‰¹æ€§å·²ç»ä» Web æ ‡å‡†ä¸­åˆ é™¤</strong>ï¼Œè™½ç„¶ä¸€äº›æµè§ˆå™¨ç›®å‰ä»ç„¶æ”¯æŒå®ƒï¼Œä½†ä¹Ÿè®¸ä¼šåœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´åœæ­¢æ”¯æŒï¼Œè¯·å°½é‡ä¸è¦ä½¿ç”¨è¯¥ç‰¹æ€§ï¼‰ï¼Œ<strong>å‰é¢ä¸€ç§å·²ç»ä» Web æ ‡å‡†ä¸­åˆ é™¤</strong>ï¼Œä»…ä¸ºäº†å‘åå…¼å®¹è€Œå­˜åœ¨ï¼Œç¬¬äºŒç§æ˜¯ä½¿ç”¨<code>navigator.mediaDevices.getUserMedia</code>(<strong>æ¨èä½¿ç”¨</strong>),è¿™ä¸¤ç§æ–¹æ³• Safari è²Œä¼¼éƒ½ä¸æ”¯æŒã€‚ã€‚ã€‚ã€‚</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•<code>navigator.getUserMedia</code>ç”¨æ³•è¯¦è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/getUserMedia" target="_blank" rel="external">mdn</a> ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‘„åƒå¤´è°ƒç”¨1<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"v"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        !(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">userMedia</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> navigator.getUserMedia = navigator.getUserMedia ||</div><div class="line">                    navigator.webkitGetUserMedia ||</div><div class="line">                    navigator.mozGetUserMedia ||</div><div class="line">                    navigator.msGetUserMedia || <span class="literal">null</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (userMedia()) &#123;</div><div class="line">                <span class="keyword">var</span> constraints = &#123;</div><div class="line">                    <span class="attr">video</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">audio</span>: <span class="literal">false</span></div><div class="line">                &#125;;</div><div class="line">                <span class="keyword">var</span> media = navigator.getUserMedia(constraints, <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> v = <span class="built_in">document</span>.getElementById(<span class="string">'v'</span>);</div><div class="line">                    <span class="keyword">var</span> url = <span class="built_in">window</span>.URL || <span class="built_in">window</span>.webkitURL;</div><div class="line">                    v.src = url ? url.createObjectURL(stream) : stream;</div><div class="line">                    v.play();</div><div class="line">                &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">"ERROR"</span>);</div><div class="line">                    <span class="built_in">console</span>.log(error);</div><div class="line">                &#125;);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"ä¸æ”¯æŒ"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;)();</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><ul><li>ç¬¬äºŒç§æ–¹æ³•<code>navigator.mediaDevices.getUserMedia</code>ç”¨æ³•è¯¦è§<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia" target="_blank" rel="external">mdn</a>ã€‚<code>navigator.mediaDevices.getUserMedia</code> å…¶å®å’Œç¬¬ä¸€ç§å·®ä¸å¤šï¼Œä¸»è¦ç¬¬äºŒç§è¿”å›æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‘„åƒå¤´è°ƒç”¨2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"v"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        !(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// è€çš„æµè§ˆå™¨å¯èƒ½æ ¹æœ¬æ²¡æœ‰å®ç° mediaDevicesï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè®¾ç½®ä¸€ä¸ªç©ºçš„å¯¹è±¡</span></div><div class="line">            <span class="keyword">if</span> (navigator.mediaDevices === <span class="literal">undefined</span>) &#123;</div><div class="line">                navigator.mediaDevices = &#123;&#125;;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (navigator.mediaDevices.getUserMedia === <span class="literal">undefined</span>) &#123;</div><div class="line">                navigator.mediaDevices.getUserMedia = <span class="function"><span class="keyword">function</span> (<span class="params">constraints</span>) </span>&#123;</div><div class="line">                    <span class="comment">// é¦–å…ˆï¼Œå¦‚æœæœ‰getUserMediaçš„è¯ï¼Œå°±è·å¾—å®ƒ</span></div><div class="line">                    <span class="keyword">var</span> getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;</div><div class="line"></div><div class="line">                    <span class="comment">// ä¸€äº›æµè§ˆå™¨æ ¹æœ¬æ²¡å®ç°å®ƒ - é‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªerroråˆ°promiseçš„rejectæ¥ä¿æŒä¸€ä¸ªç»Ÿä¸€çš„æ¥å£</span></div><div class="line">                    <span class="keyword">if</span> (!getUserMedia) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'getUserMedia is not implemented in this browser'</span>));</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="comment">// å¦åˆ™ï¼Œä¸ºè€çš„navigator.getUserMediaæ–¹æ³•åŒ…è£¹ä¸€ä¸ªPromise</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">                        getUserMedia.call(navigator, constraints, resolve, reject);</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">const</span> constraints = &#123;</div><div class="line">                <span class="attr">video</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">audio</span>: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">let</span> promise = navigator.mediaDevices.getUserMedia(constraints);</div><div class="line">            promise.then(<span class="function"><span class="params">stream</span> =&gt;</span> &#123;</div><div class="line">                <span class="keyword">let</span> v = <span class="built_in">document</span>.getElementById(<span class="string">'v'</span>);</div><div class="line">                <span class="comment">// æ—§çš„æµè§ˆå™¨å¯èƒ½æ²¡æœ‰srcObject</span></div><div class="line">                <span class="keyword">if</span> (<span class="string">"srcObject"</span> <span class="keyword">in</span> v) &#123;</div><div class="line">                    v.srcObject = stream;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="comment">// é˜²æ­¢å†æ–°çš„æµè§ˆå™¨é‡Œä½¿ç”¨å®ƒï¼Œåº”ä¸ºå®ƒå·²ç»ä¸å†æ”¯æŒäº†</span></div><div class="line">                    v.src = <span class="built_in">window</span>.URL.createObjectURL(stream);</div><div class="line">                &#125;</div><div class="line">                v.onloadedmetadata = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                    v.play();</div><div class="line">                &#125;;</div><div class="line">            &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">                <span class="built_in">console</span>.error(err.name + <span class="string">": "</span> + err.message);</div><div class="line">            &#125;)</div><div class="line">        &#125;)();</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="æ‹ç…§"><a href="#æ‹ç…§" class="headerlink" title="æ‹ç…§"></a>æ‹ç…§</h3><p>æ€è·¯æ˜¯è®¾ç½®ä¸€ä¸ªæ ‡å¿—å˜é‡ videoPlaying çœ‹çœ‹æ˜¯å¦ video æœ‰åœ¨ playï¼Œç›‘å¬æ‹ç…§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼Œå¦‚æœvideoPlaying ä¸º true ï¼Œä½¿ç”¨ä¸€ä¸ªcanvas è·å– video çš„å®½é«˜ï¼ˆé»˜è®¤ canvas æ˜¯ä¸æ˜¾ç¤ºçš„ï¼‰ï¼Œç„¶åä½¿ç”¨ canvas çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage" target="_blank" rel="external">drawImage</a>,ç„¶åä½¿ç”¨ canvas çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/toDataURL" target="_blank" rel="external">toDataURL</a>è¿”å›ä¸€ä¸ª data urlï¼Œå°†è¿™ä¸ª urlï¼Œè®¾ç½®åœ¨ä¸€ä¸ª img æ ‡ç­¾ä¸Šå³å¯ğŸ˜€</p><ul><li>ç¬¬ä¸€ç§æ–¹æ³•<code>navigator.getUserMedia</code>å®ç°ä»£ç ï¼š</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‹ç…§1<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"take"</span>&gt;</span>æ‹ç…§<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"v"</span> <span class="attr">style</span>=<span class="string">"width: 640px;height: 480px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://placehold.it/640&amp;text=Your%20image%20here%20..."</span> <span class="attr">id</span>=<span class="string">"photo"</span> <span class="attr">alt</span>=<span class="string">"photo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        !(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">userMedia</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">return</span> navigator.getUserMedia = navigator.getUserMedia ||</div><div class="line">                    navigator.webkitGetUserMedia ||</div><div class="line">                    navigator.mozGetUserMedia ||</div><div class="line">                    navigator.msGetUserMedia || <span class="literal">null</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (userMedia()) &#123;</div><div class="line">                <span class="keyword">let</span> videoPlaying = <span class="literal">false</span>;</div><div class="line">                <span class="keyword">let</span> constraints = &#123;</div><div class="line">                    <span class="attr">video</span>: <span class="literal">true</span>,</div><div class="line">                    <span class="attr">audio</span>: <span class="literal">false</span></div><div class="line">                &#125;;</div><div class="line">                <span class="keyword">let</span> video = <span class="built_in">document</span>.getElementById(<span class="string">'v'</span>);</div><div class="line">                <span class="keyword">let</span> media = navigator.getUserMedia(constraints, <span class="function"><span class="keyword">function</span> (<span class="params">stream</span>) </span>&#123;</div><div class="line">                    <span class="keyword">let</span> url = <span class="built_in">window</span>.URL || <span class="built_in">window</span>.webkitURL;</div><div class="line">                    video.src = url ? url.createObjectURL(stream) : stream;</div><div class="line">                    video.play();</div><div class="line">                    videoPlaying = <span class="literal">true</span>;</div><div class="line">                &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">                    <span class="built_in">console</span>.log(<span class="string">"ERROR"</span>);</div><div class="line">                    <span class="built_in">console</span>.log(error);</div><div class="line">                &#125;);</div><div class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'take'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (videoPlaying) &#123;</div><div class="line">                        <span class="keyword">let</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</div><div class="line">                        canvas.width = video.videoWidth;</div><div class="line">                        canvas.height = video.videoHeight;</div><div class="line">                        canvas.getContext(<span class="string">'2d'</span>).drawImage(video, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">                        <span class="keyword">let</span> data = canvas.toDataURL(<span class="string">'image/webp'</span>);</div><div class="line">                        <span class="built_in">document</span>.getElementById(<span class="string">'photo'</span>).setAttribute(<span class="string">'src'</span>, data);</div><div class="line">                    &#125;</div><div class="line">                &#125;, <span class="literal">false</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="string">"ä¸æ”¯æŒ"</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;)();</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure><p>ç¬¬äºŒç§<code>navigator.mediaDevices.getUserMedia</code>å®ç°æ–¹æ³•:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ‹ç…§2<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"take"</span>&gt;</span>æ‹ç…§<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"v"</span> <span class="attr">style</span>=<span class="string">"width: 640px;height: 480px;"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://placehold.it/640&amp;text=Your%20image%20here%20..."</span> <span class="attr">id</span>=<span class="string">"photo"</span> <span class="attr">alt</span>=<span class="string">"photo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">        !(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// è€çš„æµè§ˆå™¨å¯èƒ½æ ¹æœ¬æ²¡æœ‰å®ç° mediaDevicesï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè®¾ç½®ä¸€ä¸ªç©ºçš„å¯¹è±¡</span></div><div class="line">            <span class="keyword">if</span> (navigator.mediaDevices === <span class="literal">undefined</span>) &#123;</div><div class="line">                navigator.mediaDevices = &#123;&#125;;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (navigator.mediaDevices.getUserMedia === <span class="literal">undefined</span>) &#123;</div><div class="line">                navigator.mediaDevices.getUserMedia = <span class="function"><span class="keyword">function</span> (<span class="params">constraints</span>) </span>&#123;</div><div class="line">                    <span class="comment">// é¦–å…ˆï¼Œå¦‚æœæœ‰getUserMediaçš„è¯ï¼Œå°±è·å¾—å®ƒ</span></div><div class="line">                    <span class="keyword">var</span> getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;</div><div class="line"></div><div class="line">                    <span class="comment">// ä¸€äº›æµè§ˆå™¨æ ¹æœ¬æ²¡å®ç°å®ƒ - é‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªerroråˆ°promiseçš„rejectæ¥ä¿æŒä¸€ä¸ªç»Ÿä¸€çš„æ¥å£</span></div><div class="line">                    <span class="keyword">if</span> (!getUserMedia) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'getUserMedia is not implemented in this browser'</span>));</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="comment">// å¦åˆ™ï¼Œä¸ºè€çš„navigator.getUserMediaæ–¹æ³•åŒ…è£¹ä¸€ä¸ªPromise</span></div><div class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">                        getUserMedia.call(navigator, constraints, resolve, reject);</div><div class="line">                    &#125;);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">const</span> constraints = &#123;</div><div class="line">                <span class="attr">video</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">audio</span>: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">let</span> videoPlaying = <span class="literal">false</span>;</div><div class="line">            <span class="keyword">let</span> v = <span class="built_in">document</span>.getElementById(<span class="string">'v'</span>);</div><div class="line">            <span class="keyword">let</span> promise = navigator.mediaDevices.getUserMedia(constraints);</div><div class="line">            promise.then(<span class="function"><span class="params">stream</span> =&gt;</span> &#123;</div><div class="line">                <span class="comment">// æ—§çš„æµè§ˆå™¨å¯èƒ½æ²¡æœ‰srcObject</span></div><div class="line">                <span class="keyword">if</span> (<span class="string">"srcObject"</span> <span class="keyword">in</span> v) &#123;</div><div class="line">                    v.srcObject = stream;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="comment">// é˜²æ­¢å†æ–°çš„æµè§ˆå™¨é‡Œä½¿ç”¨å®ƒï¼Œåº”ä¸ºå®ƒå·²ç»ä¸å†æ”¯æŒäº†</span></div><div class="line">                    v.src = <span class="built_in">window</span>.URL.createObjectURL(stream);</div><div class="line">                &#125;</div><div class="line">                v.onloadedmetadata = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                    v.play();</div><div class="line">                    videoPlaying = <span class="literal">true</span>;</div><div class="line">                &#125;;</div><div class="line">            &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">                <span class="built_in">console</span>.error(err.name + <span class="string">": "</span> + err.message);</div><div class="line">            &#125;)</div><div class="line">            <span class="built_in">document</span>.getElementById(<span class="string">'take'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (videoPlaying) &#123;</div><div class="line">                    <span class="keyword">let</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</div><div class="line">                    canvas.width = v.videoWidth;</div><div class="line">                    canvas.height = v.videoHeight;</div><div class="line">                    canvas.getContext(<span class="string">'2d'</span>).drawImage(v, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">                    <span class="keyword">let</span> data = canvas.toDataURL(<span class="string">'image/webp'</span>);</div><div class="line">                    <span class="built_in">document</span>.getElementById(<span class="string">'photo'</span>).setAttribute(<span class="string">'src'</span>, data);</div><div class="line">                &#125;</div><div class="line">            &#125;, <span class="literal">false</span>);</div><div class="line">        &#125;)();</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;å‰äº›å¤©ï¼Œçº¿ä¸Šç¬”è¯•çš„æ—¶å€™ï¼Œå‘ç°éœ€è¦æµè§ˆå™¨åŒæ„å¼€å¯æ‘„åƒå¤´ï¼Œæ„Ÿè§‰åƒæ˜¯ js è°ƒç”¨çš„ï¼Œç”±äºå½“æ—¶ç¬”è¯•ï¼Œä¹Ÿå°±æ²¡æƒ³åˆ°è¿™ä¹ˆå¤šğŸ¤£ã€‚ä»Šå¤©é—²æ¥æ— äº‹ï¼Œçœ‹äº†ä¸‹è‡ªå·±çš„ todoï¼Œå‘ç°æœ‰è¿™ä¸ªè°ƒç”¨æ‘„åƒå¤´çš„todoï¼Œæ‰æƒ³åˆ°ğŸ˜‚ã€‚ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œæœç„¶ js æœ‰è°ƒç”¨æ‘„åƒå¤´çš„ apiï¼Œä¸ºæ­¤è‡ªå·±å†™ä¸€ä¸ª demo ï¼Œé¿å…å¿˜è®°ã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="html" scheme="http://www.shenzekun.cn/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>2018æ˜¥æ‹›é¢è¯•æ€»ç»“</title>
    <link href="http://www.shenzekun.cn/2018%E6%98%A5%E6%8B%9B%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93.html"/>
    <id>http://www.shenzekun.cn/2018æ˜¥æ‹›é¢è¯•æ€»ç»“.html</id>
    <published>2018-04-20T03:38:42.000Z</published>
    <updated>2018-10-21T12:51:44.846Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ä»3æœˆåº•åˆ°4æœˆä¸­æ—¬ï¼Œç»è¿‡åŠä¸ªæœˆçš„é¢è¯•ï¼Œç»ˆäºåœ¨4æœˆ17å·é¡ºåˆ©æ‹¿åˆ°äº†é˜¿é‡Œçš„ offerï¼Œæ„Ÿè°¢è¿™æ®µæ—¶é—´å†…é¢è¯•å®˜ã€å®¶äººå’Œæœ‹å‹çš„å¸®åŠ©å’Œé¼“åŠ±ã€‚ä¸‹é¢æˆ‘ä¼šæ€»ç»“ä¸€äº›ä¼ä¸šå…³æ³¨çš„ç‚¹å’Œé¢è¯•çš„ä¸€äº›æŠ€å·§ã€‚</p></blockquote><a id="more"></a><h2 id="ä¼ä¸šå…³æ³¨çš„ç‚¹"><a href="#ä¼ä¸šå…³æ³¨çš„ç‚¹" class="headerlink" title="ä¼ä¸šå…³æ³¨çš„ç‚¹"></a>ä¼ä¸šå…³æ³¨çš„ç‚¹</h2><p>æˆ‘è®¤ä¸ºå¤§ä¼ä¸šæ‹›è˜æŠ€æœ¯å®ä¹ ç”Ÿæˆ–è€…æ˜¯åº”å±Šç”Ÿæ—¶å…³æ³¨æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>ä½ çš„å­¦å†ï¼ˆå¾ˆé‡è¦ï¼Œæˆ‘è…¾è®¯ç°åœºäºŒé¢ä¼°è®¡å°±æ˜¯æŒ‚åœ¨è¿™ä¸Šé¢ï¼Œä¸€ä¸Šæ¥å°±é—®æˆ‘å­¦æ ¡çš„æ’åğŸ˜‚ï¼‰</li><li>ä½ çš„æˆç»©æ’å</li><li>ä½ çš„é¡¹ç›®ç»éªŒ</li><li>ä½ çš„æ¯”èµ›å¥–é¡¹ï¼ˆå…³æ³¨ä¼šæ¯”è¾ƒå°‘ï¼Œé™¤éæ˜¯è·å¾— acm é‚£ç§å¤§å‹æ¯”èµ›ï¼‰</li><li>å¯¹æŠ€æœ¯æ˜¯å¦çƒ­æƒ…</li><li>ä½ çš„è®¡ç®—æœºåŸºç¡€</li><li>ä½ çš„ä»·å€¼è§‚</li><li>ä½ çš„æ€§æ ¼</li><li>ä½ å¯¹å½“å‰åº”è˜å²—ä½çš„çŸ¥è¯†å‚¨å¤‡</li><li>æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œ</li><li>æ˜¯å¦èƒ½å¤Ÿä¸»åŠ¨å»å­¦ä¹ æ–°çš„ä¸œè¥¿</li></ul><p>åœ¨é¢è¯•æ—¶ï¼Œè¿™äº›æ–¹é¢éƒ½ä¼šæœ‰æ‰€ä½“ç°ã€‚<br>æ¯”å¦‚é—®ä½ ä¸€äº›å¸¸è§„æ€§é—®é¢˜ï¼ˆè€ƒå¯Ÿä½ å¯¹å½“å‰åº”è˜å²—ä½çš„çŸ¥è¯†å‚¨å¤‡ï¼‰ã€‚<br>é—®ä½ ä¸€äº›è®¡ç®—æœºåŸºç¡€é—®é¢˜ï¼ˆè€ƒå¯Ÿä½ çš„è®¡ç®—æœºåŸºç¡€ï¼‰ã€‚<br>HR é—®ä½ ä¸€äº›å…³äºæ€§æ ¼ä¼˜ç¼ºç‚¹å’Œä¸€äº›å…¶ä»–é—®é¢˜ï¼ˆè€ƒå¯Ÿä½ çš„æ€§æ ¼å’Œä½ çš„ä»·å€¼è§‚ï¼‰ã€‚<br>é—®ä½ ä¸€äº›åœºæ™¯é¢˜ï¼ˆè€ƒå¯Ÿä½ çš„é¡¹ç›®ç»éªŒï¼‰ã€‚<br>é—®ä½ æœ€è¿‘çœ‹ä»€ä¹ˆä¹¦æˆ–è€…ä½ å¸¸é€›ä»€ä¹ˆæŠ€æœ¯ç¤¾åŒºï¼ˆè€ƒå¯Ÿä½ æ˜¯å¦èƒ½å¤Ÿä¸»åŠ¨å»å­¦ä¹ æ–°çš„ä¸œè¥¿å’Œä½ å¯¹æŠ€æœ¯æ˜¯å¦æœ‰çƒ­æƒ…ï¼‰ç­‰ç­‰ã€‚</p><h2 id="é¢è¯•æŠ€å·§"><a href="#é¢è¯•æŠ€å·§" class="headerlink" title="é¢è¯•æŠ€å·§"></a>é¢è¯•æŠ€å·§</h2><p>é¦–å…ˆï¼Œåœ¨é¢è¯•ä¸­ï¼Œ<strong>ä¸€å®šè¦è‡ªä¿¡ä¸è¦ç´§å¼ </strong>ã€‚é‡åˆ°ä¸ä¼šçš„é—®é¢˜ä¸è¦æ…Œå¼ ï¼Œå¯ä»¥å°†ä¸ä¼šçš„é—®é¢˜è½¬åŒ–ä¸ºè‡ªå·±ä¼šçš„é—®é¢˜ã€‚æˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚é¢è¯•å®˜é—®ä½ å‰ç«¯çš„<code>async</code> å’Œ <code>await</code> ï¼Œé‚£ä¹ˆæ­¤æ—¶å¦‚æœä½ è¿™ä¸ªä¸ä¼šï¼Œé‚£ä¹ˆä½ å¯ä»¥é—®ä¸€ä¸‹é¢è¯•å®˜è¿™ä¸ªä¸»è¦æ˜¯å¹²å˜›çš„ï¼Œé¢è¯•å®˜ä¸€èˆ¬éƒ½ä¼šè·Ÿä½ è§£é‡Šï¼Œä»–å‘Šè¯‰ä½ è¿™æ˜¯å¼‚æ­¥ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥å¾€å¼‚æ­¥çš„æ–¹é¢é ï¼Œè¿™æ ·ä¼šè®©é¢è¯•å®˜è§‰å¾—ä½ æŒæ¡çš„è¿˜è¡ŒğŸ™‚ã€‚</p><p>å…¶æ¬¡ï¼Œå°±æ˜¯<strong>ç®€å†çš„é¡¹ç›®ç»éªŒå’ŒæŠ€èƒ½ä¸€å®šè¦å†™å¥½</strong>ï¼Œå› ä¸ºé¢è¯•å®˜ä¼šä¸€ç›´é—®é¡¹ç›®çš„å®ç°ï¼Œéš¾ç‚¹ï¼Œå’Œé¡¹ç›®äº§ç”Ÿçš„èƒŒæ™¯ã€‚ç„¶åä¼šé—®ä½ åœ¨ç®€å†ä¸Šçš„ä¸€äº›ç›¸å…³æŠ€èƒ½ã€‚ä¸ªäººè®¤ä¸ºå¦‚æœä¸å¤ªä¼šçš„æŠ€èƒ½å°±ä¸è¦å†™ä¸Šå»ã€‚æ¯”å¦‚æˆ‘å†™äº†<strong>äº†è§£</strong>å‰ç«¯å®‰å…¨å’Œæ€§èƒ½ä¼˜åŒ–ï¼Œç„¶åå¾ˆå¤šé¢è¯•å®˜å°±é—®è¿™ä¸ªã€‚ã€‚ã€‚ä¸€ç›´é—®ã€‚ã€‚ã€‚è¿˜å¥½å‡†å¤‡çš„æ¯”è¾ƒå……åˆ†ï¼Œä¸ç„¶å°± gg äº†ğŸ¤£</p><p>æœ€åï¼Œåœ¨é¢è¯•æ—¶ï¼Œ<strong>åƒä¸‡ä¸è¦æŠ±æ€¨ä½ çš„é˜Ÿå‹ï¼Œå³ä¾¿é˜Ÿå‹å¾ˆæ°´</strong>ã€‚æˆ‘ä¸¾ä¸ªåä¾‹ï¼Œæœ‰äººåœ¨ hr é¢è¯•æ—¶ï¼Œhr é—®ä»–å¯¹é˜Ÿå‹çœ‹æ³•ï¼Œç„¶åä»–è¯´é˜Ÿå‹å¾ˆæ°´ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½æ˜¯ä»–åœ¨å†™ï¼Œç„¶åå½“å¤©å°±æŒ‚äº†ã€‚ä½ æƒ³ï¼Œä¼ä¸šä¼šè¦èƒŒåè¯´åˆ«äººé—²è¯çš„äººå—ï¼Ÿ</p><p>æœ€åçš„æœ€åï¼Œé¢è¯•ä¸€å®šè¦ä¿æŒ<strong>ç§¯æçš„å¿ƒæ€</strong>ï¼Œå°±å½“é¢è¯•æ˜¯åœ¨è‡ªæˆ‘å­¦ä¹ çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡é¢è¯•éƒ½è‡ªæˆ‘åçœä¸€ä¸‹ï¼Œåˆ°åº•å“ªäº›é—®é¢˜å›ç­”ä¸å¥½ï¼Œç„¶åå»æŸ¥ç¼ºè¡¥æ¼ï¼Œè¿™æ ·ä¸€å®šä¼šæ”¶è·åˆ°ä¸€ä¸ªè‡ªå·±æ»¡æ„çš„ offer ğŸ˜€</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;ä»3æœˆåº•åˆ°4æœˆä¸­æ—¬ï¼Œç»è¿‡åŠä¸ªæœˆçš„é¢è¯•ï¼Œç»ˆäºåœ¨4æœˆ17å·é¡ºåˆ©æ‹¿åˆ°äº†é˜¿é‡Œçš„ offerï¼Œæ„Ÿè°¢è¿™æ®µæ—¶é—´å†…é¢è¯•å®˜ã€å®¶äººå’Œæœ‹å‹çš„å¸®åŠ©å’Œé¼“åŠ±ã€‚ä¸‹é¢æˆ‘ä¼šæ€»ç»“ä¸€äº›ä¼ä¸šå…³æ³¨çš„ç‚¹å’Œé¢è¯•çš„ä¸€äº›æŠ€å·§ã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://www.shenzekun.cn/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="é¢è¯•" scheme="http://www.shenzekun.cn/tags/%E9%9D%A2%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>vueå…¨å®¶æ¡¶ä¸typescriptä½¿ç”¨æ€»ç»“</title>
    <link href="http://www.shenzekun.cn/vue%E5%85%A8%E5%AE%B6%E6%A1%B6%E4%B8%8Etypescript%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html"/>
    <id>http://www.shenzekun.cn/vueå…¨å®¶æ¡¶ä¸typescriptä½¿ç”¨æ€»ç»“.html</id>
    <published>2018-03-01T03:38:31.000Z</published>
    <updated>2018-10-22T02:45:28.182Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>æœ€è¿‘é‡æ„äº†æˆ‘ä¹‹å‰é¡¹ç›® qq éŸ³ä¹ç§»åŠ¨ç«¯ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯ vueï¼Œvuexï¼Œvue-routerï¼Œå’Œ typescriptï¼Œåœ¨è¿™æœŸé—´ï¼Œé‡åˆ°çš„é—®é¢˜è¿˜æ˜¯è›®å¤šçš„ï¼Œä¸€ä¼šå„¿æˆ‘ä¼šæŠŠæˆ‘é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•åˆ—å‡ºæ¥ï¼Œé¿å…å¿˜è®°ã€‚</p></blockquote><a id="more"></a><p>é‡æ„å®Œæˆçš„é¡¹ç›® ===&gt; <a href="https://github.com/shenzekun/vue-qq-music" target="_blank" rel="external">vue-qq-music</a></p><p>TypeScriptä¸Vueå…¨å®¶æ¡¶çš„é…ç½®å¯ä»¥å‚è€ƒä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« ï¼ˆåœ¨è¿™é‡Œç”±è¡·æ„Ÿè°¢ä¸¤ä½ä½œè€…ï¼‰ï¼š</p><ol><li><p><a href="https://segmentfault.com/a/1190000011744210#articleHeader12" target="_blank" rel="external">vue + typescript æ–°é¡¹ç›®èµ·æ‰‹å¼</a></p></li><li><p><a href="https://segmentfault.com/a/1190000011864013" target="_blank" rel="external">Vue2.5+ Typescript å¼•å…¥å…¨é¢æŒ‡å— - Vuexç¯‡</a></p></li></ol><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><p>ä¸ºä»€ä¹ˆæˆ‘è¦å°†<code>TypeScript</code> å’Œ <code>Vue</code> é›†æˆå‘¢ï¼Ÿå› ä¸ºTypeScript æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š</p><ul><li><strong>å¯è¯»æ€§</strong>ã€‚TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œè¿™æ„å‘³ç€ä»–æ”¯æŒæ‰€æœ‰çš„ JavaScript è¯­æ³•ã€‚å¹¶åœ¨æ­¤ä¹‹ä¸Šå¯¹ JavaScript æ·»åŠ äº†ä¸€äº›æ‰©å±•ï¼Œå¦‚interfaceç­‰ã€‚è¿™æ ·ä¼šå¤§å¤§æå‡ä»£ç çš„å¯é˜…è¯»æ€§</li><li><strong>é™æ€ç±»å‹æ£€æŸ¥</strong>ã€‚é™æ€ç±»å‹æ£€æŸ¥å¯ä»¥é¿å…å¾ˆå¤šä¸å¿…è¦çš„é”™è¯¯ï¼Œä¸ç”¨åœ¨è°ƒè¯•çš„æ—¶å€™æ‰å‘ç°é—®é¢˜ã€‚</li><li><strong>ä»£ç æç¤º</strong>ã€‚ts æ­é… vscodeï¼Œä»£ç æç¤ºéå¸¸å‹å¥½</li><li><strong>ä»£ç é‡æ„</strong>ã€‚ä¾‹å¦‚å…¨é¡¹ç›®æ›´æ”¹æŸä¸ªå˜é‡åï¼ˆä¹Ÿå¯ä»¥æ˜¯ç±»åã€æ–¹æ³•åï¼Œç”šè‡³æ˜¯æ–‡ä»¶å[é‡å‘½åæ–‡ä»¶è‡ªåŠ¨ä¿®æ”¹çš„æ˜¯æ•´ä¸ªé¡¹ç›®çš„import]ï¼‰ï¼Œåœ¨JSä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œè€ŒTSå¯ä»¥è½»æ¾åšåˆ°ã€‚çœ‹çœ‹ä¸‹é¢å‘ç”Ÿäº†ä»€ä¹ˆç¥å¥‡çš„äº‹æƒ…ğŸ˜â¬‡ï¸<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-03-01-ts-chonggou.gif" alt=""></li></ul><h2 id="é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"><a href="#é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•" class="headerlink" title="é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•"></a>é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•</h2><h3 id="é—®é¢˜ä¸€"><a href="#é—®é¢˜ä¸€" class="headerlink" title="é—®é¢˜ä¸€"></a>é—®é¢˜ä¸€</h3><p>ts æ— æ³•è¯†åˆ«$ref</p><p><strong>è§£å†³æ–¹æ³•</strong><br>â‘  ç›´æ¥åœ¨ this.$refs.xxx åé¢ç”³æ˜ç±»å‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.$refs.lyricsLines <span class="keyword">as</span> HTMLDivElement;</div></pre></td></tr></table></figure><p>â‘¡ åœ¨<code>export default class xxx extends Vue</code>é‡Œé¢å£°æ˜å…¨éƒ¨çš„$ref çš„ç±»å‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$refs: &#123;</div><div class="line">    <span class="attr">audio</span>: HTMLAudioElement,</div><div class="line">    <span class="attr">lyricsLines</span>: HTMLDivElement</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="é—®é¢˜äºŒ"><a href="#é—®é¢˜äºŒ" class="headerlink" title="é—®é¢˜äºŒ"></a>é—®é¢˜äºŒ</h3><p>ts æ— æ³•è¯†åˆ« require</p><p><strong>è§£å†³æ–¹æ³•</strong></p><p>å®‰è£…å£°æ˜æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add @types/webpack-env -D</div></pre></td></tr></table></figure><h3 id="é—®é¢˜ä¸‰"><a href="#é—®é¢˜ä¸‰" class="headerlink" title="é—®é¢˜ä¸‰"></a>é—®é¢˜ä¸‰</h3><p>è¿è¡Œ<code>npm run build</code> å‡ºç°<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-03-01-044916.png" alt=""></p><p><strong>è§£å†³æ–¹æ³•</strong></p><blockquote><p>You can fix this by <strong>using the most recent beta version</strong> of <code>uglifyjs-webpack-plugin</code>. Our team is working to remove completely the UglifyJsPlugin from within webpack, and instead have it as a standalone plugin.</p><p>If you do <code>yarn add uglifyjs-webpack-plugin@beta --dev</code> or <code>npm install uglifyjs-webpack-plugin@beta --save-dev</code>you should receive the latest beta which does successfully minify es6 syntax. We are hoping to have this released from beta extremely soon, however it should save you from errors for now!</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´å‡çº§ä½ çš„uglifyjs-webpack-pluginç‰ˆæœ¬ï¼š<br><code>yarn add uglifyjs-webpack-plugin@beta --dev</code></p><h3 id="é—®é¢˜å››"><a href="#é—®é¢˜å››" class="headerlink" title="é—®é¢˜å››"></a>é—®é¢˜å››</h3><p><a href="https://github.com/kaorun343/vue-property-decorator" target="_blank" rel="external">vue-property-decorator</a> è£…é¥°å™¨å†™æ³•ä¸å¯¹ã€‚å½“æ—¶æˆ‘æ˜¯è¦æŠŠ mixinsï¼Œæ³¨å…¥åˆ°ç»„ä»¶é‡Œï¼Œæˆ‘å°±è¿™æ ·å†™ï¼š<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-03-01-052833.png" alt=""><br>tsæç¤ºæ‰¾ä¸åˆ° mixinã€‚æˆ‘å°±å¾ˆçº³é—·ä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°åå­—ï¼Œç”±äºå®˜ç½‘vue-property-decoratorä¾‹å­å¤ªå°‘ï¼Œåªå¥½ä¸€æ­¥ä¸€æ­¥æ‘¸ç´¢ğŸ˜‚</p><p><strong>è§£å†³æ–¹æ³•</strong></p><p>æŠŠmixinså†™åœ¨@Componenté‡Œé¢â€¦ï¼Œåƒè¿™æ ·ï¼š</p><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2018-03-01-053215.png" alt=""></p><h2 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><ol><li>å¦‚æœä½ å¼•ç”¨ç¬¬ä¸‰æ–¹æ— ç±»å‹å£°æ˜çš„åº“ï¼Œé‚£å°±éœ€è¦è‡ªå·±ç¼–å†™x.d.tsæ–‡ä»¶</li><li>å¦‚æœå¼•ç”¨ ui ç»„ä»¶çš„æ—¶å€™ï¼Œå¦‚æœæ§åˆ¶å°å‡ºç°<code>Property &#39;$xxx&#39; does not exist on type &#39;App&#39;</code>çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨<code>vue-shim.d.ts</code>å¢åŠ </li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">declare</span> <span class="keyword">module</span> 'vue/types/vue' &#123;</div><div class="line">  <span class="keyword">interface</span> Vue &#123;</div><div class="line">    $xxx: <span class="built_in">any</span>,</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ç»è¿‡å‡ å¤©çš„æŠ˜è…¾ï¼Œç»ˆäºæŠŠé¡¹ç›®é‡æ„å®Œæˆï¼Œæˆ‘ä¸ªäººè®¤ä¸ºåŠ ä¸Š <code>TypeScript</code>ï¼Œç¡®å®æ•ˆç‡æŒºé«˜äº†è®¸å¤šï¼Œä¸è¿‡ <code>Vue+TypeScript</code> è¿˜æ˜¯æ²¡ <code>Angular</code>æ”¯æŒé‚£ä¹ˆå®Œå–„ï¼Œç›¸ä¿¡ä¹‹å vue å¯¹äº ts çš„é›†æˆä¼šæ›´åŠ å®Œå–„ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;æœ€è¿‘é‡æ„äº†æˆ‘ä¹‹å‰é¡¹ç›® qq éŸ³ä¹ç§»åŠ¨ç«¯ï¼Œä½¿ç”¨çš„æŠ€æœ¯æ˜¯ vueï¼Œvuexï¼Œvue-routerï¼Œå’Œ typescriptï¼Œåœ¨è¿™æœŸé—´ï¼Œé‡åˆ°çš„é—®é¢˜è¿˜æ˜¯è›®å¤šçš„ï¼Œä¸€ä¼šå„¿æˆ‘ä¼šæŠŠæˆ‘é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•åˆ—å‡ºæ¥ï¼Œé¿å…å¿˜è®°ã€‚&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="vue" scheme="http://www.shenzekun.cn/tags/vue/"/>
    
      <category term="typescript" scheme="http://www.shenzekun.cn/tags/typescript/"/>
    
  </entry>
  
  <entry>
    <title>nodeç®€å•å®ç°ä¸€ä¸ªæ›´æ”¹å¤´åƒåŠŸèƒ½</title>
    <link href="http://www.shenzekun.cn/node%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%9B%B4%E6%94%B9%E5%A4%B4%E5%83%8F%E5%8A%9F%E8%83%BD.html"/>
    <id>http://www.shenzekun.cn/nodeç®€å•å®ç°ä¸€ä¸ªæ›´æ”¹å¤´åƒåŠŸèƒ½.html</id>
    <published>2017-12-28T02:23:05.000Z</published>
    <updated>2018-10-22T02:44:10.652Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>ä¸€ç›´æƒ³å†™è¿™ç¯‡æ–‡ç« ï¼Œæ— å¥ˆç”±äºè¦è€ƒè¯•çš„åŸå› ï¼Œä¸€ç›´åœ¨å¤ä¹ ï¼Œæ‹–å»¶åˆ°ç°åœ¨æ‰å†™ğŸ¤£ï¼Œä¹‹å‰ç”¨ node çš„ express æ¡†æ¶å†™äº†ä¸ªå°é¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸ªä¸Šä¼ å›¾ç‰‡çš„åŠŸèƒ½ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å¦‚ä½•å®ç°ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯ <strong>ejs</strong>ï¼‰ğŸ“</p></blockquote><a id="more"></a><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol><li><p><strong>é¦–å…ˆ</strong>ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¸Šä¼ å¤´åƒï¼Œæ›´æ–°å¤´åƒçš„æ—¶å€™ï¼Œå°†å¤´åƒä¸Šä¼ åˆ°é¡¹ç›®çš„ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼ˆ<em>æˆ‘æ˜¯å­˜æ”¾åœ¨é¡¹ç›®çš„<code>public/images/img</code>é‡Œé¢</em>ï¼‰ï¼Œå¹¶ä¸”å°†å›¾åƒåé‡å‘½åï¼ˆ<em>å¯ä»¥ä»¥æ—¶é—´æˆ³æ¥å‘½å</em>ï¼‰ã€‚<img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15144357069018.jpg" alt=""></p></li><li><p><strong>åŒæ—¶</strong>å›¾ç‰‡åœ¨é¡¹ç›®çš„è·¯å¾„æ’å…¥åˆ°ç”¨æˆ·è¡¨çš„å½“å‰ç”¨æˆ·çš„ <code>userpicturepath</code> é‡Œé¢</p></li><li>ç„¶åæ›´æ–°ç”¨æˆ·çš„ sessionï¼Œå°†å›¾ç‰‡é‡Œé¢çš„è·¯å¾„èµ‹å€¼ç»™ session çš„é‡Œé¢çš„<code>picture</code>å±æ€§é‡Œé¢</li><li><code>&lt;img&gt;</code> çš„ <code>src</code> è·å–åˆ°å½“å‰ç”¨æˆ·çš„sessioné‡Œé¢çš„ <code>picture</code> çš„å€¼ï¼Œæœ€ååŠ¨æ€åˆ·æ–°é¡µé¢å¤´åƒå°±æ¢æˆäº†ç”¨æˆ·ä¸Šä¼ çš„å¤´åƒäº†</li></ol><h2 id="å®ç°æ•ˆæœ"><a href="#å®ç°æ•ˆæœ" class="headerlink" title="å®ç°æ•ˆæœ"></a>å®ç°æ•ˆæœ</h2><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/2017-12-28-user-upload.gif" alt=""></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ejséƒ¨åˆ†</p><figure class="highlight vbscript-html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">"nav-user-photo"</span> <span class="attr">src</span>=<span class="string">"</span></span></span><span class="vbscript">&lt;%= user.picture.<span class="built_in">replace</span>(/<span class="keyword">public</span>(\/.*)/, <span class="string">"$1"</span>) %&gt;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">alt</span>=<span class="string">"Photo"</span> <span class="attr">style</span>=<span class="string">"height: 40px;"</span>/&gt;</span></span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">name</span>=<span class="string">"fileInfo"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">accept</span>=<span class="string">"image/png,image/jpg"</span> <span class="attr">id</span>=<span class="string">"picUpload"</span> <span class="attr">name</span>=<span class="string">"file"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">class</span>=<span class="string">"btn btn-primary"</span> <span class="attr">id</span>=<span class="string">"modifyPicV"</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div></pre></td></tr></table></figure><p>jséƒ¨åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#modifyPicV'</span>).addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</div><div class="line">    formData.append(<span class="string">"file"</span>,$(<span class="string">"input[name='file']"</span>)[<span class="number">0</span>].files[<span class="number">0</span>]);<span class="comment">//æŠŠæ–‡ä»¶å¯¹è±¡æ’åˆ°formDataå¯¹è±¡ä¸Š</span></div><div class="line">    <span class="built_in">console</span>.log(formData.get(<span class="string">'file'</span>));</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>:<span class="string">'/modifyPic'</span>,</div><div class="line">        <span class="attr">type</span>:<span class="string">'post'</span>,</div><div class="line">        <span class="attr">data</span>: formData,</div><div class="line">        <span class="attr">processData</span>: <span class="literal">false</span>,  <span class="comment">// ä¸å¤„ç†æ•°æ®</span></div><div class="line">        contentType: <span class="literal">false</span>,   <span class="comment">// ä¸è®¾ç½®å†…å®¹ç±»å‹</span></div><div class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            alert(<span class="string">'success'</span>);</div><div class="line">            location.reload();</div><div class="line">        &#125;,</div><div class="line">    &#125;)</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>è·¯ç”±éƒ¨åˆ†ï¼Œä½¿ç”¨<code>formidable</code>ï¼Œè¿™æ˜¯ä¸€ä¸ªNode.jsæ¨¡å—ï¼Œç”¨äºè§£æè¡¨å•æ•°æ®ï¼Œå°¤å…¶æ˜¯æ–‡ä»¶ä¸Šä¼ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">let</span> router = express.Router();</div><div class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="keyword">let</span> &#123;User&#125; = <span class="built_in">require</span>(<span class="string">'../data/db'</span>);</div><div class="line"><span class="keyword">let</span> formidable = <span class="built_in">require</span>(<span class="string">'formidable'</span>);</div><div class="line"><span class="keyword">let</span> cacheFolder = <span class="string">'public/images/'</span>;<span class="comment">//æ”¾ç½®è·¯å¾„</span></div><div class="line">router.post(<span class="string">'/modifyPic'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> userDirPath = cacheFolder + <span class="string">"Img"</span>;</div><div class="line">    <span class="keyword">if</span> (!fs.existsSync(userDirPath)) &#123;</div><div class="line">        fs.mkdirSync(userDirPath);<span class="comment">//åˆ›å»ºç›®å½•</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">let</span> form = <span class="keyword">new</span> formidable.IncomingForm(); <span class="comment">//åˆ›å»ºä¸Šä¼ è¡¨å•</span></div><div class="line">    form.encoding = <span class="string">'utf-8'</span>; <span class="comment">//è®¾ç½®ç¼–ç </span></div><div class="line">    form.uploadDir = userDirPath; <span class="comment">//è®¾ç½®ä¸Šä¼ ç›®å½•</span></div><div class="line">    form.keepExtensions = <span class="literal">true</span>; <span class="comment">//ä¿ç•™åç¼€</span></div><div class="line">    form.maxFieldsSize = <span class="number">2</span> * <span class="number">1024</span> * <span class="number">1024</span>; <span class="comment">//æ–‡ä»¶å¤§å°</span></div><div class="line">    form.type = <span class="literal">true</span>;</div><div class="line">    form.parse(req, <span class="function"><span class="keyword">function</span> (<span class="params">err, fields, files</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (err) &#123;</div><div class="line">            <span class="keyword">return</span> res.json(err);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> extName = <span class="string">''</span>; <span class="comment">//åç¼€å</span></div><div class="line">        <span class="keyword">switch</span> (files.file.type) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="string">'image/pjpeg'</span>:</div><div class="line">                extName = <span class="string">'jpg'</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">'image/jpeg'</span>:</div><div class="line">                extName = <span class="string">'jpg'</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">'image/png'</span>:</div><div class="line">                extName = <span class="string">'png'</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="string">'image/x-png'</span>:</div><div class="line">                extName = <span class="string">'png'</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (extName.length === <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> res.json(&#123;</div><div class="line">                <span class="attr">msg</span>: <span class="string">'åªæ”¯æŒpngå’Œjpgæ ¼å¼å›¾ç‰‡'</span></div><div class="line">            &#125;);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">let</span> avatarName = <span class="string">'/'</span> + <span class="built_in">Date</span>.now() + <span class="string">'.'</span> + extName;</div><div class="line">            <span class="keyword">let</span> newPath = form.uploadDir + avatarName;</div><div class="line">            fs.renameSync(files.file.path, newPath); <span class="comment">//é‡å‘½å</span></div><div class="line">            <span class="built_in">console</span>.log(newPath)</div><div class="line">            <span class="comment">//æ›´æ–°è¡¨</span></div><div class="line">            User.update(&#123;</div><div class="line">                <span class="attr">picture</span>: newPath</div><div class="line">            &#125;, &#123;</div><div class="line">                <span class="attr">where</span>: &#123;</div><div class="line">                    <span class="attr">username</span>: req.session.user.username</div><div class="line">                &#125;</div><div class="line">            &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (data[<span class="number">0</span>] !== <span class="literal">undefined</span>) &#123;</div><div class="line">                    User.findAll(&#123;</div><div class="line">                        <span class="attr">where</span>: &#123;</div><div class="line">                            <span class="attr">username</span>: req.session.user.username</div><div class="line">                        &#125;</div><div class="line">                    &#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">                        <span class="keyword">if</span> (data[<span class="number">0</span>] !== <span class="literal">undefined</span>) &#123;</div><div class="line">                            req.session.user.picture = data[<span class="number">0</span>].dataValues.picture;</div><div class="line">                            res.send(<span class="literal">true</span>);</div><div class="line">                        &#125; <span class="keyword">else</span> &#123;</div><div class="line">                            res.send(<span class="literal">false</span>);</div><div class="line">                        &#125;</div><div class="line">                    &#125;)</div><div class="line">                &#125;</div><div class="line">            &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(err);</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;ä¸€ç›´æƒ³å†™è¿™ç¯‡æ–‡ç« ï¼Œæ— å¥ˆç”±äºè¦è€ƒè¯•çš„åŸå› ï¼Œä¸€ç›´åœ¨å¤ä¹ ï¼Œæ‹–å»¶åˆ°ç°åœ¨æ‰å†™ğŸ¤£ï¼Œä¹‹å‰ç”¨ node çš„ express æ¡†æ¶å†™äº†ä¸ªå°é¡¹ç›®ï¼Œé‡Œé¢æœ‰ä¸ªä¸Šä¼ å›¾ç‰‡çš„åŠŸèƒ½ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹å¦‚ä½•å®ç°ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯ &lt;strong&gt;ejs&lt;/strong&gt;ï¼‰ğŸ“&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="node" scheme="http://www.shenzekun.cn/tags/node/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ webstrom ä¸Šçš„ babel ç¼–è¯‘é—®é¢˜</title>
    <link href="http://www.shenzekun.cn/%E8%A7%A3%E5%86%B3-webstrom-%E4%B8%8A%E7%9A%84-babel-%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98.html"/>
    <id>http://www.shenzekun.cn/è§£å†³-webstrom-ä¸Šçš„-babel-ç¼–è¯‘é—®é¢˜.html</id>
    <published>2017-12-04T23:13:15.000Z</published>
    <updated>2018-10-21T12:51:44.859Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>è¿‘æ—¥ï¼Œåœ¨å†™ ejs æ–‡ä»¶æ—¶ï¼Œæˆ‘å‘ç°ç”¨ vscode æ²¡æœ‰å•¥æç¤ºï¼Œå› æ­¤æ¢æˆ webStrom ï¼Œä½†æ˜¯ç”¨ webStrom å°† es6 ç¼–è¯‘æˆ es5 çš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ğŸ˜­ï¼Œç»è¿‡ä¸€ç•ªæœç´¢ï¼Œ æœ€åç»ˆäºæˆåŠŸè§£å†³ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ğŸ–Š</p></blockquote><a id="more"></a><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><ul><li><p>é¦–å…ˆå»ºç«‹ä¸€ä¸ªæ–°çš„å·¥ç¨‹ï¼Œç‚¹å‡»<strong>è®¾ç½®</strong></p></li><li><p>åœ¨è®¾ç½®é‡Œé¢ï¼ŒæŠŠJavaScript language versionæ”¹æˆ<strong>ECMAScript 6</strong><br><img src="http://upload-images.jianshu.io/upload_images/5308475-384e088e614a106c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p></li><li><p>ç„¶ååœ¨jsæ–‡ä»¶é‡Œå†™ä¸€æ®µES6ä»£ç </p></li><li><p>ç°åœ¨IDEä¼šå‡ºç°ä¸€ä¸ª<code>File watcher</code>æç¤ºæ¡</p></li><li><p>æ­¤æ—¶å…ˆåˆ«ç‚¹Add watcherï¼</p></li><li><p>åœ¨ç»ˆç«¯åˆ‡æ¢åˆ°é¡¹ç›®çš„è·¯å¾„ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</p></li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="keyword">init</span> -y <span class="comment">//package.json</span></div></pre></td></tr></table></figure><ul><li>å®‰è£…babel-cli</li></ul><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> babel-cli</div></pre></td></tr></table></figure><ul><li><p>ç°åœ¨å¯ä»¥å»ç‚¹Add watcherï¼Œç‚¹å®Œä¹‹åä¼šå¼¹å‡ºä¸€ä¸ªæ¡†</p></li><li><p>ä¸‹é¢ç¬¬ä¸‰è¡Œï¼Œ<code>Program</code> é‚£ä¸€é¡¹ï¼Œå¡«</p></li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$ProjectFileDir</span>$<span class="regexp">/node_modules/</span>.bin<span class="regexp">/babel</span></div></pre></td></tr></table></figure><ul><li><p>ç„¶åç‚¹OKï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±ä¼šå‘ç°å·¦è¾¹å¤šå‡ºæ¥ä¸€ä¸ªæ–°æ–‡ä»¶</p></li><li><p>ä½†æ˜¯ç°åœ¨è¿˜æ²¡æå®šï¼ç°åœ¨åªæ˜¯æå®šäº†è‡ªåŠ¨è½¬æ¢çš„åŠŸèƒ½ï¼Œç³»ç»Ÿé»˜è®¤æŠŠES6 ç¼–è¯‘æˆäº†ES6â€¦</p></li><li><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ï¼š</p></li></ul><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> babel-preset-es2015</div></pre></td></tr></table></figure><ul><li><p>å†æ¬¡æ‰“å¼€è®¾ç½®ï¼Œåœ¨æœç´¢æ¡†è¾“å…¥<code>file watchers</code>ï¼Œç‚¹å‡»<code>babel</code></p></li><li><p>åœ¨ Arguments é‡Œé¢å°† <code>env</code> æ”¹ä¸º <code>=es2015</code>,ç‚¹å‡»ok<br><img src="http://upload-images.jianshu.io/upload_images/5308475-cd5fda1fb471aa6b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p></li><li><p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>.babelrc</code>æ–‡ä»¶ï¼ˆå°±æ˜¯babelåœ¨å½“å‰é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼‰ï¼Œå†™ä¸Šï¼š</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"presets"</span>: [</div><div class="line">    <span class="string">"es2015"</span></div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>å®ŒæˆğŸ˜</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;è¿‘æ—¥ï¼Œåœ¨å†™ ejs æ–‡ä»¶æ—¶ï¼Œæˆ‘å‘ç°ç”¨ vscode æ²¡æœ‰å•¥æç¤ºï¼Œå› æ­¤æ¢æˆ webStrom ï¼Œä½†æ˜¯ç”¨ webStrom å°† es6 ç¼–è¯‘æˆ es5 çš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ğŸ˜­ï¼Œç»è¿‡ä¸€ç•ªæœç´¢ï¼Œ æœ€åç»ˆäºæˆåŠŸè§£å†³ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ğŸ–Š&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="å·¥å…·" scheme="http://www.shenzekun.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="babel" scheme="http://www.shenzekun.cn/tags/babel/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³å®‰è£…electronå¡åœ¨node install.js ä¸åŠ¨é—®é¢˜</title>
    <link href="http://www.shenzekun.cn/%E8%A7%A3%E5%86%B3%E5%AE%89%E8%A3%85electron%E5%8D%A1%E5%9C%A8node-install-js-%E4%B8%8D%E5%8A%A8%E9%97%AE%E9%A2%98.html"/>
    <id>http://www.shenzekun.cn/è§£å†³å®‰è£…electronå¡åœ¨node-install-js-ä¸åŠ¨é—®é¢˜.html</id>
    <published>2017-11-12T23:54:57.000Z</published>
    <updated>2018-10-21T12:51:44.853Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>åœ¨å®‰è£…electronçš„æ—¶å€™ï¼Œä¸€ç›´å¡åœ¨node install.jsä¸åŠ¨ğŸ˜­ï¼Œç¿»äº†å¢™ä¹Ÿä¸è¡Œï¼Œäºæ˜¯åœ¨ github ä¸Šæœç´¢ç»ˆäºæ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œä¸ºæ­¤è®°å½•ä¸‹æ¥ğŸ“</p></blockquote><a id="more"></a><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p><code>install.js</code>,é‡Œé¢çš„ä¸‹è½½æ˜¯ä¾èµ–äº<code>electron-download</code>è¿™ä¸ªæ¨¡å—<br><img src="http://upload-images.jianshu.io/upload_images/5308475-6a5758873a75a2c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>æœç´¢<a href="https://github.com/electron-userland/electron-download" target="_blank" rel="external">electron-download</a>å‘ç°ï¼šğŸ‘‡</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-0b73ee9483927679.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥<code>vi ~/.npmrc</code>,åœ¨é‡Œé¢æ·»åŠ </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attr">electron_mirror</span>=<span class="string">"https://npm.taobao.org/mirrors/electron/"</span></div></pre></td></tr></table></figure><p><img src="http://upload-images.jianshu.io/upload_images/5308475-433a4c62d776c545.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>å†è¯•ä¸€æ¬¡<code>npm install electron -g</code>,è¿™æ¬¡å°±æˆåŠŸäº†ğŸ˜„</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;åœ¨å®‰è£…electronçš„æ—¶å€™ï¼Œä¸€ç›´å¡åœ¨node install.jsä¸åŠ¨ğŸ˜­ï¼Œç¿»äº†å¢™ä¹Ÿä¸è¡Œï¼Œäºæ˜¯åœ¨ github ä¸Šæœç´¢ç»ˆäºæ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œä¸ºæ­¤è®°å½•ä¸‹æ¥ğŸ“&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>vscode å‰ç«¯æ’ä»¶æ¨è</title>
    <link href="http://www.shenzekun.cn/vscode-%E5%89%8D%E7%AB%AF%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90.html"/>
    <id>http://www.shenzekun.cn/vscode-å‰ç«¯æ’ä»¶æ¨è.html</id>
    <published>2017-10-30T08:38:04.000Z</published>
    <updated>2018-10-22T02:45:11.041Z</updated>
    
    <content type="html"><![CDATA[<hr><a id="more"></a><h2 id="å¸¸ç”¨æ’ä»¶"><a href="#å¸¸ç”¨æ’ä»¶" class="headerlink" title="å¸¸ç”¨æ’ä»¶"></a>å¸¸ç”¨æ’ä»¶</h2><h3 id="Auto-Close-Tag"><a href="#Auto-Close-Tag" class="headerlink" title="Auto Close Tag"></a>Auto Close Tag</h3><blockquote><p>è‡ªåŠ¨æ·»åŠ HTML / XMLå…³é—­æ ‡ç­¾ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15092830970499.gif" alt=""></p><h3 id="Auto-Rename-Tag"><a href="#Auto-Rename-Tag" class="headerlink" title="Auto Rename Tag"></a>Auto Rename Tag</h3><blockquote><p>è‡ªåŠ¨é‡å‘½åé…å¯¹çš„HTML / XMLæ ‡ç­¾(å¿…å¤‡)</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15092838452118.gif" alt=""></p><h3 id="Beautify"><a href="#Beautify" class="headerlink" title="Beautify"></a>Beautify</h3><blockquote><p>æ ¼å¼åŒ–javascriptï¼ŒJSONï¼ŒCSSï¼ŒSassï¼Œå’ŒHTML</p></blockquote><h3 id="Bootstrap-4-amp-Font-awesome-snippets"><a href="#Bootstrap-4-amp-Font-awesome-snippets" class="headerlink" title="Bootstrap 4 &amp; Font awesome snippets"></a>Bootstrap 4 &amp; Font awesome snippets</h3><blockquote><p>åŒ…å«Bootstrap 4ï¼†Font awesome çš„ä»£ç ç‰‡æ®µ</p></blockquote><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1fkzg3v9bfnj30rk02ymx1.jpg" alt=""></p><h3 id="Bracket-Pair-Colorizer"><a href="#Bracket-Pair-Colorizer" class="headerlink" title="Bracket Pair Colorizer"></a>Bracket Pair Colorizer</h3><blockquote><p>é¢œè‰²è¯†åˆ«åŒ¹é…æ‹¬å·</p></blockquote><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fkzg8ththdj30k40500ss.jpg" alt=""></p><h3 id="Class-autocomplete-for-HTML"><a href="#Class-autocomplete-for-HTML" class="headerlink" title="Class autocomplete for HTML"></a>Class autocomplete for HTML</h3><blockquote><p>æ™ºèƒ½æç¤ºHTML class =â€œâ€å±æ€§ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="Code-Runner"><a href="#Code-Runner" class="headerlink" title="Code Runner"></a>Code Runner</h3><blockquote><p>éå¸¸å¼ºå¤§çš„ä¸€æ¬¾æ’ä»¶ï¼Œèƒ½å¤Ÿè¿è¡Œå¤šç§è¯­è¨€çš„ä»£ç ç‰‡æ®µæˆ–ä»£ç æ–‡ä»¶ï¼šCï¼ŒC ++ï¼ŒJavaï¼ŒJavaScriptï¼ŒPHPï¼ŒPythonï¼ŒPerlï¼ŒRubyï¼ŒGoç­‰ç­‰ï¼Œå®‰è£…å®Œæˆåï¼Œå³ä¸Šè§’å‡ºç°ï¼š<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15092851845587.jpg" alt=""><br>ç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°±å¯ä»¥è¿è¡Œä½ çš„æ–‡ä»¶äº†ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="css-peek"><a href="#css-peek" class="headerlink" title="css peek"></a>css peek</h3><blockquote><p>èƒ½å¤ŸæŸ¥çœ‹CSS IDå’Œç±»çš„å­—ç¬¦ä¸²ä½œä¸ºHTMLæ–‡ä»¶ä¸­ç›¸åº”çš„CSSå®šä¹‰ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼šå°†å…‰æ ‡æ”¾åœ¨classé‡Œé¢çš„å±æ€§ï¼Œå³å‡»<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15092856731870.jpg" alt=""></p><h3 id="Dash"><a href="#Dash" class="headerlink" title="Dash"></a>Dash</h3><blockquote><p>æŸ¥æ–‡æ¡£å¿…å¤‡ï¼Œæ­é… dashï¼ˆä¸è¿‡ä¼¼ä¹åªæœ‰ mac ç‰ˆï¼‰ğŸ˜</p><p><strong>å¿«æ·é”® <code>ctrl + h</code></strong> å®ƒæ ¹æ®ä½ å½“å‰é€‰ä¸­çš„è¯­è¨€æŸ¥æ‰¾ dash é‡Œé¢çš„æ–‡æ¡£</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/navicat-id-increase.gif" alt=""></p><h3 id="Debugger-for-Chrome"><a href="#Debugger-for-Chrome" class="headerlink" title="Debugger for Chrome"></a>Debugger for Chrome</h3><blockquote><p>è®© vscode æ˜ å°„ chrome çš„ debugåŠŸèƒ½ï¼Œä½¿é™æ€é¡µé¢éƒ½å¯ä»¥ç”¨ vscode æ¥æ‰“æ–­ç‚¹è°ƒè¯•</p></blockquote><p><strong>ç®€å•ä½¿ç”¨</strong>ï¼š<a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001470969077294a6455fc9cd1f48b69f82cd05e7fa9b40000" target="_blank" rel="external">æˆ³æˆ‘</a></p><h3 id="Document-This"><a href="#Document-This" class="headerlink" title="Document This"></a>Document This</h3><blockquote><p>æ·»åŠ æ³¨é‡Šå—</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093400730364.jpg" alt=""></p><p><strong>è®¾ç½®ï¼š</strong></p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="string">"docthis.includeAuthorTag"</span>: <span class="keyword">true</span>,<span class="regexp">//</span>å‡ºç°<span class="variable">@Author</span></div><div class="line"><span class="string">"docthis.includeDescriptionTag"</span>: <span class="keyword">true</span>,<span class="regexp">//</span>å‡ºç°<span class="variable">@Description</span></div><div class="line"><span class="string">"docthis.authorName"</span>: <span class="string">"shenzekun"</span>,<span class="regexp">//</span>ä½œè€…åå­—</div></pre></td></tr></table></figure><p><strong>å¿«æ·é”®</strong>ï¼š æŒ‰ä¸¤æ¬¡Ctrl+alt+d</p><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><blockquote><p>EsLintå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥Javascriptç¼–ç¨‹æ—¶çš„è¯­æ³•é”™è¯¯ã€‚æ¯”å¦‚ï¼šåœ¨Javascriptåº”ç”¨ä¸­ï¼Œä½ å¾ˆéš¾æ‰¾åˆ°ä½ æ¼æ³„çš„å˜é‡æˆ–è€…æ–¹æ³•ã€‚EsLintèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ†æJSä»£ç ï¼Œæ‰¾åˆ°bugå¹¶ç¡®ä¿ä¸€å®šç¨‹åº¦çš„JSè¯­æ³•ä¹¦å†™çš„æ­£ç¡®æ€§ã€‚</p></blockquote><p><strong>é…ç½®</strong>ï¼š<a href="https://segmentfault.com/a/1190000010462601" target="_blank" rel="external">æˆ³æˆ‘</a></p><h3 id="Font-awesome-codes-for-html"><a href="#Font-awesome-codes-for-html" class="headerlink" title="Font-awesome codes for html"></a>Font-awesome codes for html</h3><blockquote><p>ç”¨äº html çš„Font-awesomeä»£ç ç‰‡æ®µ</p></blockquote><h3 id="filesize"><a href="#filesize" class="headerlink" title="filesize"></a>filesize</h3><blockquote><p>åœ¨åº•éƒ¨çŠ¶æ€æ æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤§å°ï¼Œç‚¹å‡»åè¿˜å¯ä»¥çœ‹åˆ°è¯¦ç»†åˆ›å»ºã€ä¿®æ”¹æ—¶é—´</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093414045557.jpg" alt=""></p><h3 id="Git-History"><a href="#Git-History" class="headerlink" title="Git History"></a>Git History</h3><blockquote><p>ä»¥å›¾è¡¨çš„å½¢å¼æŸ¥çœ‹gitæ—¥å¿—<br><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093254060028.jpg" alt=""></p></blockquote><p>ä½¿ç”¨ command+shift+pï¼ˆCtrl+shift+pï¼‰ è¾“å…¥git logå°±å¯ä»¥çœ‹åˆ°äº†</p><h3 id="Git-Lens"><a href="#Git-Lens" class="headerlink" title="Git Lens"></a>Git Lens</h3><blockquote><p>git æ—¥å¿—æ’ä»¶</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093256313651.jpg" alt=""></p><h3 id="HTML-CSS-Support"><a href="#HTML-CSS-Support" class="headerlink" title="HTML CSS Support"></a>HTML CSS Support</h3><blockquote><p>åœ¨ html æ ‡ç­¾ä¸Šå†™class æ™ºèƒ½æç¤ºå½“å‰é¡¹ç›®æ‰€æ”¯æŒçš„æ ·å¼ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="HTML-Snippets"><a href="#HTML-Snippets" class="headerlink" title="HTML Snippets"></a>HTML Snippets</h3><blockquote><p>html ä»£ç ç‰‡æ®µï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="htmlhint"><a href="#htmlhint" class="headerlink" title="htmlhint"></a>htmlhint</h3><blockquote><p>htmlä»£ç æ£€æµ‹</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093260108371.jpg" alt=""></p><h3 id="htmltagwrap"><a href="#htmltagwrap" class="headerlink" title="htmltagwrap"></a>htmltagwrap</h3><blockquote><p>å¯ä»¥åœ¨é€‰ä¸­HTMLæ ‡ç­¾ä¸­å¤–é¢å¥—ä¸€å±‚æ ‡ç­¾</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/vscode-htmltagwrap.gif" alt=""></p><p><strong>ä½¿ç”¨</strong>ï¼šé€‰æ‹©ä¸€å¤§æ®µä»£ç ï¼Œç„¶åæŒ‰â€œAlt + Wâ€</p><h3 id="Indenticator"><a href="#Indenticator" class="headerlink" title="Indenticator"></a>Indenticator</h3><blockquote><p>çªå‡ºç›®å‰çš„ç¼©è¿›æ·±åº¦</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/Indenticator.gif" alt=""></p><h3 id="IntelliSense-for-CSS-class-names"><a href="#IntelliSense-for-CSS-class-names" class="headerlink" title="IntelliSense for CSS class names"></a>IntelliSense for CSS class names</h3><p>æ™ºèƒ½æç¤º css çš„ class å</p><h3 id="Image-Preview"><a href="#Image-Preview" class="headerlink" title="Image Preview"></a>Image Preview</h3><blockquote><p>é¼ æ ‡ç§»åˆ°è·¯å¾„é‡Œæ˜¾ç¤ºå›¾åƒé¢„è§ˆ</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093708776977.jpg" alt=""></p><h3 id="JavaScript-ES6-code-snippets"><a href="#JavaScript-ES6-code-snippets" class="headerlink" title="JavaScript (ES6) code snippets"></a>JavaScript (ES6) code snippets</h3><blockquote><p>es6ä»£ç ç‰‡æ®µï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="JavaScript-Snippet-Pack"><a href="#JavaScript-Snippet-Pack" class="headerlink" title="JavaScript Snippet Pack"></a>JavaScript Snippet Pack</h3><blockquote><p>jsä»£ç ç‰‡æ®µï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="jQuery-Code-Snippets"><a href="#jQuery-Code-Snippets" class="headerlink" title="jQuery Code Snippets"></a>jQuery Code Snippets</h3><blockquote><p>jQuery ä»£ç ç‰‡æ®µ</p></blockquote><h3 id="Live-Sass-Compiler"><a href="#Live-Sass-Compiler" class="headerlink" title="Live Sass Compiler"></a>Live Sass Compiler</h3><blockquote><p>å®æ—¶ç¼–è¯‘ sass ,ä¸è¿‡éœ€è¦é…ç½®ï¼Œé™„ä¸Šæˆ‘çš„é…ç½®</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="string">"liveSassCompile.settings.formats"</span>:[</div><div class="line">        <span class="comment">// You can add more</span></div><div class="line">        &#123;</div><div class="line">            <span class="string">"format"</span>: <span class="string">"compressed"</span>,<span class="comment">//å‹ç¼©</span></div><div class="line">            <span class="string">"extensionName"</span>: <span class="string">".min.css"</span>,<span class="comment">//ç¼–è¯‘åç¼€å</span></div><div class="line">            <span class="string">"savePath"</span>: <span class="string">"./css"</span><span class="comment">//ç¼–è¯‘ä¿å­˜çš„è·¯å¾„</span></div><div class="line">        &#125;</div><div class="line">    ],</div></pre></td></tr></table></figure><p><strong>ä½¿ç”¨</strong></p><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093281194279.jpg" alt=""></p><h3 id="markdownlint"><a href="#markdownlint" class="headerlink" title="markdownlint"></a>markdownlint</h3><blockquote><p>markdown è¯­æ³•æ£€æŸ¥</p></blockquote><h3 id="Node-js-Modules-Intellisense"><a href="#Node-js-Modules-Intellisense" class="headerlink" title="Node.js Modules Intellisense"></a>Node.js Modules Intellisense</h3><blockquote><p>å¯ä»¥åœ¨å¯¼å…¥è¯­å¥ä¸­è‡ªåŠ¨å®ŒæˆJavaScript / TypeScriptæ¨¡å—ã€‚</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/vscode-node.gif" alt=""></p><h3 id="npm-Intellisense"><a href="#npm-Intellisense" class="headerlink" title="npm Intellisense"></a>npm Intellisense</h3><blockquote><p>åœ¨å¯¼å…¥è¯­å¥ä¸­è‡ªåŠ¨å¡«å……npmæ¨¡å—,è·ŸNode.js Modules Intellisenseå·®ä¸å¤š</p></blockquote><h3 id="open-in-browser"><a href="#open-in-browser" class="headerlink" title="open in browser"></a>open in browser</h3><blockquote><p>å½“å‰çš„ html æ–‡ä»¶ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œç±»ä¼¼ webstorm çš„é‚£å››ä¸ªå°æµè§ˆå™¨å›¾æ ‡åŠŸèƒ½ï¼Œå‰ææ¡ä»¶html æ–‡ä»¶å¿…é¡»ä¿å­˜</p></blockquote><p><strong>å¿«æ·é”®alt+b</strong></p><h3 id="Output-Colorizer"><a href="#Output-Colorizer" class="headerlink" title="Output Colorizer"></a>Output Colorizer</h3><blockquote><p>è¾“å‡ºæç¤ºçš„æ–‡å­—é¢œè‰²æœ‰ä¸€äº›å˜åŒ–ï¼Œæ–¹ä¾¿è·å–å…³é”®ä¿¡æ¯</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093384952721.jpg" alt=""></p><h3 id="Path-Intellisense"><a href="#Path-Intellisense" class="headerlink" title="Path Intellisense"></a>Path Intellisense</h3><blockquote><p>è·¯å¾„è‡ªåŠ¨è¡¥å…¨ï¼ˆå¿…å¤‡ï¼‰</p></blockquote><h3 id="Prettier"><a href="#Prettier" class="headerlink" title="Prettier"></a>Prettier</h3><blockquote><p>æ ¼å¼åŒ–JavaScript / TypeScript / CSS ã€‚</p></blockquote><h3 id="Project-Manager"><a href="#Project-Manager" class="headerlink" title="Project Manager"></a>Project Manager</h3><blockquote><p>å·¥ç¨‹é¡¹ç›®è¿‡å¤šæ—¶ï¼Œshift+cmd+p(shift+ctrl+p) ç„¶åè¾“å…¥projectï¼Œç¬¬ä¸€æ¬¡é€‰æ‹©edit Projectç¼–è¾‘è‡ªå·±çš„å·¥ç¨‹é¡¹ç›®ï¼Œä¹‹åå°±å¯ä»¥ç›´æ¥é€‰æ‹©openæ‰“å¼€ä½ çš„é¡¹ç›®</p></blockquote><h3 id="Sass"><a href="#Sass" class="headerlink" title="Sass"></a>Sass</h3><blockquote><p>å†™ sass å¿…å¤‡</p></blockquote><h3 id="vscode-faker"><a href="#vscode-faker" class="headerlink" title="vscode-faker"></a>vscode-faker</h3><blockquote><p>ç”Ÿæˆå‡æ•°æ®ï¼Œåœ°å€ï¼Œç”µè¯ï¼Œå›¾ç‰‡ç­‰ç­‰</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/vscode-faker.gif" alt=""></p><p>æ‰“å¼€æ–¹å¼shift+cmd+p(shift+ctrl+p)) ç„¶åè¾“å…¥faker å°±å¯ä»¥é€‰æ‹©äº†</p><h3 id="Quokka-js"><a href="#Quokka-js" class="headerlink" title="Quokka.js"></a>Quokka.js</h3><blockquote><p>å®æ—¶è§‚çœ‹ javascript çš„å˜é‡çš„å˜åŒ–</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/vscode-quokka.gif" alt=""></p><p><strong>ä½¿ç”¨</strong>ï¼šå…ˆshift+cmd+p ï¼ˆctrl+shift+pï¼‰è¾“å…¥ quokka é€‰æ‹© new javascript å°±è¡Œäº†ğŸ˜€</p><h3 id="Regex-Previewer"><a href="#Regex-Previewer" class="headerlink" title="Regex Previewer"></a>Regex Previewer</h3><blockquote><p>æµ‹è¯•æ­£åˆ™çš„æ’ä»¶</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093406954760.jpg" alt=""></p><h3 id="TSLint"><a href="#TSLint" class="headerlink" title="TSLint"></a>TSLint</h3><blockquote><p>æ£€æŸ¥typescriptç¼–ç¨‹æ—¶çš„è¯­æ³•é”™è¯¯è¯­æ³•</p></blockquote><h3 id="TypeScript-Importer"><a href="#TypeScript-Importer" class="headerlink" title="TypeScript Importer"></a>TypeScript Importer</h3><blockquote><p>è‡ªåŠ¨æœç´¢å·¥ä½œåŒºæ–‡ä»¶ä¸­çš„TypeScriptå®šä¹‰ï¼Œå¹¶å°†æ‰€æœ‰å·²çŸ¥ç¬¦å·ä½œä¸ºå®Œæˆé¡¹ï¼Œä»¥å…è®¸ä»£ç å®Œæˆã€‚</p></blockquote><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/vscode-ts.gif" alt=""></p><h3 id="vscode-icons"><a href="#vscode-icons" class="headerlink" title="vscode-icons"></a>vscode-icons</h3><blockquote><p>ç›®å½•æ ‘å›¾æ ‡</p></blockquote><h2 id="react"><a href="#react" class="headerlink" title="react"></a>react</h2><h3 id="React-Native-React-Redux-snippets-for-es6-es7"><a href="#React-Native-React-Redux-snippets-for-es6-es7" class="headerlink" title="React-Native/React/Redux snippets for es6/es7"></a>React-Native/React/Redux snippets for es6/es7</h3><blockquote><p>reactä»£ç ç‰‡æ®µï¼Œä¸‹è½½äººæ•°è¶…å¤šğŸ˜‰</p></blockquote><h3 id="react-beautify"><a href="#react-beautify" class="headerlink" title="react-beautify"></a>react-beautify</h3><blockquote><p>æ ¼å¼åŒ– javascript, JSX, typescript, TSX æ–‡ä»¶</p></blockquote><h2 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h2><h3 id="vetur"><a href="#vetur" class="headerlink" title="vetur"></a>vetur</h3><blockquote><p>è¯­æ³•é«˜äº®ã€æ™ºèƒ½æ„ŸçŸ¥</p></blockquote><h3 id="VueHelper"><a href="#VueHelper" class="headerlink" title="VueHelper"></a>VueHelper</h3><blockquote><p>vueä»£ç ç‰‡æ®µ</p></blockquote><h3 id="Vue-TypeScript-Snippets"><a href="#Vue-TypeScript-Snippets" class="headerlink" title="Vue TypeScript Snippets"></a>Vue TypeScript Snippets</h3><blockquote><p>vueçš„ typescript ä»£ç ç‰‡æ®µ</p></blockquote><h3 id="Vue-2-Snippets"><a href="#Vue-2-Snippets" class="headerlink" title="Vue 2 Snippets"></a>Vue 2 Snippets</h3><blockquote><p>vue 2ä»£ç ç‰‡æ®µ</p></blockquote><h2 id="ä¸»é¢˜"><a href="#ä¸»é¢˜" class="headerlink" title="ä¸»é¢˜"></a>ä¸»é¢˜</h2><h3 id="Dracula-Official"><a href="#Dracula-Official" class="headerlink" title="Dracula Official"></a>Dracula Official</h3><p>ä¸ªäººæœ€å–œæ¬¢çš„ä¸»é¢˜ï¼Œåº”è¯¥æ˜¯æœ€å¥½çœ‹çš„ä¸»é¢˜ä¹‹ä¸€ğŸ˜€</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fkzxpf6tevj30l206s74d.jpg" alt=""></p><h3 id="One-Dark-Pro"><a href="#One-Dark-Pro" class="headerlink" title="One Dark Pro"></a>One Dark Pro</h3><p>è¿™ä¸ªä¹Ÿå¥½çœ‹ğŸ˜„</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fkzy0i7rutj30py06yglq.jpg" alt=""></p><h3 id="Atom-One-Dark-Theme-è€ç‰ˆæœ¬"><a href="#Atom-One-Dark-Theme-è€ç‰ˆæœ¬" class="headerlink" title="Atom One Dark Theme(è€ç‰ˆæœ¬)"></a>Atom One Dark Theme(è€ç‰ˆæœ¬)</h3><p>è¿™ä¸ªå’Œ One Dark Proå·®ä¸å¤šï¼ŒOne Dark Proé¢œè‰²ä¸»é¢˜å¤šä¸€äº›</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1fkzxzhoqkrj30l6062jrl.jpg" alt=""></p><h3 id="One-Monokai-Theme"><a href="#One-Monokai-Theme" class="headerlink" title="One Monokai Theme"></a>One Monokai Theme</h3><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093223049049.jpg" alt=""></p><h3 id="Eva-Theme"><a href="#Eva-Theme" class="headerlink" title="Eva Theme"></a>Eva Theme</h3><p>é‡Œé¢åŒ…å«é»‘è‰²å’Œç™½è‰²ä¸»é¢˜ï¼Œè¿™ä¸ªç™½è‰²ä¸»é¢˜æ„Ÿè§‰æŒºå¥½çœ‹çš„</p><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093223899355.jpg" alt=""></p><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093223624542.jpg" alt=""></p><h3 id="Boxy-Theme-Kit"><a href="#Boxy-Theme-Kit" class="headerlink" title="Boxy Theme Kit"></a>Boxy Theme Kit</h3><p><img src="https://blog-1257878287.cos.ap-chengdu.myqcloud.com/15093265368328.jpg" alt=""></p><hr><p>å¤§å®¶è¿˜æœ‰ä»€ä¹ˆå¥½çš„æ’ä»¶æ¨èå—ğŸ¤“</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="æ’ä»¶" scheme="http://www.shenzekun.cn/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>js çš„ call ä¸ apply é€Ÿåº¦å¯¹æ¯”</title>
    <link href="http://www.shenzekun.cn/js-%E7%9A%84-call-%E4%B8%8E-apply-%E9%80%9F%E5%BA%A6%E5%AF%B9%E6%AF%94.html"/>
    <id>http://www.shenzekun.cn/js-çš„-call-ä¸-apply-é€Ÿåº¦å¯¹æ¯”.html</id>
    <published>2017-10-20T04:37:57.000Z</published>
    <updated>2018-10-21T12:51:44.841Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>æœ€è¿‘åœ¨çœ‹ underscore çš„æºç æ—¶å‘ç°ï¼Œä½œè€…å¥½å¤šéƒ½ç”¨ callï¼Œè€Œç”¨ apply æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™æ®µï¼šğŸ‘‡</p></blockquote><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> optimizeCb = <span class="function"><span class="keyword">function</span>(<span class="params">func, context, argCount</span>) </span>&#123;</div><div class="line">  <span class="comment">// å¦‚æœæ²¡æœ‰æŒ‡å®š this æŒ‡å‘ï¼Œåˆ™è¿”å›åŸå‡½æ•°</span></div><div class="line">  <span class="keyword">if</span> (context === <span class="keyword">void</span> <span class="number">0</span>) <span class="keyword">return</span> func;</div><div class="line"></div><div class="line">  <span class="keyword">switch</span> (argCount == <span class="literal">null</span> ? <span class="number">3</span> : argCount) &#123;</div><div class="line">    <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> func.call(context, value);</div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">value, other</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> func.call(context, value, other);</div><div class="line">      &#125;;</div><div class="line"></div><div class="line">    <span class="comment">// å¦‚æœæœ‰æŒ‡å®š thisï¼Œä½†æ²¡æœ‰ä¼ å…¥ argCount å‚æ•°</span></div><div class="line">    <span class="comment">// åˆ™æ‰§è¡Œä»¥ä¸‹ case</span></div><div class="line">    <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">value, index, collection</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> func.call(context, value, index, collection);</div><div class="line">      &#125;;</div><div class="line">    <span class="keyword">case</span> <span class="number">4</span>:</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">accumulator, value, index, collection</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> func.call(context, accumulator, value, index, collection);</div><div class="line">      &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure><p>æ—¢ç„¶ call å’Œ apply éƒ½èƒ½ç”¨ï¼Œé‚£ä¸ºä»€ä¹ˆåªç”¨ call è€Œä¸ç”¨ apply å‘¢ï¼Ÿ<br>ç»è¿‡ç½‘ä¸Šçš„æœç´¢å‘ç°ï¼Œ<strong>call æ¯” apply é€Ÿåº¦å¿«</strong>ï¼Œåœ¨ consoleè¿è¡Œå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params">a,b</span>) </span>&#123;&#125;</div><div class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="built_in">console</span>.time(<span class="string">"call"</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</div><div class="line">  x.call(<span class="keyword">this</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"call"</span>);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.time(<span class="string">"apply"</span>);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">1000000</span>; j++) &#123;</div><div class="line">  x.apply(<span class="keyword">this</span>, a);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"apply"</span>);</div></pre></td></tr></table></figure><p>consoleçš„ç»“æœï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-2f25092ecb658b17.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>å¯ä»¥å‘ç° call æ¯” apply å¿«äº†10ms å·¦å³ï¼Œé‚£æ˜¯ä»€ä¹ˆåŸå› é€ æˆè¿™æ ·çš„å‘¢ï¼Ÿ<br><strong>å› ä¸º apply è¿è¡Œå‰è¦å¯¹ä½œä¸ºå‚æ•°çš„æ•°ç»„è¿›è¡Œä¸€ç³»åˆ—æ£€éªŒå’Œæ·±æ‹·è´ï¼Œè€Œ call åˆ™æ²¡æœ‰</strong><br>æˆ‘ä»¬çœ‹ä¸€ä¸‹ ECMAScript æ˜¯æ€ä¹ˆå†™çš„ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-40f7c9167b3a338d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-93025d076479f624.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ç”±ECMAScript æ ‡å‡†å‘ç° apply æ¯” call çš„æ­¥éª¤å¤šäº†å¥½å¤šï¼Œè¿™å°±æ˜¯ call æ¯” apply æ‰§è¡Œé€Ÿåº¦å¿«çš„åŸå› ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;æœ€è¿‘åœ¨çœ‹ underscore çš„æºç æ—¶å‘ç°ï¼Œä½œè€…å¥½å¤šéƒ½ç”¨ callï¼Œè€Œç”¨ apply æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™æ®µï¼šğŸ‘‡&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Vimium å¸¸ç”¨å¿«æ·é”®</title>
    <link href="http://www.shenzekun.cn/Vimium-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE.html"/>
    <id>http://www.shenzekun.cn/Vimium-å¸¸ç”¨å¿«æ·é”®.html</id>
    <published>2017-10-19T10:38:39.000Z</published>
    <updated>2018-10-21T12:51:44.844Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>æœ€è¿‘ç”¨äº†è°·æ­Œæ’ä»¶vimiumï¼Œå‘ç°éå¸¸å¥½ç”¨ï¼Œç‰›é€¼ç¥å™¨ä¸€ä¸ªğŸ˜„ï¼Œä¸‹é¢è®°ä¸€ä¸‹å¸¸ç”¨çš„å¿«æ·é”®</p></blockquote><a id="more"></a><p>æ‰“å¼€ <code>vimium help</code> å¿«æ·é”® shift+/</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-8ae19353b092aa14.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><ul><li><strong>j</strong>: å‘ä¸‹ç§»åŠ¨</li><li><strong>k</strong>: å‘ä¸Šç§»åŠ¨</li><li><strong>h</strong>: å·¦ç§»</li><li><strong>l</strong> : å³ç§»</li><li><strong>d</strong>:å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªé¡µé¢</li><li><strong>u</strong>:å‘ä¸Šç§»åŠ¨ä¸€ä¸ªé¡µé¢</li><li><strong>gg</strong> : ç§»åˆ°é¡µé¢é¡¶éƒ¨</li><li><strong>G</strong> : ç§»åˆ°é¡µé¢åº•éƒ¨</li><li><strong>x</strong>:å…³é—­å½“å‰æ ‡ç­¾é¡µ</li><li><strong>X</strong>:æ¢å¤å…³é—­çš„æ ‡ç­¾é¡µ</li><li><strong>H</strong>:å›åˆ°ä¸Šä¸€ä¸ªå†å²é¡µé¢</li><li><strong>L</strong>:å›åˆ°ä¸‹ä¸€ä¸ªå†å²é¡µé¢</li><li><strong>J</strong>ï¼šè·³åˆ°å·¦è¾¹æ ‡ç­¾é¡µ</li><li><strong>K</strong>ï¼šè·³åˆ°å³è¾¹æ ‡ç­¾é¡µ</li><li><strong>r</strong> : åˆ·æ–°</li><li><strong>gs</strong> : æŸ¥çœ‹ç½‘é¡µæºç </li><li><strong>yy</strong> : å¤åˆ¶å½“å‰é¡µé¢çš„ url åˆ°å‰ªåˆ‡æ¿</li><li><strong>f</strong>: åœ¨å½“å‰æ ‡ç­¾é¡µä¸­æ‰“å¼€é¡µé¢æœ‰çš„é“¾æ¥</li><li><strong>F</strong>:åœ¨æ–°æ ‡ç­¾é¡µä¸­é¡µé¢æœ‰çš„é“¾æ¥</li><li><strong>p</strong>:åœ¨å½“å‰æ ‡ç­¾é¡µä¸­æ‰“å¼€å‰ªåˆ‡æ¿ä¸­çš„é“¾æ¥</li><li><strong>P</strong>:åœ¨æ–°çš„æ ‡ç­¾é¡µä¸­æ‰“å¼€å‰ªåˆ‡æ¿ä¸­çš„é“¾æ¥</li><li><strong>t</strong>:åˆ›å»ºæ–°çš„æ ‡ç­¾é¡µ(ä¹Ÿå°±æ˜¯ command+t)</li><li><strong>T</strong>ï¼šæœç´¢æ‰“å¼€çš„æ ‡ç­¾é¡µ</li><li><strong>b</strong> : æ‰“å¼€ä¹¦ç­¾</li><li><strong>B</strong> : åœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€ä¹¦ç­¾</li><li><strong>/</strong> :æŸ¥æ‰¾(ç›¸å½“äº command+f)</li><li><strong>i</strong> : è¿›å…¥è¾“å…¥æ¨¡å¼(è¿™ä¸ªä¸çŸ¥é“è¦å¹²å˜›çš„( âŠ™oâŠ™?))</li><li><strong>esc</strong>ï¼šé€€å‡ºè¾“å…¥æ¨¡å¼</li><li><strong>o</strong> : åœ¨å½“å‰é¡µé¢ä¸­æ‰“å¼€URLï¼Œä¹¦ç­¾å’Œå†å²è®°å½•</li><li><strong>O</strong> : åœ¨æ–°æ ‡ç­¾é¡µé¢ä¸­æ‰“å¼€URLï¼Œä¹¦ç­¾å’Œå†å²è®°å½•</li><li><strong>gi</strong>ï¼šå°†ç„¦ç‚¹é›†ä¸­åˆ°ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;æœ€è¿‘ç”¨äº†è°·æ­Œæ’ä»¶vimiumï¼Œå‘ç°éå¸¸å¥½ç”¨ï¼Œç‰›é€¼ç¥å™¨ä¸€ä¸ªğŸ˜„ï¼Œä¸‹é¢è®°ä¸€ä¸‹å¸¸ç”¨çš„å¿«æ·é”®&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/categories/%E6%8A%80%E5%B7%A7/"/>
    
    
      <category term="æŠ€å·§" scheme="http://www.shenzekun.cn/tags/%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å­¦ä¹ ç¬”è®°ä¹‹è§‚å¯Ÿè€…æ¨¡å¼</title>
    <link href="http://www.shenzekun.cn/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B9%8B%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html"/>
    <id>http://www.shenzekun.cn/å‰ç«¯å­¦ä¹ ç¬”è®°ä¹‹è§‚å¯Ÿè€…æ¨¡å¼.html</id>
    <published>2017-10-05T07:05:59.000Z</published>
    <updated>2018-10-21T12:51:44.848Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿç§°â€å‘å¸ƒ-è®¢é˜…â€æ¨¡å¼,å®ƒçš„ä½œç”¨å°±æ˜¯å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè‡ªåŠ¨åˆ·æ–°å¯¹è±¡çŠ¶æ€</p></blockquote><a id="more"></a><p>ä¸¾ä¸ªç”Ÿæ´»æ¯”è¾ƒå¸¸è§å¸¸è§çš„ä¾‹å­,æ¯”å¦‚ä½ å»é¢è¯•ä¹‹åï¼Œé¢è¯•å®˜çœ‹ä½ è¡¨ç°ä¸é”™ï¼Œæœ€åä¼šè·Ÿä½ è¦è”ç³»æ–¹å¼ï¼Œä»¥ä¾¿ä¹‹åå¯ä»¥è”ç³»ä½ ã€‚åœ¨è¿™è§’è‰²æ‰®æ¼”å½“ä¸­ï¼Œä½ å°±æ˜¯â€œè®¢é˜…è€…â€ï¼Œé¢è¯•å®˜å°±æ˜¯â€œå‘å¸ƒè€…â€ã€‚</p><p>é‚£ä¹ˆå‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯å’‹å®ç°çš„å‘¢ï¼Ÿ</p><p><strong>æ€è·¯</strong></p><ol><li>ç»™å®šä¸€ä¸ªå‘å¸ƒè€…</li><li>é¢è¯•è€…å°†è”ç³»æ–¹å¼ç»™å‘å¸ƒè€…</li><li>å‘å¸ƒè€…çš„ä¸€ä¸ªåˆ—è¡¨æœ‰å„ç§èŒä½(webç«¯çš„ï¼Œjava çš„)ï¼Œé‡Œé¢è®°è½½å›è°ƒå‡½æ•°ä»¥ä¾¿é€šçŸ¥è¿™äº›é¢è¯•è€…</li><li>æœ€åå‘å¸ƒæ¶ˆæ¯çš„æ—¶å€™ï¼Œä¼šéå†è¿™ä¸ªåˆ—è¡¨çš„èŒä½çš„å›è°ƒå‡½æ•°ï¼Œå‘Šè¯‰é¢è¯•è€…é¢è¯•è¿™ä¸ªèŒä½æ˜¯é€šè¿‡è¿˜æ˜¯ä¸é€šè¿‡</li><li>å¦‚æœé¢è¯•è€…å–æ¶ˆäº†è®¢é˜…ï¼Œé‚£ä¹ˆå°†å›è°ƒå‡½æ•°å’Œä¹‹å‰çš„å›è°ƒå‡½æ•°ä½œå¯¹æ¯”ï¼Œå¦‚æœç›¸ç­‰ï¼Œå°±å°†è¿™ä¸ªé¢è¯•è€…çš„ä¸Šç­é€šçŸ¥å»æ‰</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Event = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> events = &#123;&#125;; <span class="comment">//å‘å¸ƒè€…</span></div><div class="line"></div><div class="line">  <span class="comment">//subscribeä¹Ÿå°±æ˜¯è®¢é˜…ï¼Œpost ä»£è¡¨é¢è¯•è€…è¦é¢çš„èŒä½ï¼Œcallbackè¡¨ç¤ºä¸ºå›è°ƒå‡½æ•°</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">post, callback</span>) </span>&#123;</div><div class="line">    events[post] = events[post] || []; <span class="comment">//å‘å¸ƒè€…çš„åˆ—è¡¨é‡Œæœ‰æ²¡æœ‰è¿™ä¸ªé¢è¯•èŒä½ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„</span></div><div class="line">    events[post].push(callback);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//publish è¡¨ç¤ºå‘å¸ƒ</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">publish</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> post = <span class="built_in">Array</span>.prototype.shift.call(<span class="built_in">arguments</span>); <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šâ€œé”®â€</span></div><div class="line">    <span class="keyword">var</span> fns = events[post]; <span class="comment">//è®¾ç½®ç¼“å­˜ï¼Œæé«˜æ€§èƒ½</span></div><div class="line">    <span class="keyword">if</span> (!fns) &#123; <span class="comment">//å¦‚æœå‘å¸ƒè€…çš„åˆ—è¡¨é‡Œæ²¡æœ‰è¿™ä¸ªèŒä½ï¼Œé‚£è‚¯å®šæ˜¯ä¸èƒ½å‘å¸ƒ</span></div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; fns.length; i++) &#123; <span class="comment">//éå†å½“å‰çš„èŒä½çš„æ•°ç»„é‡Œæœ‰å‡ ä¸ªé¢è¯•è€…</span></div><div class="line">      fns[i].apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//unsubscribe è¡¨ç¤ºå–æ¶ˆè®¢é˜…</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">unsubscribe</span>(<span class="params">post, fn</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> fns = events[post];</div><div class="line">    <span class="keyword">if</span> (fns) &#123;</div><div class="line">      <span class="keyword">if</span> (fn) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = fns.length; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">          <span class="keyword">if</span> (fns[i] === fn) fns.splice(i, <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">      &#125; <span class="keyword">else</span> &#123;<span class="comment">//å¦‚æœæ²¡æœ‰ä¼ å…¥fnå›è°ƒå‡½æ•°ï¼Œç›´æ¥å–æ¶ˆpostå¯¹åº”æ¶ˆæ¯çš„æ‰€æœ‰è®¢é˜…</span></div><div class="line">        fns = [];</div><div class="line">      &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//å¦‚æœå‘å¸ƒè€…çš„åˆ—è¡¨æ²¡æœ‰è¿™ä¸ªèŒä½ï¼Œç›´æ¥ return</span></div><div class="line">      <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">subscribe</span>: subscribe,</div><div class="line">    <span class="attr">publish</span>: publish,</div><div class="line">    <span class="attr">unsubscribe</span>: unsubscribe</div><div class="line">  &#125;;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fn1 = <span class="function"><span class="keyword">function</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"å°æ˜ä½ é€šè¿‡äº†é¢è¯•ï¼Œä¸Šç­æ—¶é—´ï¼š"</span> + time);</div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span>(<span class="params">time</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"å°å¼ºä½ é€šè¿‡äº†é¢è¯•ï¼Œä¸Šç­æ—¶é—´ï¼š"</span> + time);</div><div class="line">&#125;;</div><div class="line"><span class="comment">//å°æ˜å°†è”ç³»æ–¹å¼ç»™äº†å‘å¸ƒè€…ï¼Œå‘å¸ƒè€…ï¼ˆhrï¼‰è§‰å¾—å°æ˜ä¸é”™ï¼Œå¯ä»¥é€šè¿‡ï¼Œäºæ˜¯åœ¨åˆ—è¡¨(java)é‡Œå†™ä¸‹äº†ä¸€äº›å›è°ƒå‡½æ•°ï¼Œåˆ°æ—¶å€™å‘å¸ƒçš„æ—¶å€™å°†ä¸Šç­æ—¶é—´å‘Šè¯‰å°æ˜</span></div><div class="line">Event.subscribe(<span class="string">"java"</span>, fn1);</div><div class="line"><span class="comment">//å°å¼ºä¹Ÿè®¢é˜…äº†</span></div><div class="line">Event.subscribe(<span class="string">"java"</span>, fn2);</div><div class="line"></div><div class="line">Event.publish(<span class="string">"java"</span>, <span class="string">"2017-10-01"</span>);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">/*è¾“å‡º:</span></div><div class="line">å°æ˜ä½ é€šè¿‡äº†é¢è¯•ï¼Œä¸Šç­æ—¶é—´ï¼š2017-10-01</div><div class="line">å°å¼ºä½ é€šè¿‡äº†é¢è¯•ï¼Œä¸Šç­æ—¶é—´ï¼š2017-10-01</div><div class="line">*/</div><div class="line"></div><div class="line">Event.unsubscribe(<span class="string">"java"</span>, fn1);<span class="comment">//åˆ é™¤å°æ˜çš„ä¸Šç­é€šçŸ¥</span></div><div class="line">Event.publish(<span class="string">"java"</span>, <span class="string">"2017-10-01"</span>);</div><div class="line"></div><div class="line"><span class="comment">/*è¾“å‡ºï¼š</span></div><div class="line">å°å¼ºä½ é€šè¿‡äº†é¢è¯•ï¼Œä¸Šç­æ—¶é—´ï¼š2017-10-01</div><div class="line">*/</div></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html" target="_blank" rel="external">Javascriptå¼‚æ­¥ç¼–ç¨‹çš„4ç§æ–¹æ³•</a><br><a href="https://segmentfault.com/a/1190000007248460" target="_blank" rel="external">jsè®¾è®¡æ¨¡å¼ç¬”è®° - è§‚å¯Ÿè€…æ¨¡å¼</a></p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿç§°â€å‘å¸ƒ-è®¢é˜…â€æ¨¡å¼,å®ƒçš„ä½œç”¨å°±æ˜¯å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè‡ªåŠ¨åˆ·æ–°å¯¹è±¡çŠ¶æ€&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="è®¾è®¡æ¨¡å¼" scheme="http://www.shenzekun.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>reactä½¿ç”¨æ€»ç»“</title>
    <link href="http://www.shenzekun.cn/react-%E4%BD%BF%E7%94%A8-%E6%80%BB%E7%BB%93.html"/>
    <id>http://www.shenzekun.cn/react-ä½¿ç”¨-æ€»ç»“.html</id>
    <published>2017-10-02T07:34:31.000Z</published>
    <updated>2018-10-21T12:51:44.843Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>æœ€è¿‘å­¦äº†ä¸€äº› react å’Œes6 çš„ä¸€äº›çŸ¥è¯†ï¼Œå¹¶ä¸”ä½¿ç”¨ react å†™äº†ä¸€ä¸ª TodoList é¡¹ç›®===&gt;<a href="http://shenzekun.cn/R-Todo/build/index.html" target="_blank" rel="external">é¢„è§ˆ</a> &amp;&amp; <a href="https://github.com/shenzekun/R-Todo" target="_blank" rel="external">æºç </a> æ„Ÿè§‰å­¦çš„æŒºå¤šçš„ï¼Œå¹¶ä¸”é‡åˆ°çš„å‘ä¹Ÿä¸å°‘ğŸ˜‚ï¼Œè¯´å®è¯ï¼Œä¸€å¼€å§‹å­¦ react çœ‹åˆ° jsx è¯­æ³•æœ‰ç‚¹ä¸é€‚åº”ï¼Œè¯´å¥½çš„ç»“æ„å’Œè¡Œä¸ºåˆ†ç¦»å‘¢ğŸ˜ï¼Œä¸è¿‡éšç€é€šè¿‡ä¸€ä¸ªé¡¹ç›®çš„å®Œæˆï¼Œæ¸æ¸æ˜ç™½äº†è¿™ä¹ˆå†™çš„å¥½å¤„</p></blockquote><a id="more"></a><h3 id="å¥½å¤„"><a href="#å¥½å¤„" class="headerlink" title="å¥½å¤„"></a><strong>å¥½å¤„</strong></h3><ul><li>è‡ªå®šä¹‰æ ‡ç­¾</li><li>ç»“æ„æ¸…æ™°</li><li>ä»£ç æ¨¡å—åŒ–</li><li>æ›´åŠ è¯­ä¹‰åŒ–</li></ul><h3 id="ä¸è¿‡ä¹Ÿæœ‰ç¼ºç‚¹"><a href="#ä¸è¿‡ä¹Ÿæœ‰ç¼ºç‚¹" class="headerlink" title="ä¸è¿‡ä¹Ÿæœ‰ç¼ºç‚¹"></a><strong>ä¸è¿‡ä¹Ÿæœ‰ç¼ºç‚¹</strong></h3><ul><li>æµè§ˆå™¨ä¸æ”¯æŒè¿™è¯­æ³•</li><li>å¿…é¡»é€šè¿‡ä¸€å¤§å †å·¥å…·æ¥è½¬æ¢</li></ul><h3 id="ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹"><a href="#ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹" class="headerlink" title="ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹"></a>ä¸€äº›éœ€è¦æ³¨æ„çš„ç‚¹</h3><p><strong>1. reactå£°æ˜ç»„ä»¶æ—¶ï¼Œç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´å¦‚</strong>ğŸ‘‰ï¼š<code>&lt;Todo /&gt;</code><br><strong>2. æ¯ä¸ªæ ‡ç­¾å¿…é¡»é—­åˆ,å› ä¸ºé‡‡ç”¨çš„ js+xml å†™æ³•ï¼Œå¦‚</strong>ğŸ‘‰: <code>&lt;input /&gt;</code><br><strong>3. ç»„ä»¶çš„è¿”å›å€¼åªèƒ½æœ‰ä¸€ä¸ªé¡¶å±‚å…ƒç´ ï¼Œå¦‚</strong>ğŸ‘‡ï¼š</p><p>ä¸‹é¢æ˜¯é”™è¯¯çš„ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">render () &#123;</div><div class="line">  return (</div><div class="line">    &lt;div&gt;1&lt;/div&gt;</div><div class="line">    &lt;div&gt;2&lt;/div&gt;</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¿…é¡»è¿™æ ·</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">render () &#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>4. returnåé¢è¦åŠ ä¸€ä¸ªæ‹¬å·,ç›®çš„æ˜¯é˜²æ­¢ JavaScript ä»£ç åœ¨è§£ææ—¶è‡ªåŠ¨åœ¨æ¢è¡Œå¤„æ·»åŠ åˆ†å·</strong>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> renderSquare(i) &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">          <span class="xml"><span class="tag">&lt;<span class="name">Todo</span> /&gt;</span></span></div><div class="line">        );</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>5. render()é‡Œé¢ä¸èƒ½å†™ class,for,è€Œæ˜¯è¦å†™æˆ<code>className</code>å’Œ<code>htmlFor</code>,å› ä¸º class ï¼Œfor æ˜¯ javascript çš„å…³é”®å­—ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ï¼Œå¦‚</strong>ï¼š</p><p>ä¸‹é¢æ˜¯é”™è¯¯çš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=â€œxxxâ€&gt;</div></pre></td></tr></table></figure><p>è€Œæ˜¯è¦å†™ classNameï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="selector-tag">div</span> className=<span class="string">"xxx"</span>&gt;</div></pre></td></tr></table></figure><p><strong>6. ä¸è¦ç›´æ¥æ›´æ–°çŠ¶æ€ï¼Œå¦‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.state.comment = <span class="string">'Hello'</span>;</div></pre></td></tr></table></figure><p>æ­¤ä»£ç <strong>ä¸ä¼š</strong>é‡æ–°æ¸²æŸ“ç»„ä»¶çš„ï¼Œä¹‹å‰å°±è¿™ä¹ˆå†™ï¼Œå•¥ååº”ä¹Ÿæ²¡æœ‰ğŸ˜‚ï¼Œåº”è¯¥è¦ç”¨<code>setState()</code>:ğŸ‘‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.setState(&#123;<span class="attr">comment</span>: <span class="string">'Hello'</span>&#125;);</div></pre></td></tr></table></figure><p>ï¼ˆ<strong>æ³¨æ„ï¼ï¼</strong>ï¼šæ„é€ å‡½æ•°ï¼ˆconstructorï¼‰æ˜¯å”¯ä¸€èƒ½å¤Ÿåˆå§‹åŒ– this.state çš„åœ°æ–¹ã€‚ï¼‰</p><p><strong>7. ä½¿ç”¨<code>style</code></strong></p><p>æˆ‘ä»¬åœ¨ html å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div style=<span class="string">"background-color:red;"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div></pre></td></tr></table></figure><p>ä½†æ˜¯åœ¨ jsx é‡Œé¢å´ä¸èƒ½è¿™ä¹ˆå†™ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªèŠ±æ‹¬å·åŒ…è£¹ï¼Œå¹¶ä¸”é‡Œé¢ä¸èƒ½å†™<code>-</code>ï¼Œè¦ç”¨é©¼å³°å½¢å¼å†™ï¼Œå¦‚ä¸Šé¢çš„ <code>background-color</code>å†™æˆ<code>backgroundColor</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;div style=&#123;&#123;<span class="attr">backgroundColor</span>: <span class="string">'red'</span>&#125;&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div></pre></td></tr></table></figure><p><strong>8. å…³äº setState</strong></p><p>setStateæ–¹æ³•ç”¨äºæ›´æ–°å½“å‰ç»„ä»¶çš„stateçŠ¶æ€å€¼ï¼Œä½†è°ƒç”¨è¿™ä¸ªæ–¹æ³•åï¼Œstateå¹¶ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯åœ¨renderæ–¹æ³•è°ƒç”¨åæ‰ä¼šæ›´æ–°</p><h3 id="react-ç‰¹ç‚¹"><a href="#react-ç‰¹ç‚¹" class="headerlink" title="react ç‰¹ç‚¹"></a>react ç‰¹ç‚¹</h3><ol><li><strong>è™šæ‹ŸDOM</strong>: Reactæ˜¯ä»¥æ•°æ®é©±åŠ¨çš„ï¼Œæ¯æ¬¡æ•°æ®å˜åŒ–Reactéƒ½ä¼šæ‰«ææ•´ä¸ªè™šæ‹ŸDOMæ ‘ï¼Œè‡ªåŠ¨è®¡ç®—ä¸ä¸Šæ¬¡è™šæ‹ŸDOMçš„å·®å¼‚å˜åŒ–ï¼Œç„¶åé’ˆå¯¹éœ€è¦å˜åŒ–çš„éƒ¨åˆ†è¿›è¡Œå®é™…çš„æµè§ˆå™¨DOMæ›´æ–°ã€‚</li><li><strong>ç»„ä»¶åŒ–ï¼š</strong> Reactå¯ä»¥ä»åŠŸèƒ½è§’åº¦åˆ’åˆ†ï¼Œå°†UIåˆ†è§£æˆä¸åŒç»„ä»¶ï¼Œå„ç»„ä»¶éƒ½ç‹¬ç«‹å°è£…ï¼Œæ•´ä¸ªUIæ˜¯ç”±ä¸€ä¸ªä¸ªå°ç»„ä»¶æ„æˆçš„ä¸€ä¸ªå¤§ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶åªå…³ç³»è‡ªèº«çš„é€»è¾‘ï¼Œå½¼æ­¤ç‹¬ç«‹ï¼ˆæ¯”å¦‚ä½ æœ‰ä¸ªæŒ‰é’®ï¼Œå¾ˆå¤šé¡µé¢éƒ½æœ‰è¿™ä¸ªæŒ‰é’®ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠè¿™ä¸ªæŒ‰é’®å°è£…æˆè¯¥ç»„ä»¶ï¼‰ã€‚</li><li><strong>å•é¡¹æ•°æ®æµ</strong>ï¼šReactåªæœ‰å•å‘æ•°æ®æµåŠ¨-ä»çˆ¶èŠ‚ç‚¹ä¼ é€’åˆ°å­èŠ‚ç‚¹</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;æœ€è¿‘å­¦äº†ä¸€äº› react å’Œes6 çš„ä¸€äº›çŸ¥è¯†ï¼Œå¹¶ä¸”ä½¿ç”¨ react å†™äº†ä¸€ä¸ª TodoList é¡¹ç›®===&amp;gt;&lt;a href=&quot;http://shenzekun.cn/R-Todo/build/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é¢„è§ˆ&lt;/a&gt; &amp;amp;&amp;amp; &lt;a href=&quot;https://github.com/shenzekun/R-Todo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æºç &lt;/a&gt; æ„Ÿè§‰å­¦çš„æŒºå¤šçš„ï¼Œå¹¶ä¸”é‡åˆ°çš„å‘ä¹Ÿä¸å°‘ğŸ˜‚ï¼Œè¯´å®è¯ï¼Œä¸€å¼€å§‹å­¦ react çœ‹åˆ° jsx è¯­æ³•æœ‰ç‚¹ä¸é€‚åº”ï¼Œè¯´å¥½çš„ç»“æ„å’Œè¡Œä¸ºåˆ†ç¦»å‘¢ğŸ˜ï¼Œä¸è¿‡éšç€é€šè¿‡ä¸€ä¸ªé¡¹ç›®çš„å®Œæˆï¼Œæ¸æ¸æ˜ç™½äº†è¿™ä¹ˆå†™çš„å¥½å¤„&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="react" scheme="http://www.shenzekun.cn/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³ webstrom sass æ³¨é‡Šä¸­æ–‡å‡ºé”™é—®é¢˜</title>
    <link href="http://www.shenzekun.cn/%E8%A7%A3%E5%86%B3-webstrom-sass-%E6%B3%A8%E9%87%8A%E4%B8%AD%E6%96%87%E5%87%BA%E9%94%99%E9%97%AE%E9%A2%98.html"/>
    <id>http://www.shenzekun.cn/è§£å†³-webstrom-sass-æ³¨é‡Šä¸­æ–‡å‡ºé”™é—®é¢˜.html</id>
    <published>2017-09-26T23:28:12.000Z</published>
    <updated>2018-10-21T12:51:44.832Z</updated>
    
    <content type="html"><![CDATA[<hr><blockquote><p>æœ€è¿‘ç”¨ webStrom å†™ sassï¼Œæ„Ÿè§‰éå¸¸å¥½ç”¨ï¼Œè‡ªåŠ¨å¸®ä½ ç¼–è¯‘å¥½ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨å†™ä¸­æ–‡æ³¨é‡Šçš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé”™</p></blockquote><a id="more"></a><p>å¦‚ä¸‹ï¼š<br><img src="http://upload-images.jianshu.io/upload_images/5308475-95a3cfb869f7aa79.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œè¯´åœ¨ scss æ–‡ä»¶å¤´éƒ¨åŠ ä¸Šï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">charset</span> <span class="string">"utf-8"</span>;</div></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæˆ‘è¯•äº†ä¸€ä¸‹å¹¶ä¸ç®¡ç”¨ï¼ï¼ğŸ˜‚</p><p>ç»è¿‡ä¸€ç•ªæŸ¥æ‰¾ç»ˆäºæ‰¾åˆ°æ–¹æ³•ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼š</p><p>â‘  åœ¨ scss æ–‡ä»¶çš„å¤´éƒ¨åŠ ä¸Šï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">charset</span> <span class="string">"utf-8"</span>;</div></pre></td></tr></table></figure><p>â‘¡ æ‰“å¼€<code>/Library/Ruby/Gems/2.0.0/gems/sass-3.4.22/lib/sass/engine.rb</code>(mac)</p><p>åœ¨ require åé¢åŠ ä¸Šï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Encoding<span class="selector-class">.default_external</span> = Encoding.find(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure><p>å¦‚ä¸‹ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/5308475-26193cd4cb4b4746.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p><p>ç°åœ¨å°±å¯ä»¥æ”¯æŒä¸­æ–‡æ³¨é‡Šäº†ğŸ˜€</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;blockquote&gt;&lt;p&gt;æœ€è¿‘ç”¨ webStrom å†™ sassï¼Œæ„Ÿè§‰éå¸¸å¥½ç”¨ï¼Œè‡ªåŠ¨å¸®ä½ ç¼–è¯‘å¥½ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨å†™ä¸­æ–‡æ³¨é‡Šçš„æ—¶å€™ï¼Œå°±ä¼šå‡ºé”™&lt;/p&gt;&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="css" scheme="http://www.shenzekun.cn/tags/css/"/>
    
      <category term="å·¥å…·" scheme="http://www.shenzekun.cn/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯å°é¡¹ç›®ä¹‹åœ¨çº¿ä¾¿åˆ©è´´</title>
    <link href="http://www.shenzekun.cn/%E5%89%8D%E7%AB%AF%E5%B0%8F%E9%A1%B9%E7%9B%AE%E4%B9%8B%E5%9C%A8%E7%BA%BF%E4%BE%BF%E5%88%A9%E8%B4%B4.html"/>
    <id>http://www.shenzekun.cn/å‰ç«¯å°é¡¹ç›®ä¹‹åœ¨çº¿ä¾¿åˆ©è´´.html</id>
    <published>2017-09-13T12:48:33.000Z</published>
    <updated>2018-10-21T12:51:44.852Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š"><a href="#å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š" class="headerlink" title="å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š"></a>å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</h2><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fjhulxqhxuj31kw0j976o.jpg" alt=""></p><p>ç•Œé¢å¯èƒ½ä¸æ˜¯å¤ªå¥½çœ‹ğŸ˜ï¼Œè€ƒè™‘åˆ°å®¹å™¨çš„é«˜åº¦ä¼šè¢«æ‹‰é•¿ï¼Œå› æ­¤æ²¡æœ‰ç”¨å›¾ç‰‡åšèƒŒæ™¯ã€‚</p><h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><p><a href="http://note.shenzekun.cn" target="_blank" rel="external">ä¾¿åˆ©è´´</a></p><a id="more"></a><h2 id="æ¶‰åŠçš„çŸ¥è¯†ç‚¹"><a href="#æ¶‰åŠçš„çŸ¥è¯†ç‚¹" class="headerlink" title="æ¶‰åŠçš„çŸ¥è¯†ç‚¹"></a>æ¶‰åŠçš„çŸ¥è¯†ç‚¹</h2><ul><li><code>sass</code>(css é¢„ç¼–è¯‘å™¨)</li><li><code>webpack</code>ï¼ˆè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œå®ç°LESS,CSS,JSç¼–è¯‘å’Œå‹ç¼©ä»£ç ï¼‰</li><li><code>express</code> (åŸºäº Node.js å¹³å°çš„ web å¼€å‘æ¡†æ¶)</li><li><code>html+css</code></li><li><code>Node.js</code>(åŸºäº Chrome V8 å¼•æ“çš„ JavaScript è¿è¡Œç¯å¢ƒ)</li><li><code>jQuery</code>(ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´çš„JavaScriptæ¡†æ¶)</li><li><code>sequelize</code>(Nodeçš„ORMæ¡†æ¶Sequelizeæ“ä½œæ•°æ®åº“)</li><li><code>passport</code>(å®ç°ç¬¬ä¸‰æ–¹ç™»å½•)</li></ul><h2 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h2><ul><li>githubç¬¬ä¸‰æ–¹ç™»å½•</li><li>æ·»åŠ ç¬”è®°ï¼ˆç™»å½•æˆåŠŸåï¼‰</li><li>åˆ é™¤ç¬”è®°</li><li>ä¿®æ”¹ç¬”è®°</li><li>ä½¿ç”¨ markdown(ç±»ä¼¼ typroa)</li><li>ç¬”è®°æ‹–æ‹½</li></ul><h2 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h2><ul><li><strong>å¿…è¦æ¡ä»¶</strong>ï¼šå·²ç»å®‰è£…å¥½äº†nodeç¯å¢ƒ,è¿˜æ²¡å®‰è£…çš„å¯ä»¥å»<a href="http://nodejs.cn/download/" target="_blank" rel="external">node</a>ä¸­æ–‡å®˜ç½‘ä¸‹è½½</li><li><strong>å°æç¤º</strong>ï¼šå¦‚æœç”¨ npm ä¸‹è½½æ„Ÿè§‰æ…¢çš„è¯ï¼Œå¯ä»¥ä¸‹è½½ä¸€ä¸ªåˆ‡æ¢é•œåƒæºçš„å·¥å…·<code>nrm</code>,åœ¨ç»ˆç«¯è¾“å…¥ï¼š</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="selector-tag">i</span> nrm -g</div></pre></td></tr></table></figure><p>ç„¶åå¦‚ä¸‹æ“ä½œï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fjhuypg0s6j31co0v6439.jpg" alt=""></p><p><strong>å¼€å§‹ï¼ï¼</strong></p><p>1.<strong>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåå­—è‡ªå·±èµ·ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°è‡ªå·±æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå¦‚</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> (æ–‡ä»¶å¤¹åç§°)</div></pre></td></tr></table></figure><p>2.<strong>ç”Ÿæˆ <code>package.json</code></strong></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">npm</span> init -y</div></pre></td></tr></table></figure><p>3.<strong>å®‰è£… express</strong></p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i <span class="built_in">express</span> --<span class="built_in">save</span></div></pre></td></tr></table></figure><p>4.<strong>å®‰è£… <a href="http://www.expressjs.com.cn/starter/generator.html" target="_blank" rel="external">expressç”Ÿæˆå™¨</a>:</strong></p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install <span class="built_in">express</span>-generator --<span class="built_in">save</span></div></pre></td></tr></table></figure><p>5.<strong>ç”Ÿæˆ ejs æ¨¡æ¿ï¼ˆç±»ä¼¼ jsp çš„å†™æ³•ï¼‰</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">express <span class="_">-f</span> <span class="_">-e</span></div><div class="line">npm i</div></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fjhv8g9apcj30au0cqq30.jpg" alt=""></p><p>å…¶ä¸­<code>public</code>ç”¨æ¥å­˜æ”¾ç¼–è¯‘åçš„jsæ–‡ä»¶ä»¥åŠç¼–è¯‘å¥½çš„cssæ–‡ä»¶ç­‰ï¼Œ<code>routes</code>ç”¨æ¥å­˜æ”¾å¤„ç† ajax çš„è¯·æ±‚æ–‡ä»¶ï¼Œviewså°±æ˜¯å­˜æ”¾è§†å›¾æ–‡ä»¶<br>ç„¶åæ–°å»º database å’Œ srcï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fji1acleqhj30ba0k0mxg.jpg" alt=""></p><p>å…¶ä¸­ src/js é‡Œé¢ app ä»£è¡¨ä¸åŒé¡µé¢çš„å…¥å£æ–‡ä»¶ï¼Œlib å°±æ˜¯ä¸€äº›å¸¸ç”¨çš„åº“ï¼Œmod å°±æ˜¯ä½ å†™çš„ä¸€äº›æ¨¡å—ï¼Œdatabase ç”¨æ¥å­˜æ”¾æ•°æ®åº“æ•°æ®çš„</p><p>6.<strong>è¾“å…¥ï¼š</strong></p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">npm</span> start</div></pre></td></tr></table></figure><p>å¦‚æœæœ‰å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fjhvfxr6p3j319i0qq42h.jpg" alt=""></p><p>å‡ºç°è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºä½ æ²¡æœ‰ä¸‹è½½æ¨¡å—ï¼Œåªéœ€åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm <span class="selector-tag">i</span> (æ¨¡å—å) --save</div></pre></td></tr></table></figure><p>å°±å¯ä»¥äº†</p><p>7.<strong>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<code>localhost:3000</code></strong><br>å‡ºç°ä¸‹é¢è¿™æ ·å°±è¯´æ˜æˆåŠŸäº†ï¼š</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fjhvj4lwtgj316a0cgjrb.jpg" alt=""></p><p>8.<strong>æ¥ä¸‹æ¥å®‰è£…webpackå’Œç›¸å…³ä¾èµ–</strong></p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm i webpack --<span class="built_in">save</span>-dev</div><div class="line">npm i --<span class="built_in">save</span> css-loader <span class="built_in">style</span>-loader <span class="built_in">express</span>-session <span class="built_in">express</span>-flash node-sass passport sass sass-loader sequelize sqlite3 extract-text-webpack-plugin onchange</div></pre></td></tr></table></figure><p>9.<strong>åœ¨ src é‡Œå»ºä¸€ä¸ª webpack.config.jsï¼Œé…ç½®å¦‚ä¸‹</strong>ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>);</div><div class="line">    </div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    entry: path.join(__dirname, <span class="string">"js/app/index"</span>),</div><div class="line">    output: &#123;</div><div class="line">        path: path.join(__dirname, <span class="string">"../public"</span>),</div><div class="line">        filename: <span class="string">"js/index.js"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="keyword">module</span>: &#123;</div><div class="line">        rules: [&#123;</div><div class="line">            test: <span class="regexp">/(\.scss)$/</span>,</div><div class="line">            use: ExtractTextPlugin.extract(&#123;</div><div class="line">                fallback: <span class="string">"style-loader"</span>,</div><div class="line">                use: [<span class="string">"css-loader"</span>, <span class="string">"sass-loader"</span>]</div><div class="line">            &#125;) <span class="comment">//æŠŠ css æŠ½ç¦»å‡ºæ¥ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶</span></div><div class="line">        &#125;]</div><div class="line">    &#125;,</div><div class="line">    resolve: &#123;</div><div class="line">        alias: &#123;</div><div class="line">            jquery: path.join(__dirname, <span class="string">"js/lib/jquery-2.0.3.min.js"</span>),</div><div class="line">            mod: path.join(__dirname, <span class="string">"js/mod"</span>),</div><div class="line">            sass: path.join(__dirname, <span class="string">"sass"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    plugins: [</div><div class="line">        <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">            $: <span class="string">"jquery"</span></div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> ExtractTextPlugin(<span class="string">"css/index.css"</span>),</div><div class="line">        <span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</div><div class="line">            options: &#123;</div><div class="line">                css: [</div><div class="line">                    autoprefixer(),</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> webpack.optimize.UglifyJsPlugin(&#123;</div><div class="line">            compress: &#123;</div><div class="line">                warnings: <span class="literal">false</span></div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¯´æ˜</p><ul><li>entry:å…¥å£æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ src/js/appé‡Œé¢çš„index.js,å…¶ä¸­__dirnameæ˜¯è·å¾—å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å®Œæ•´ç›®å½•å</li><li>output:è¾“å‡ºç¼–è¯‘åçš„æ–‡ä»¶ index.jsï¼Œè¾“å‡ºåˆ° public/js é‡Œé¢</li><li>moduleï¼šé…ç½®Loadersï¼Œé€šè¿‡ä½¿ç”¨ä¸åŒçš„loaderï¼Œwebpackæœ‰èƒ½åŠ›è°ƒç”¨å¤–éƒ¨çš„è„šæœ¬æˆ–å·¥å…·ï¼Œå®ç°å¯¹ä¸åŒæ ¼å¼çš„æ–‡ä»¶çš„å¤„ç†ï¼Œæ¯”å¦‚è¯´åˆ†æè½¬æ¢scssä¸ºcssï¼Œæˆ–è€…æŠŠä¸‹ä¸€ä»£çš„JSæ–‡ä»¶</li><li>resolve.aliasï¼šè®¾ç½®æ¨¡å—åˆ«åï¼Œä¾¿äºæˆ‘ä»¬æ›´æ–¹ä¾¿å¼•ç”¨ï¼Œæ¯”å¦‚è¯´æˆ‘åœ¨ jsé‡Œé¢çš„æ–‡ä»¶éœ€è¦ jqueryï¼Œåœ¨é‡Œé¢çš„æ–‡ä»¶ç›´æ¥å†™ require(â€œjqueryâ€) å°±è¡Œäº†</li><li><p>å¦‚æœæ‰€æœ‰æ–‡ä»¶éƒ½éœ€è¦ jquery,é‚£ä¹ˆç›´æ¥åœ¨ pluginsé‡Œé¢å†™æˆè¿™æ ·ï¼š</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fji3f1ap39j30ik03cglh.jpg" alt=""></p><p>å°±ä¸éœ€è¦ require äº†</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1fji3x6gw2oj30i005q748.jpg" alt=""><br>è¿™ä¸ªæ˜¯å‹ç¼©æ–‡ä»¶çš„</p></li></ul><p>10.<strong>åœ¨ package.json ä¸­ï¼Œå¢åŠ å¦‚ä¸‹ä¸¤æ¡ï¼š</strong><br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1fji3q8xe7tj310i068js2.jpg" alt=""></p><p>å†™æˆè¿™æ ·ï¼Œä½ åœ¨ç»ˆç«¯å°±å¯ä»¥å†™æˆ<code>npm run webpack</code> æ¥ç¼–è¯‘æ–‡ä»¶ï¼Œ<br><code>npm run watch</code>æ¥ç›‘æ§ src é‡Œé¢çš„ js å’Œ scss çš„å˜åŒ–ï¼Œåªè¦ä¸€ä¿®æ”¹ï¼Œè¿›è¡Œç¼–è¯‘ï¼Œæé«˜äº†æ•ˆç‡</p><p>11.<strong>æµ‹è¯•</strong></p><p>ä½ å¯ä»¥è¯•è¯•åœ¨ js é‡Œé¢çš„ index.jså†™ç‚¹ä¸œè¥¿ï¼Œç„¶å npm run webpackï¼Œå¦‚æœç»ˆç«¯æ˜¾ç¤ºæ˜¯è¿™æ ·ï¼š</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1fji43t9rgej31b20ug0y0.jpg" alt=""></p><p>å°±è¯æ˜æˆåŠŸäº†</p><h2 id="é¡¹ç›®æ€è·¯"><a href="#é¡¹ç›®æ€è·¯" class="headerlink" title="é¡¹ç›®æ€è·¯"></a>é¡¹ç›®æ€è·¯</h2><p>é€»è¾‘æ¯”è¾ƒç®€å•</p><ol><li>é¦–å…ˆç”¨æˆ·å¿…é¡»ç™»å½•æ‰èƒ½æ·»åŠ ç¬”è®°ï¼Œå½“ç”¨æˆ·å¤±ç„¦çš„æ—¶å€™ï¼Œå°†æ•°æ®æ’å…¥æ•°æ®åº“ï¼Œå¹¶ä¸”é‡æ–°å¸ƒå±€ï¼ˆç€‘å¸ƒæµï¼‰</li><li>ç”¨æˆ·ä¸èƒ½æ›´æ”¹å…¶ä»–ç”¨æˆ·çš„ç¬”è®°ï¼Œé™¤äº†ç®¡ç†å‘˜ğŸ˜„</li><li>ç”¨æˆ·æ›´æ–°ç¬”è®°ä¹‹åï¼Œæ•°æ®åº“çš„æ•°æ®é‡æ–°æ›´æ–°ï¼Œé‡æ–°å¸ƒå±€</li><li>ç”¨æˆ·å¯ä»¥åˆ é™¤ç¬”è®°ï¼Œæ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œé‡æ–°å¸ƒå±€</li><li>ç”¨æˆ·å¯ä»¥æ‹–æ‹½ç¬”è®°ï¼Œä½†ä¸å°†ä½ç½®å­˜å…¥æ•°æ®åº“</li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>html,csså°±ä¸è®²äº†ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„<a href="https://github.com/shenzekun/sticky-note" target="_blank" rel="external">æºç </a>,ä¸»è¦è®² jsã€‚</p><p>1.<strong>ç€‘å¸ƒæµçš„å®ç°</strong></p><p>æ€è·¯ï¼šï¼ˆå‰ææ˜¯å¿…é¡»ç»å¯¹å®šä½ï¼‰</p><blockquote><ol><li>è·å–å…ƒç´ çš„å®½åº¦</li><li>é€šè¿‡çª—å£çš„å®½åº¦é™¤ä»¥å…ƒç´ çš„å®½åº¦æ¥è·å–åˆ—æ•°</li><li>åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„æ¥è·å–æ¯åˆ—çš„é«˜åº¦ï¼Œåˆå§‹åŒ–æ¯åˆ—çš„é«˜åº¦ä¸º0</li><li>éå†å…ƒç´ ï¼Œè·å–æœ€å°çš„çš„åˆ—æ•°çš„é«˜åº¦å’Œç´¢å¼•ï¼Œå¯¹å½“å‰å…ƒç´ è¿›è¡Œå®šä½ï¼Œåˆ—æ•°é«˜åº¦åŠ ç­‰äºå½“å‰å…ƒç´ çš„é«˜åº¦</li></ol></blockquote><p>çŸ¥é“æ€è·¯åï¼Œä»£ç å¾ˆå¿«å°±å†™å‡ºæ¥äº†ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> WaterFall = (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">var</span> $ct, $items;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">render</span><span class="params">($c)</span> </span>&#123;</div><div class="line">            $ct = $c;</div><div class="line">            $items = $ct.children();</div><div class="line">            <span class="keyword">var</span> nodeWidth = $items.outerWidth(<span class="keyword">true</span>),</div><div class="line">                windowHeight = $(window).height(),</div><div class="line">                colNum = parseInt($(window).width() / nodeWidth), <span class="comment">//è·å–åˆ—æ•°</span></div><div class="line">                colSumHeight = []; <span class="comment">//è·å–æ¯åˆ—çš„é«˜åº¦</span></div><div class="line">            <span class="comment">//å¯¹æ¯åˆ—çš„é«˜åº¦è¿›è¡Œåˆå§‹åŒ–</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; colNum; i++) &#123;</div><div class="line">                colSumHeight[i] = <span class="number">0</span>;</div><div class="line">            &#125;</div><div class="line">            $items.each(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">                <span class="keyword">var</span> $current = $(this);</div><div class="line">                <span class="keyword">var</span> index = <span class="number">0</span>,</div><div class="line">                    minSumHeight = colSumHeight[<span class="number">0</span>];</div><div class="line">                <span class="comment">//è·å–æœ€å°çš„çš„åˆ—æ•°çš„é«˜åº¦å’Œç´¢å¼•</span></div><div class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; colSumHeight.length; i++) &#123;</div><div class="line">                    <span class="keyword">if</span> (minSumHeight &gt; colSumHeight[i]) &#123;</div><div class="line">                        index = i;</div><div class="line">                        minSumHeight = colSumHeight[i];</div><div class="line">                    &#125;</div><div class="line">                &#125;            </div><div class="line">                <span class="comment">//æ”¹å˜çª—å£é«˜åº¦</span></div><div class="line">                <span class="keyword">if</span> (windowHeight &lt; minSumHeight) &#123;</div><div class="line">                    $(<span class="string">"body"</span>).height(minSumHeight);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    $(<span class="string">"body"</span>).height(windowHeight - <span class="number">72</span>);</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//å¯¹å½“å‰å…ƒç´ è¿›è¡Œå®šä½</span></div><div class="line">                $current.animate(&#123;</div><div class="line">                    left: nodeWidth * index,</div><div class="line">                    top: minSumHeight</div><div class="line">                &#125;, <span class="number">5</span>);</div><div class="line">                colSumHeight[index] += $current.outerHeight(<span class="keyword">true</span>);</div><div class="line">    </div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//å½“çª—å£å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°æ¸²æŸ“</span></div><div class="line">        $(window).on(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line">            render($ct);</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">            init: render</div><div class="line">        &#125;</div><div class="line">    &#125;)();</div></pre></td></tr></table></figure><p>2.<strong>ç¬”è®°çš„æ‹–æ‹½</strong></p><p>æˆ‘ä»¬å…ˆçœ‹ä¸ªå›¾</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fji626ceeuj30r40p8t96.jpg" alt=""></p><p>å› æ­¤ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è®¾ç½®ç¬”è®°çš„ç§»åŠ¨</span></div><div class="line">      $noteHead.on(<span class="string">'mousedown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">          <span class="keyword">var</span> evtX = e.pageX - $note.offset().left, <span class="comment">//evtX è®¡ç®—äº‹ä»¶çš„è§¦å‘ç‚¹åœ¨ dialogå†…éƒ¨åˆ° dialog çš„å·¦è¾¹ç¼˜çš„è·ç¦»</span></div><div class="line">              evtY = e.pageY - $note.offset().top;</div><div class="line">          $note.addClass(<span class="string">'draggable'</span>).data(<span class="string">'evtPos'</span>, &#123;</div><div class="line">              <span class="attr">x</span>: evtX,</div><div class="line">              <span class="attr">y</span>: evtY</div><div class="line">          &#125;); <span class="comment">//æŠŠäº‹ä»¶åˆ° dialog è¾¹ç¼˜çš„è·ç¦»ä¿å­˜ä¸‹æ¥</span></div><div class="line">      &#125;).on(<span class="string">'mouseup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          $note.removeClass(<span class="string">'draggable'</span>).removeData(<span class="string">'pos'</span>);</div><div class="line">      &#125;);</div><div class="line">    </div><div class="line">      $(<span class="string">'body'</span>).on(<span class="string">'mousemove'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">          $(<span class="string">'.draggable'</span>).length &amp;&amp; $(<span class="string">'.draggable'</span>).offset(&#123;</div><div class="line">              <span class="attr">top</span>: e.pageY - $(<span class="string">'.draggable'</span>).data(<span class="string">'evtPos'</span>).y, <span class="comment">// å½“ç”¨æˆ·é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œæ ¹æ®é¼ æ ‡çš„ä½ç½®å’Œå‰é¢ä¿å­˜çš„è·ç¦»ï¼Œè®¡ç®— dialog çš„ç»å¯¹ä½ç½®</span></div><div class="line">              left: e.pageX - $(<span class="string">'.draggable'</span>).data(<span class="string">'evtPos'</span>).x</div><div class="line">          &#125;);</div><div class="line">      &#125;);</div><div class="line">  &#125;,</div></pre></td></tr></table></figure><p>3.<strong>æç¤ºæ¨¡å—</strong></p><p>è¿™ä¸ªæ¯”è¾ƒå®¹æ˜“ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* </span></div><div class="line">æç¤ºæ¨¡å—</div><div class="line">å‚æ•°ï¼šçŠ¶æ€(1è¡¨ç¤ºæˆåŠŸï¼Œ0è¡¨ç¤ºå¤±è´¥)ï¼Œæ¶ˆæ¯ï¼Œå‡ºç°æ—¶é—´(ä¸å†™é»˜è®¤æ˜¯1s)</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toast</span>(<span class="params">status, msg, time</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.status = status;</div><div class="line">    <span class="keyword">this</span>.msg = msg;</div><div class="line">    <span class="keyword">this</span>.time = time || <span class="number">1000</span>;</div><div class="line">    <span class="keyword">this</span>.createToast();</div><div class="line">    <span class="keyword">this</span>.showToast();</div><div class="line">&#125;</div><div class="line"></div><div class="line">toast.prototype = &#123;</div><div class="line">    <span class="attr">createToast</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.status === <span class="number">1</span>) &#123;</div><div class="line">            <span class="keyword">var</span> html = <span class="string">'&lt;div class="toast"&gt;&lt;img src="../../imgs/1.png" class="toast_icon"&gt;&lt;/img&gt;&lt;span class="toast_word"&gt;'</span> + <span class="keyword">this</span>.msg + <span class="string">'&lt;/span&gt;&lt;/div&gt;'</span>;</div><div class="line">            <span class="keyword">this</span>.$toast = $(html);</div><div class="line">            $(<span class="string">'body'</span>).append(<span class="keyword">this</span>.$toast);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">var</span> html = <span class="string">'&lt;div class="toast"&gt;&lt;img src="../../imgs/0.png" class="toast_icon"&gt;&lt;/img&gt;&lt;span class="toast_word"&gt;'</span> + <span class="keyword">this</span>.msg + <span class="string">'&lt;/span&gt;&lt;/div&gt;'</span>;</div><div class="line">            <span class="keyword">this</span>.$toast = $(html);</div><div class="line">            $(<span class="string">'body'</span>).append(<span class="keyword">this</span>.$toast);</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">showToast</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">this</span>.$toast.fadeIn(<span class="number">300</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                _this.$toast.fadeOut(<span class="number">300</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                    _this.$toast.remove();</div><div class="line">                &#125;);</div><div class="line">            &#125;, _this.time);</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Toast</span>(<span class="params">status, msg, time</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> toast(status, msg, time);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>4.<strong>ç¬”è®°æ¨¡å—</strong></p><p>æ€è·¯ï¼š</p><blockquote><ol><li>åˆå§‹åŒ–ï¼ˆå¦‚ idï¼Œusername ç­‰ç­‰ï¼‰</li><li>åˆ›å»ºèŠ‚ç‚¹</li><li>è®¾ç½®é¢œè‰²</li><li>ç»‘å®šäº‹ä»¶</li></ol></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Note</span>(<span class="params">opts</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.initOpts(opts);</div><div class="line">    <span class="keyword">this</span>.createNode();</div><div class="line">    <span class="keyword">this</span>.setColor();</div><div class="line">    <span class="keyword">this</span>.bind();</div><div class="line">&#125;</div><div class="line"></div><div class="line">Note.prototype = &#123;</div><div class="line">    <span class="attr">colors</span>: [</div><div class="line">        [<span class="string">'#ea9b35'</span>, <span class="string">'#efb04e'</span>], <span class="comment">// headColor, containerColor</span></div><div class="line">        [<span class="string">'#dd598b'</span>, <span class="string">'#e672a2'</span>],</div><div class="line">        [<span class="string">'#c24226'</span>, <span class="string">'#d15a39'</span>],</div><div class="line">        [<span class="string">'#c1c341'</span>, <span class="string">'#d0d25c'</span>],</div><div class="line">        [<span class="string">'#3f78c3'</span>, <span class="string">'#5591d2'</span>]</div><div class="line">    ],</div><div class="line">    <span class="attr">defaultOpts</span>: &#123;</div><div class="line">        <span class="attr">id</span>: <span class="string">''</span>, <span class="comment">//Noteçš„ id</span></div><div class="line">        $ct: $(<span class="string">'#content'</span>).length &gt; <span class="number">0</span> ? $(<span class="string">'#content'</span>) : $(<span class="string">'body'</span>), <span class="comment">//é»˜è®¤å­˜æ”¾ Note çš„å®¹å™¨</span></div><div class="line">        context: <span class="string">'è¯·è¾“å…¥å†…å®¹'</span>, <span class="comment">//Note çš„å†…å®¹</span></div><div class="line">        createTime: <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleDateString().replace(<span class="regexp">/\//g</span>, <span class="string">'-'</span>).match(<span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;/</span>),</div><div class="line">        <span class="attr">username</span>: <span class="string">'admin'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">initOpts</span>: <span class="function"><span class="keyword">function</span> (<span class="params">opts</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.opts = $.extend(&#123;&#125;, <span class="keyword">this</span>.defaultOpts, opts || &#123;&#125;);</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.opts.id) &#123;</div><div class="line">            <span class="keyword">this</span>.id = <span class="keyword">this</span>.opts.id;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.createTime = <span class="keyword">this</span>.opts.createTime ? <span class="keyword">this</span>.opts.createTime : <span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleDateString().replace(<span class="regexp">/\//g</span>, <span class="string">'-'</span>).match(<span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;/</span>);</div><div class="line">        <span class="keyword">this</span>.username = <span class="keyword">this</span>.opts.username ? <span class="keyword">this</span>.opts.username : <span class="string">'admin'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">createNode</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> tpl = <span class="string">'&lt;div class="note"&gt;'</span> +</div><div class="line">            <span class="string">'&lt;div class="note-head"&gt;&lt;span class="delete"&gt;&amp;times;&lt;/span&gt;&lt;/div&gt;'</span> +</div><div class="line">            <span class="string">'&lt;div class="note-ct" contenteditable="true"&gt;&lt;/div&gt;'</span> +</div><div class="line">            <span class="string">'&lt;div class="note-info"&gt;&lt;div class="note-name"&gt;'</span> + <span class="keyword">this</span>.username + <span class="string">'&lt;/div&gt;&lt;div class="note-time"&gt;'</span> + <span class="keyword">this</span>.createTime + <span class="string">'&lt;/div&gt;'</span> +</div><div class="line">            <span class="string">'&lt;/div&gt;'</span>;</div><div class="line">        <span class="keyword">this</span>.$note = $(tpl);</div><div class="line">        <span class="keyword">this</span>.$note.find(<span class="string">'.note-ct'</span>).html(<span class="keyword">this</span>.opts.context);</div><div class="line">        <span class="keyword">this</span>.opts.$ct.append(<span class="keyword">this</span>.$note);</div><div class="line">        <span class="comment">//if (!this.id) this.$note.css('bottom', '10px'); //æ–°å¢æ”¾åˆ°å³è¾¹</span></div><div class="line">        Event.fire(<span class="string">'waterfall'</span>);</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">setColor</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> color = <span class="keyword">this</span>.colors[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">5</span>)];</div><div class="line">        <span class="keyword">this</span>.$note.find(<span class="string">".note-head"</span>).css(<span class="string">'background-color'</span>, color[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">this</span>.$note.find(<span class="string">'.note-ct'</span>).css(<span class="string">'background-color'</span>, color[<span class="number">1</span>]);</div><div class="line">        <span class="keyword">this</span>.$note.find(<span class="string">'.note-info'</span>).css(<span class="string">'background-color'</span>, color[<span class="number">1</span>]);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">setLayout</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">if</span> (self.clock) &#123;</div><div class="line">            clearTimeout(self.clock);</div><div class="line">        &#125;</div><div class="line">        self.clock = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            Event.fire(<span class="string">'waterfall'</span>);</div><div class="line">        &#125;, <span class="number">100</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">bind</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>, <span class="comment">//è®°å½•ä¸‹å‘ï¼Œä¹‹å‰æœ«å°¾æ˜¯åˆ†å·ä¸æ˜¯é€—å·åé¢éƒ½å˜æˆäº†å…¨å±€å˜é‡ç»“æœé€ æˆäº†æœ€åä¸€ä¸ªæ‰èƒ½ä¿®æ”¹ğŸ˜‚</span></div><div class="line">            $note = <span class="keyword">this</span>.$note,</div><div class="line">            $noteHead = $note.find(<span class="string">'.note-head'</span>),</div><div class="line">            $noteCt = $note.find(<span class="string">'.note-ct'</span>),</div><div class="line">            $close = $note.find(<span class="string">'.delete'</span>);</div><div class="line"></div><div class="line">        $close.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            _this.delete();</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        $noteCt.on(<span class="string">'focus'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> ($noteCt.html() === <span class="string">'è¯·è¾“å…¥å†…å®¹'</span>) $noteCt.html(<span class="string">''</span>);</div><div class="line">            $noteCt.data(<span class="string">'before'</span>, $noteCt.html());</div><div class="line">        &#125;).on(<span class="string">'blur paste'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> ($noteCt.data(<span class="string">'before'</span>) != $noteCt.html()) &#123;</div><div class="line">                $noteCt.data(<span class="string">'before'</span>, $noteCt.html());</div><div class="line">                _this.setLayout();</div><div class="line">                <span class="keyword">if</span> (_this.id) &#123; <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªidï¼Œå¦‚æœæœ‰å°±æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰å°±æ·»åŠ </span></div><div class="line">                    _this.edit($noteCt.html())</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    _this.add($noteCt.html())</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        <span class="comment">//è®¾ç½®ç¬”è®°çš„ç§»åŠ¨</span></div><div class="line">        $noteHead.on(<span class="string">'mousedown'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> evtX = e.pageX - $note.offset().left, <span class="comment">//evtX è®¡ç®—äº‹ä»¶çš„è§¦å‘ç‚¹åœ¨ dialogå†…éƒ¨åˆ° dialog çš„å·¦è¾¹ç¼˜çš„è·ç¦»</span></div><div class="line">                evtY = e.pageY - $note.offset().top;</div><div class="line">            $note.addClass(<span class="string">'draggable'</span>).data(<span class="string">'evtPos'</span>, &#123;</div><div class="line">                <span class="attr">x</span>: evtX,</div><div class="line">                <span class="attr">y</span>: evtY</div><div class="line">            &#125;); <span class="comment">//æŠŠäº‹ä»¶åˆ° dialog è¾¹ç¼˜çš„è·ç¦»ä¿å­˜ä¸‹æ¥</span></div><div class="line">        &#125;).on(<span class="string">'mouseup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            $note.removeClass(<span class="string">'draggable'</span>).removeData(<span class="string">'pos'</span>);</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        $(<span class="string">'body'</span>).on(<span class="string">'mousemove'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            $(<span class="string">'.draggable'</span>).length &amp;&amp; $(<span class="string">'.draggable'</span>).offset(&#123;</div><div class="line">                <span class="attr">top</span>: e.pageY - $(<span class="string">'.draggable'</span>).data(<span class="string">'evtPos'</span>).y, <span class="comment">// å½“ç”¨æˆ·é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œæ ¹æ®é¼ æ ‡çš„ä½ç½®å’Œå‰é¢ä¿å­˜çš„è·ç¦»ï¼Œè®¡ç®— dialog çš„ç»å¯¹ä½ç½®</span></div><div class="line">                left: e.pageX - $(<span class="string">'.draggable'</span>).data(<span class="string">'evtPos'</span>).x</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/* æ·»åŠ ç¬”è®°åˆ°æ•°æ®åº“ */</span></div><div class="line">    add: <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">        $.post(<span class="string">'/api/notes/add'</span>, &#123;</div><div class="line">            <span class="attr">note</span>: msg</div><div class="line">        &#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (res.status === <span class="number">1</span>) &#123;</div><div class="line">                _this.id = res.id;</div><div class="line">                Toast(<span class="number">1</span>, <span class="string">'æ·»åŠ æˆåŠŸï¼'</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                _this.$note.remove();</div><div class="line">                Event.fire(<span class="string">'waterfall'</span>);</div><div class="line">                Toast(<span class="number">0</span>, res.errorMsg);</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* ç¼–è¾‘ç¬”è®°æ•°æ®åº“ */</span></div><div class="line">    edit: <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">        $.post(<span class="string">'/api/notes/edit'</span>, &#123;</div><div class="line">            <span class="attr">id</span>: <span class="keyword">this</span>.id,</div><div class="line">            <span class="attr">note</span>: msg</div><div class="line">        &#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (res.status === <span class="number">1</span>) &#123;</div><div class="line">                Toast(<span class="number">1</span>, <span class="string">'æ›´æ–°æˆåŠŸï¼'</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                Toast(<span class="number">0</span>, res.errorMsg);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">/* åˆ é™¤ç¬”è®° */</span></div><div class="line">    <span class="keyword">delete</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">if</span> (confirm(<span class="string">"ç¡®è®¤è¦åˆ é™¤å—ï¼Ÿ"</span>)) &#123;</div><div class="line">            $.post(<span class="string">'/api/notes/delete'</span>, &#123;</div><div class="line">                <span class="attr">id</span>: <span class="keyword">this</span>.id</div><div class="line">            &#125;).done(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (res.status === <span class="number">1</span>) &#123;</div><div class="line">                    Toast(<span class="number">1</span>, <span class="string">'åˆ é™¤æˆåŠŸï¼'</span>);</div><div class="line">                    _this.$note.remove();</div><div class="line">                    Event.fire(<span class="string">'waterfall'</span>)</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    Toast(<span class="number">0</span>, res.errorMsg);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>5.<strong>ç¬”è®°ç®¡ç†æ¨¡å—</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> NoteManager = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//é¡µé¢åŠ è½½</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        $.get(<span class="string">'api/notes'</span>).done(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (res.status === <span class="number">1</span>) &#123;</div><div class="line">                $.each(res.data, <span class="function"><span class="keyword">function</span> (<span class="params">index, msg</span>) </span>&#123;</div><div class="line">                    <span class="keyword">new</span> Note(&#123;</div><div class="line">                        <span class="attr">id</span>: msg.id,</div><div class="line">                        <span class="attr">context</span>: msg.text,</div><div class="line">                        <span class="attr">createTime</span>: msg.createdAt.match(<span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;/</span>),</div><div class="line">                        <span class="attr">username</span>: msg.username</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">                Event.fire(<span class="string">'waterfall'</span>);</div><div class="line"></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                Toast(<span class="number">0</span>, res.errorMsg);</div><div class="line">            &#125;</div><div class="line">        &#125;).fail(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            Toast(<span class="number">0</span>, <span class="string">"ç½‘ç»œå¼‚å¸¸"</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/* æ·»åŠ ç¬”è®° */</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        $.get(<span class="string">'/login'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;<span class="comment">//åˆ¤æ–­æ˜¯å¦ç™»å½•</span></div><div class="line">            <span class="keyword">if</span> (res.status === <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">new</span> Note(&#123;</div><div class="line">                    <span class="attr">username</span>: res.username</div><div class="line">                &#125;);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                Toast(<span class="number">0</span>, res.errorMsg);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">load</span>: load,</div><div class="line">        <span class="attr">add</span>: add</div><div class="line">    &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure><p>6.<strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong></p><figure class="highlight qml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* å‘å¸ƒè®¢é˜…æ¨¡å¼ */</span></div><div class="line"><span class="built_in">var</span> Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">var</span> events = &#123;&#125;;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">on</span>(<span class="params">evt, handler</span>) </span>&#123;</div><div class="line">        events[evt] = events[evt] || [];</div><div class="line">        events[evt].push(&#123;</div><div class="line">            <span class="attribute">handler</span>: handler</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fire</span>(<span class="params">evt, args</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!events[evt]) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">var</span> i = <span class="number">0</span>; i &lt; events[evt].length; i++) &#123;</div><div class="line">            events[evt][i].handler(args);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">off</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">        <span class="keyword">delete</span> events[name];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attribute">on</span>: <span class="keyword">on</span>,</div><div class="line">        <span class="attribute">fire</span>: fire,</div><div class="line">        <span class="attribute">off</span>: off</div><div class="line">    &#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure><p>å†™å®Œæ¨¡å—åï¼Œå†™å…¥å£æ–‡ä»¶index.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'sass/index.scss'</span>);</div><div class="line"><span class="keyword">var</span> Toast = <span class="built_in">require</span>(<span class="string">'mod/toast.js'</span>).Toast;</div><div class="line"><span class="keyword">var</span> WaterFall = <span class="built_in">require</span>(<span class="string">'mod/waterfall.js'</span>);</div><div class="line"><span class="keyword">var</span> NoteManager = <span class="built_in">require</span>(<span class="string">'mod/note-manager'</span>);</div><div class="line"><span class="keyword">var</span> Event = <span class="built_in">require</span>(<span class="string">'mod/event.js'</span>);</div><div class="line"></div><div class="line"></div><div class="line">NoteManager.load();</div><div class="line">$(<span class="string">'.add-note'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    NoteManager.add();</div><div class="line">&#125;)</div><div class="line"></div><div class="line">Event.on(<span class="string">'waterfall'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    WaterFall.init($(<span class="string">"#content"</span>));</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>åˆ°è¿™å°±å·®ä¸å¤šå®Œæˆäº†70%äº†ï¼Œæ¥ä¸‹æ¥å°±åˆ›å»ºæ•°æ®åº“ï¼Œè¿æ¥æ•°æ®åº“äº†</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">/*åˆ›å»ºæ•°æ®åº“ è¿è¡Œ node note.js*/</div><div class="line"></div><div class="line">var Sequelize = <span class="built_in">require</span>(<span class="string">'sequelize'</span>);</div><div class="line">var path = <span class="built_in">require</span>(<span class="string">'path'</span>);</div><div class="line"></div><div class="line">var sequelize = new Sequelize(undefined, undefined, undefined, &#123;</div><div class="line">    host: <span class="string">'localhost'</span>,</div><div class="line">    dialect: <span class="string">'sqlite'</span>,</div><div class="line">    // SQLite only</div><div class="line">    storage: path.join(__dirname, <span class="string">'../database/database.sqlite'</span>)</div><div class="line">&#125;);</div><div class="line"></div><div class="line">/* æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ</div><div class="line">node note.js</div><div class="line"></div><div class="line">sequelize.authenticate()</div><div class="line">    .<span class="keyword">then</span>(() =&gt; &#123;</div><div class="line">        console.log(<span class="string">'Connection has been established successfully.'</span>);</div><div class="line">    &#125;)</div><div class="line">    .catch(err =&gt; &#123;</div><div class="line">        console.<span class="built_in">error</span>(<span class="string">'Unable to connect to the database:'</span>, err);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">var Note = sequelize.define(<span class="string">'note'</span>, &#123;</div><div class="line">    text: &#123;</div><div class="line">        <span class="built_in">type</span>: Sequelize.STRING</div><div class="line">    &#125;,</div><div class="line">    userid: &#123;</div><div class="line">        <span class="built_in">type</span>: Sequelize.INTEGER</div><div class="line">    &#125;,</div><div class="line">    username: &#123;</div><div class="line">        <span class="built_in">type</span>: Sequelize.STRING</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">Note.sync();</div><div class="line"></div><div class="line">/*</div><div class="line">åˆ é™¤è¡¨</div><div class="line">Note.drop();</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line">/*</div><div class="line">//åˆ›å»ºæ•°æ®åº“</div><div class="line"></div><div class="line">Note.sync().<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">     Note.create(&#123;text:<span class="string">"sdsdsdsd"</span>&#125;);</div><div class="line">&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">    //æŸ¥è¯¢è¡¨</div><div class="line">    Note.findAll(&#123;raw:<span class="keyword">true</span>&#125;).<span class="keyword">then</span>(<span class="function"><span class="keyword">function</span><span class="params">(notes)</span></span>&#123;</div><div class="line">        console.log(notes);</div><div class="line">    &#125;)</div><div class="line">&#125;);</div><div class="line">*/</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Note;</div></pre></td></tr></table></figure><p>ç„¶åæ˜¯åœ¨routes é‡Œå¤„ç† ajax è¯·æ±‚ï¼Œå¤„ç†ç™»å½•ä¿¡æ¯ï¼Œè·å– idï¼Œç”¨æˆ·åç­‰ç­‰ï¼Œåˆ°è¿™å°±åŸºæœ¬å®Œæˆäº†</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡ä¸€æ˜ŸæœŸçš„å¼€å‘ï¼Œäº†è§£äº†å‰åç«¯è”è°ƒï¼Œæ¨¡å—åŒ–å¼€å‘æ–¹å¼ã€webpack åŠloaderå’Œæ’ä»¶çš„ä½¿ç”¨ã€npm çš„ä½¿ç”¨ï¼ŒExpressçš„ä½¿ç”¨ã€è·¯ç”±ã€ä¸­é—´ä»¶ã€sqlite3ã€nodejsï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­è¿˜æ˜¯æœ‰é‡åˆ°è®¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚åœ¨è¿ç»­å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¸å°å¿ƒæŠŠé€—å·å†™æˆäº†åˆ†å·ï¼Œå…¶ä»–å˜é‡å°±å˜æˆäº†å…¨å±€å˜é‡ï¼Œäºæ˜¯å°±å‡ºé”™äº†ï¼ŒæŸ¥äº†å¥½ä¹…ğŸ˜‚<br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1fji7u6i1v0j30jm06y0t6.jpg" alt=""><br>ä¸è¿‡åœ¨è¿™è¿‡ç¨‹ä¹‹ä¸­è¿˜æ˜¯å­¦åˆ°äº†è®¸å¤šï¼Œé‡è¦çš„æ˜¯è¿‡ç¨‹ï¼Œç»§ç»­å¾€å‰ç«¯çš„è·¯èµ°ä¸‹å»ğŸ˜„</p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;h2 id=&quot;å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š&quot;&gt;&lt;a href=&quot;#å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š&quot;&gt;&lt;/a&gt;å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcly1fjhulxqhxuj31kw0j976o.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;&lt;p&gt;ç•Œé¢å¯èƒ½ä¸æ˜¯å¤ªå¥½çœ‹ğŸ˜ï¼Œè€ƒè™‘åˆ°å®¹å™¨çš„é«˜åº¦ä¼šè¢«æ‹‰é•¿ï¼Œå› æ­¤æ²¡æœ‰ç”¨å›¾ç‰‡åšèƒŒæ™¯ã€‚&lt;/p&gt;&lt;h2 id=&quot;é¢„è§ˆ&quot;&gt;&lt;a href=&quot;#é¢„è§ˆ&quot; class=&quot;headerlink&quot; title=&quot;é¢„è§ˆ&quot;&gt;&lt;/a&gt;é¢„è§ˆ&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://note.shenzekun.cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¾¿åˆ©è´´&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://www.shenzekun.cn/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="http://www.shenzekun.cn/tags/js/"/>
    
      <category term="node" scheme="http://www.shenzekun.cn/tags/node/"/>
    
  </entry>
  
</feed>
